{"abi":[{"type":"function","name":"BITMASK_INT24","inputs":[],"outputs":[{"name":"","type":"int256","internalType":"int256"}],"stateMutability":"view"},{"type":"function","name":"CLEAR_POOLID_MASK","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"LONG_MASK","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"MAX_LEG_WIDTH","inputs":[],"outputs":[{"name":"","type":"int24","internalType":"int24"}],"stateMutability":"view"},{"type":"function","name":"OPTION_RATIO_MASK","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"RISK_PARTNER_MASK","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"addAsset","inputs":[{"name":"self","type":"uint256","internalType":"uint256"},{"name":"_asset","type":"uint256","internalType":"uint256"},{"name":"legIndex","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"addIsLong","inputs":[{"name":"self","type":"uint256","internalType":"uint256"},{"name":"_isLong","type":"uint256","internalType":"uint256"},{"name":"legIndex","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"addLeg","inputs":[{"name":"self","type":"uint256","internalType":"uint256"},{"name":"legIndex","type":"uint256","internalType":"uint256"},{"name":"_optionRatio","type":"uint256","internalType":"uint256"},{"name":"_asset","type":"uint256","internalType":"uint256"},{"name":"_isLong","type":"uint256","internalType":"uint256"},{"name":"_tokenType","type":"uint256","internalType":"uint256"},{"name":"_riskPartner","type":"uint256","internalType":"uint256"},{"name":"_strike","type":"int24","internalType":"int24"},{"name":"_width","type":"int24","internalType":"int24"}],"outputs":[{"name":"tokenId","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"addOptionRatio","inputs":[{"name":"self","type":"uint256","internalType":"uint256"},{"name":"_optionRatio","type":"uint256","internalType":"uint256"},{"name":"legIndex","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"addRiskPartner","inputs":[{"name":"self","type":"uint256","internalType":"uint256"},{"name":"_riskPartner","type":"uint256","internalType":"uint256"},{"name":"legIndex","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"addStrike","inputs":[{"name":"self","type":"uint256","internalType":"uint256"},{"name":"_strike","type":"int24","internalType":"int24"},{"name":"legIndex","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"addTokenType","inputs":[{"name":"self","type":"uint256","internalType":"uint256"},{"name":"_tokenType","type":"uint256","internalType":"uint256"},{"name":"legIndex","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"addUniv3pool","inputs":[{"name":"self","type":"uint256","internalType":"uint256"},{"name":"_poolId","type":"uint64","internalType":"uint64"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"addWidth","inputs":[{"name":"self","type":"uint256","internalType":"uint256"},{"name":"_width","type":"int24","internalType":"int24"},{"name":"legIndex","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"asTicks","inputs":[{"name":"self","type":"uint256","internalType":"uint256"},{"name":"legIndex","type":"uint256","internalType":"uint256"},{"name":"tickSpacing","type":"int24","internalType":"int24"}],"outputs":[{"name":"legLowerTick","type":"int24","internalType":"int24"},{"name":"legUpperTick","type":"int24","internalType":"int24"}],"stateMutability":"view"},{"type":"function","name":"asset","inputs":[{"name":"self","type":"uint256","internalType":"uint256"},{"name":"legIndex","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"clearLeg","inputs":[{"name":"self","type":"uint256","internalType":"uint256"},{"name":"i","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"countLegs","inputs":[{"name":"self","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"countLongs","inputs":[{"name":"self","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"flipToBurnToken","inputs":[{"name":"self","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"isLong","inputs":[{"name":"self","type":"uint256","internalType":"uint256"},{"name":"legIndex","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"optionRatio","inputs":[{"name":"self","type":"uint256","internalType":"uint256"},{"name":"legIndex","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"riskPartner","inputs":[{"name":"self","type":"uint256","internalType":"uint256"},{"name":"legIndex","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"strike","inputs":[{"name":"self","type":"uint256","internalType":"uint256"},{"name":"legIndex","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"int24","internalType":"int24"}],"stateMutability":"view"},{"type":"function","name":"tokenType","inputs":[{"name":"self","type":"uint256","internalType":"uint256"},{"name":"legIndex","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"univ3pool","inputs":[{"name":"self","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"uint64","internalType":"uint64"}],"stateMutability":"view"},{"type":"function","name":"validate","inputs":[{"name":"self","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"univ3PoolAddressId","type":"uint64","internalType":"uint64"}],"stateMutability":"view"},{"type":"function","name":"width","inputs":[{"name":"self","type":"uint256","internalType":"uint256"},{"name":"legIndex","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"int24","internalType":"int24"}],"stateMutability":"view"},{"type":"error","name":"InvalidTokenIdParameter","inputs":[{"name":"parameterType","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"TicksNotInitializable","inputs":[]}],"bytecode":{"object":"0x608060405234801561001057600080fd5b50611048806100206000396000f3fe608060405234801561001057600080fd5b50600436106101ce5760003560e01c806373c2f1c011610104578063b4259a85116100a2578063d9cf1e7711610071578063d9cf1e7714610411578063e2106db314610434578063e2919d6814610447578063e9bc245f1461045a57600080fd5b8063b4259a85146103ac578063c2a9f1ce146103bf578063ce4d01a3146103d2578063d85db593146103fe57600080fd5b806381e130f6116100de57806381e130f61461035757806386ac76a31461036a5780638f07426114610386578063a1bb1ee81461039957600080fd5b806373c2f1c01461030a578063763b15951461031d57806379d09ad61461034457600080fd5b80632d07d5381161017157806344eaa2e61161014b57806344eaa2e6146102a45780634e79d609146102b757806364ddb0b1146102ca5780636860c7bc146102dd57600080fd5b80632d07d538146102625780633e6944bb146102755780633f0e76b21461029757600080fd5b80630ac41cf0116101ad5780630ac41cf01461021f57806317b9a0cd14610232578063233f50491461023c578063236e46501461024f57600080fd5b8062792a20146101d3578063037ae4af146101f957806307e90dbd1461020c575b600080fd5b6101e66101e1366004610e47565b61046d565b6040519081526020015b60405180910390f35b6101e6610207366004610e60565b610480565b6101e661021a366004610e60565b610497565b6101e661022d366004610e99565b6104a4565b6101e662ffffff81565b6101e661024a366004610e47565b6104c1565b6101e661025d366004610ece565b6104cd565b6101e6610270366004610efa565b6104db565b6101e67afe0000000000fe0000000000fe0000000000fe000000000000000081565b6101e665fffffffff3ff81565b6101e66102b2366004610e99565b6104fe565b6101e66102c5366004610e47565b610515565b6101e66102d8366004610ece565b610521565b6102f06102eb366004610f71565b61052f565b60408051600293840b81529190920b6020820152016101f0565b6101e6610318366004610e60565b610549565b6101e67fffffffffffffffffffffffffffffffffffffffffffffffff000000000000000081565b6101e6610352366004610ece565b610556565b6101e6610365366004610fa6565b610564565b610373610fff81565b60405160029190910b81526020016101f0565b6101e6610394366004610ece565b610579565b6101e66103a7366004610e60565b610587565b6101e66103ba366004610ece565b610594565b6103736103cd366004610e60565b6105a2565b6103e56103e0366004610e47565b6105af565b60405167ffffffffffffffff90911681526020016101f0565b61037361040c366004610e60565b6105bb565b6101e67b0100000000000100000000000100000000000100000000000000000081565b6103e5610442366004610e47565b6105cd565b6101e6610455366004610e60565b6105d6565b6101e6610468366004610e60565b6105e3565b600080610479836105f0565b9392505050565b60008061048d84846106a5565b9150505b92915050565b60008061048d84846106bc565b60008062ffffff8416604c60308502011b85015b95945050505050565b600080610479836106cf565b6000806104b88585856107cd565b6000806104ef8b8b8b8b8b8b8b8b8b6107e8565b9b9a5050505050505050505050565b600080610fff8416606460308502011b85016104b8565b6000806104798361085a565b6000806104b8858585610891565b60008061053d8585856108a2565b90969095509350505050565b60008061048d84846109d4565b6000806104b88585856109e7565b60008067ffffffffffffffff8316840161048d565b6000806104b88585856109f8565b60008061048d8484610a09565b6000806104b8858585610ad0565b60008061048d8484610ae1565b60008061047983610af5565b60008061048d8484603002604c011c90565b60008082610479565b60008061048d8484610e21565b60008061048d8484610e34565b60007afe0000000000fe0000000000fe0000000000fe000000000000000082166801000000000000000081101561062a5750600092915050565b6e01000000000000000000000000000081101561064a5750600192915050565b740100000000000000000000000000000000000000008110156106705750600292915050565b7a01000000000000000000000000000000000000000000000000000081101561069c5750600392915050565b50600492915050565b600060806041603084020184901c5b069392505050565b600060026048603084020184901c6106b4565b60007afe0000000000fe0000000000fe0000000000fe00000000000000008216680100000000000000008110156107085750600061077b565b6e0100000000000000000000000000008110156107275750600161077b565b7401000000000000000000000000000000000000000081101561074c5750600261077b565b7a0100000000000000000000000000000000000000000000000000008110156107775750600361077b565b5060045b7fffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000816004036030027b01000000000001000000000001000000000001000000000000000000901c168318915050919050565b6000604060308302016002845b06901b840190509392505050565b60006107f58a898b6109e7565b905061080281888b6107cd565b905061080f81878b610ad0565b905061081c81868b6109f8565b905061082981858b610891565b905062ffffff8316604c60308b02011b81019050610fff8216606460308b02011b81019a9950505050505050505050565b60006108678260036106bc565b6108728360026106bc565b61087d8460016106bc565b6108888560006106bc565b01010192915050565b6000604a60308302016004846107da565b600080806108b08686610ae1565b905060006108c38787603002604c011c90565b9050600085600281900b7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff27618816108fb576108fb610fe3565b05029050600086600281900b620d89e88161091857610918610fe3565b0502905060006002858902810b05808503975084810196509050600288810b9088900b8161094857610948610fe3565b0760020b15158061097057508760020b8660020b8161096957610969610fe3565b0760020b15155b8061098057508260020b8760020b125b8061099057508160020b8660020b135b156109c7576040517fc82825f500000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b5050505050935093915050565b60006004604a603084020184901c6106b4565b6000604160308302016080846107da565b6000604960308302016002846107da565b600081600003610a3c57507fffffffffffffffffffffffffffffffffffff000000000000ffffffffffffffff8216610491565b81600103610a6d57507fffffffffffffffffffffffff000000000000ffffffffffffffffffffffffffff8216610491565b81600203610a9e57507fffffffffffff000000000000ffffffffffffffffffffffffffffffffffffffff8216610491565b81600303610ac9575079ffffffffffffffffffffffffffffffffffffffffffffffffffff8216610491565b5090919050565b6000604860308302016002846107da565b60006110006064603084020184901c6106b4565b6000610b0182826106a5565b600003610b42576040517f93db0263000000000000000000000000000000000000000000000000000000008152600160048201526024015b60405180910390fd5b60005b6004811015610e1a57610b5883826106a5565b600003610ba8576040603082020183901c15610ba3576040517f93db026300000000000000000000000000000000000000000000000000000000815260016004820152602401610b39565b610e1a565b610bb28382610ae1565b60020b600003610bf1576040517f93db026300000000000000000000000000000000000000000000000000000000815260056004820152602401610b39565b7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff27618610c218483603002604c011c90565b60020b1480610c435750620d89e8610c3e8483603002604c011c90565b60020b145b15610c7c576040517f93db0263000000000000000000000000000000000000000000000000000000008152600481810152602401610b39565b6000610c8884836109d4565b9050818114610e115781610c9c85836109d4565b14610cd6576040517f93db026300000000000000000000000000000000000000000000000000000000815260036004820152602401610b39565b610ce08483610e34565b610cea8583610e34565b141580610d095750610cfc84836106a5565b610d0685836106a5565b14155b15610d43576040517f93db026300000000000000000000000000000000000000000000000000000000815260036004820152602401610b39565b6000610d4f85846106bc565b90506000610d5d86846106bc565b90506000610d6b8786610e21565b90506000610d798886610e21565b90508284148015610d8957508082145b15610dc2576040517f93db0263000000000000000000000000000000000000000000000000000000008152600481810152602401610b39565b828414158015610dd25750808214155b15610e0c576040517f93db026300000000000000000000000000000000000000000000000000000000815260056004820152602401610b39565b505050505b50600101610b45565b5081610491565b600060026049603084020184901c6106b4565b600060026040603084020184901c6106b4565b600060208284031215610e5957600080fd5b5035919050565b60008060408385031215610e7357600080fd5b50508035926020909101359150565b8035600281900b8114610e9457600080fd5b919050565b600080600060608486031215610eae57600080fd5b83359250610ebe60208501610e82565b9150604084013590509250925092565b600080600060608486031215610ee357600080fd5b505081359360208301359350604090920135919050565b60008060008060008060008060006101208a8c031215610f1957600080fd5b8935985060208a0135975060408a0135965060608a0135955060808a0135945060a08a0135935060c08a01359250610f5360e08b01610e82565b9150610f626101008b01610e82565b90509295985092959850929598565b600080600060608486031215610f8657600080fd5b8335925060208401359150610f9d60408501610e82565b90509250925092565b60008060408385031215610fb957600080fd5b82359150602083013567ffffffffffffffff81168114610fd857600080fd5b809150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fdfea2646970667358221220e606f2fba1173c61ce79759a8049c0dd20c87d3d7c101ca8cf9a72ec08844a3e64736f6c63430008120033","sourceMap":"317:16339:91:-:0;;;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x608060405234801561001057600080fd5b50600436106101ce5760003560e01c806373c2f1c011610104578063b4259a85116100a2578063d9cf1e7711610071578063d9cf1e7714610411578063e2106db314610434578063e2919d6814610447578063e9bc245f1461045a57600080fd5b8063b4259a85146103ac578063c2a9f1ce146103bf578063ce4d01a3146103d2578063d85db593146103fe57600080fd5b806381e130f6116100de57806381e130f61461035757806386ac76a31461036a5780638f07426114610386578063a1bb1ee81461039957600080fd5b806373c2f1c01461030a578063763b15951461031d57806379d09ad61461034457600080fd5b80632d07d5381161017157806344eaa2e61161014b57806344eaa2e6146102a45780634e79d609146102b757806364ddb0b1146102ca5780636860c7bc146102dd57600080fd5b80632d07d538146102625780633e6944bb146102755780633f0e76b21461029757600080fd5b80630ac41cf0116101ad5780630ac41cf01461021f57806317b9a0cd14610232578063233f50491461023c578063236e46501461024f57600080fd5b8062792a20146101d3578063037ae4af146101f957806307e90dbd1461020c575b600080fd5b6101e66101e1366004610e47565b61046d565b6040519081526020015b60405180910390f35b6101e6610207366004610e60565b610480565b6101e661021a366004610e60565b610497565b6101e661022d366004610e99565b6104a4565b6101e662ffffff81565b6101e661024a366004610e47565b6104c1565b6101e661025d366004610ece565b6104cd565b6101e6610270366004610efa565b6104db565b6101e67afe0000000000fe0000000000fe0000000000fe000000000000000081565b6101e665fffffffff3ff81565b6101e66102b2366004610e99565b6104fe565b6101e66102c5366004610e47565b610515565b6101e66102d8366004610ece565b610521565b6102f06102eb366004610f71565b61052f565b60408051600293840b81529190920b6020820152016101f0565b6101e6610318366004610e60565b610549565b6101e67fffffffffffffffffffffffffffffffffffffffffffffffff000000000000000081565b6101e6610352366004610ece565b610556565b6101e6610365366004610fa6565b610564565b610373610fff81565b60405160029190910b81526020016101f0565b6101e6610394366004610ece565b610579565b6101e66103a7366004610e60565b610587565b6101e66103ba366004610ece565b610594565b6103736103cd366004610e60565b6105a2565b6103e56103e0366004610e47565b6105af565b60405167ffffffffffffffff90911681526020016101f0565b61037361040c366004610e60565b6105bb565b6101e67b0100000000000100000000000100000000000100000000000000000081565b6103e5610442366004610e47565b6105cd565b6101e6610455366004610e60565b6105d6565b6101e6610468366004610e60565b6105e3565b600080610479836105f0565b9392505050565b60008061048d84846106a5565b9150505b92915050565b60008061048d84846106bc565b60008062ffffff8416604c60308502011b85015b95945050505050565b600080610479836106cf565b6000806104b88585856107cd565b6000806104ef8b8b8b8b8b8b8b8b8b6107e8565b9b9a5050505050505050505050565b600080610fff8416606460308502011b85016104b8565b6000806104798361085a565b6000806104b8858585610891565b60008061053d8585856108a2565b90969095509350505050565b60008061048d84846109d4565b6000806104b88585856109e7565b60008067ffffffffffffffff8316840161048d565b6000806104b88585856109f8565b60008061048d8484610a09565b6000806104b8858585610ad0565b60008061048d8484610ae1565b60008061047983610af5565b60008061048d8484603002604c011c90565b60008082610479565b60008061048d8484610e21565b60008061048d8484610e34565b60007afe0000000000fe0000000000fe0000000000fe000000000000000082166801000000000000000081101561062a5750600092915050565b6e01000000000000000000000000000081101561064a5750600192915050565b740100000000000000000000000000000000000000008110156106705750600292915050565b7a01000000000000000000000000000000000000000000000000000081101561069c5750600392915050565b50600492915050565b600060806041603084020184901c5b069392505050565b600060026048603084020184901c6106b4565b60007afe0000000000fe0000000000fe0000000000fe00000000000000008216680100000000000000008110156107085750600061077b565b6e0100000000000000000000000000008110156107275750600161077b565b7401000000000000000000000000000000000000000081101561074c5750600261077b565b7a0100000000000000000000000000000000000000000000000000008110156107775750600361077b565b5060045b7fffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000816004036030027b01000000000001000000000001000000000001000000000000000000901c168318915050919050565b6000604060308302016002845b06901b840190509392505050565b60006107f58a898b6109e7565b905061080281888b6107cd565b905061080f81878b610ad0565b905061081c81868b6109f8565b905061082981858b610891565b905062ffffff8316604c60308b02011b81019050610fff8216606460308b02011b81019a9950505050505050505050565b60006108678260036106bc565b6108728360026106bc565b61087d8460016106bc565b6108888560006106bc565b01010192915050565b6000604a60308302016004846107da565b600080806108b08686610ae1565b905060006108c38787603002604c011c90565b9050600085600281900b7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff27618816108fb576108fb610fe3565b05029050600086600281900b620d89e88161091857610918610fe3565b0502905060006002858902810b05808503975084810196509050600288810b9088900b8161094857610948610fe3565b0760020b15158061097057508760020b8660020b8161096957610969610fe3565b0760020b15155b8061098057508260020b8760020b125b8061099057508160020b8660020b135b156109c7576040517fc82825f500000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b5050505050935093915050565b60006004604a603084020184901c6106b4565b6000604160308302016080846107da565b6000604960308302016002846107da565b600081600003610a3c57507fffffffffffffffffffffffffffffffffffff000000000000ffffffffffffffff8216610491565b81600103610a6d57507fffffffffffffffffffffffff000000000000ffffffffffffffffffffffffffff8216610491565b81600203610a9e57507fffffffffffff000000000000ffffffffffffffffffffffffffffffffffffffff8216610491565b81600303610ac9575079ffffffffffffffffffffffffffffffffffffffffffffffffffff8216610491565b5090919050565b6000604860308302016002846107da565b60006110006064603084020184901c6106b4565b6000610b0182826106a5565b600003610b42576040517f93db0263000000000000000000000000000000000000000000000000000000008152600160048201526024015b60405180910390fd5b60005b6004811015610e1a57610b5883826106a5565b600003610ba8576040603082020183901c15610ba3576040517f93db026300000000000000000000000000000000000000000000000000000000815260016004820152602401610b39565b610e1a565b610bb28382610ae1565b60020b600003610bf1576040517f93db026300000000000000000000000000000000000000000000000000000000815260056004820152602401610b39565b7ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff27618610c218483603002604c011c90565b60020b1480610c435750620d89e8610c3e8483603002604c011c90565b60020b145b15610c7c576040517f93db0263000000000000000000000000000000000000000000000000000000008152600481810152602401610b39565b6000610c8884836109d4565b9050818114610e115781610c9c85836109d4565b14610cd6576040517f93db026300000000000000000000000000000000000000000000000000000000815260036004820152602401610b39565b610ce08483610e34565b610cea8583610e34565b141580610d095750610cfc84836106a5565b610d0685836106a5565b14155b15610d43576040517f93db026300000000000000000000000000000000000000000000000000000000815260036004820152602401610b39565b6000610d4f85846106bc565b90506000610d5d86846106bc565b90506000610d6b8786610e21565b90506000610d798886610e21565b90508284148015610d8957508082145b15610dc2576040517f93db0263000000000000000000000000000000000000000000000000000000008152600481810152602401610b39565b828414158015610dd25750808214155b15610e0c576040517f93db026300000000000000000000000000000000000000000000000000000000815260056004820152602401610b39565b505050505b50600101610b45565b5081610491565b600060026049603084020184901c6106b4565b600060026040603084020184901c6106b4565b600060208284031215610e5957600080fd5b5035919050565b60008060408385031215610e7357600080fd5b50508035926020909101359150565b8035600281900b8114610e9457600080fd5b919050565b600080600060608486031215610eae57600080fd5b83359250610ebe60208501610e82565b9150604084013590509250925092565b600080600060608486031215610ee357600080fd5b505081359360208301359350604090920135919050565b60008060008060008060008060006101208a8c031215610f1957600080fd5b8935985060208a0135975060408a0135965060608a0135955060808a0135945060a08a0135935060c08a01359250610f5360e08b01610e82565b9150610f626101008b01610e82565b90509295985092959850929598565b600080600060608486031215610f8657600080fd5b8335925060208401359150610f9d60408501610e82565b90509250925092565b60008060408385031215610fb957600080fd5b82359150602083013567ffffffffffffffff81168114610fd857600080fd5b809150509250929050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fdfea2646970667358221220e606f2fba1173c61ce79759a8049c0dd20c87d3d7c101ca8cf9a72ec08844a3e64736f6c63430008120033","sourceMap":"317:16339:91:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;15223:133;;;;;;:::i;:::-;;:::i;:::-;;;345:25:92;;;333:2;318:18;15223:133:91;;;;;;;;3283:165;;;;;;:::i;:::-;;:::i;3706:155::-;;;;;;:::i;:::-;;:::i;10787:215::-;;;;;;:::i;:::-;;:::i;1003:47::-;;1042:8;1003:47;;13410:145;;;;;;:::i;:::-;;:::i;7839:213::-;;;;;;:::i;:::-;;:::i;12271:559::-;;;;;;:::i;:::-;;:::i;875:122::-;;927:70;875:122;;1502:58;;1546:14;1502:58;;11372:261;;;;;;:::i;:::-;;:::i;13876:135::-;;;;;;:::i;:::-;;:::i;10230:237::-;;;;;;:::i;:::-;;:::i;14563:251::-;;;;;;:::i;:::-;;:::i;:::-;;;;2880:1:92;2869:21;;;2851:40;;2927:21;;;;2922:2;2907:18;;2900:49;2824:18;14563:251:91;2685:270:92;5437:165:91;;;;;;:::i;:::-;;:::i;678:119::-;;730:67;678:119;;8425:237;;;;;;:::i;:::-;;:::i;7049:164::-;;;;;;:::i;:::-;;:::i;1186:42::-;;1224:4;1186:42;;;;;3488:1:92;3477:21;;;;3459:40;;3447:2;3432:18;1186:42:91;3317:188:92;9649:229:91;;;;;;:::i;:::-;;:::i;16041:145::-;;;;;;:::i;:::-;;:::i;9086:217::-;;;;;;:::i;:::-;;:::i;6519:149::-;;;;;;:::i;:::-;;:::i;16506:148::-;;;;;;:::i;:::-;;:::i;:::-;;;3684:18:92;3672:31;;;3654:50;;3642:2;3627:18;16506:148:91;3510:200:92;5918:151:91;;;;;;:::i;:::-;;:::i;432:105::-;;476:61;432:105;;2009:131;;;;;;:::i;:::-;;:::i;4218:161::-;;;;;;:::i;:::-;;:::i;2847:153::-;;;;;;:::i;:::-;;:::i;15223:133::-;15277:7;15296:9;15308:23;15326:4;15308:17;:23::i;:::-;15296:35;15223:133;-1:-1:-1;;;15223:133:91:o;3283:165::-;3357:7;3376:9;3388:35;3408:4;3414:8;3388:19;:35::i;:::-;3376:47;-1:-1:-1;;3283:165:91;;;;;:::o;3706:155::-;3775:7;3794:9;3806:30;3821:4;3827:8;3806:14;:30::i;10787:215::-;10904:7;;5025:8:12;14609:31;;14646:23;14662:2;14651:13;;14646:23;14608:62;14593:78;;10935:42:91;10923:54;10787:215;-1:-1:-1;;;;;10787:215:91:o;13410:145::-;13470:7;13489:9;13501:29;13525:4;13501:23;:29::i;7839:213::-;7956:7;7975:9;7987:40;8004:4;8010:6;8018:8;7987:16;:40::i;12271:559::-;12544:15;12571:9;12583:222;12611:4;12629:8;12651:12;12677:6;12697:7;12718:10;12742:12;12768:7;12789:6;12583:14;:222::i;:::-;12571:234;12271:559;-1:-1:-1;;;;;;;;;;;12271:559:91:o;11372:261::-;11457:7;;15308:21:12;;;15335:23;15351:2;15340:13;;15335:23;15300:59;15292:68;;11568:40:91;15045:332:12;13876:135:91;13931:7;13950:9;13962:24;13981:4;13962:18;:24::i;10230:237::-;10359:7;10378:9;10390:52;10413:4;10419:12;10433:8;10390:22;:52::i;14563:251::-;14682:18;14702;14763:44;14779:4;14785:8;14795:11;14763:15;:44::i;:::-;14732:75;;;;-1:-1:-1;14563:251:91;-1:-1:-1;;;;14563:251:91:o;5437:165::-;5511:7;5530:9;5542:35;5562:4;5568:8;5542:19;:35::i;8425:237::-;8554:7;8573:9;8585:52;8608:4;8614:12;8628:8;8585:22;:52::i;7049:164::-;7122:7;;10813:16:12;;;10806:23;;7153:35:91;10681:165:12;9649:229:91;9774:7;9793:9;9805:48;9826:4;9832:10;9844:8;9805:20;:48::i;16041:145::-;16105:7;16124:9;16136:25;16153:4;16159:1;16136:16;:25::i;9086:217::-;9205:7;9224:9;9236:42;9254:4;9260:7;9269:8;9236:17;:42::i;6519:149::-;6587:5;6604:7;6614:29;6628:4;6634:8;6614:13;:29::i;16506:148::-;16559:25;16596:8;16607:22;16624:4;16607:16;:22::i;5918:151::-;5987:5;6004:7;6014:30;6029:4;6035:8;9604:2:12;9593:13;9588:23;;9579:33;;9447:184;2009:131:91;2063:6;;2110:4;2092:23;5703:134:12;4218:161:91;4290:7;4309:9;4321:33;4339:4;4345:8;4321:17;:33::i;2847:153::-;2915:7;2934:9;2946:29;2960:4;2966:8;2946:13;:29::i;21915:752:12:-;21971:7;4908:70;22068:24;;22397:7;22382:22;;22378:265;;;-1:-1:-1;22427:1:12;;21915:752;-1:-1:-1;;21915:752:12:o;22378:265::-;22464:8;22449:12;:23;22445:198;;;-1:-1:-1;22495:1:12;;21915:752;-1:-1:-1;;21915:752:12:o;22445:198::-;22532:8;22517:12;:23;22513:130;;;-1:-1:-1;22563:1:12;;21915:752;-1:-1:-1;;21915:752:12:o;22513:130::-;22600:8;22585:12;:23;22581:62;;;-1:-1:-1;22631:1:12;;21915:752;-1:-1:-1;;21915:752:12:o;22581:62::-;-1:-1:-1;22659:1:12;;21915:752;-1:-1:-1;;21915:752:12:o;6752:192::-;6828:7;6923:3;6896:22;6912:2;6901:13;;6896:22;6887:32;;;6886:40;;;6752:192;-1:-1:-1;;;6752:192:12:o;7188:185::-;7259:7;7354:1;7327:22;7343:2;7332:13;;7327:22;7318:32;;;7317:38;;17301:1649;17363:7;4908:70;17692:24;;18029:7;18014:22;;18010:384;;;-1:-1:-1;18071:1:12;18010:384;;;18112:8;18097:12;:23;18093:301;;;-1:-1:-1;18155:1:12;18093:301;;;18196:8;18181:12;:23;18177:217;;;-1:-1:-1;18239:1:12;18177:217;;;18280:8;18265:12;:23;18261:133;;;-1:-1:-1;18323:1:12;18261:133;;;-1:-1:-1;18378:1:12;18261:133;4709:67;18897:12;18893:1;:16;18887:2;:23;4453:61;18873:38;;18872:60;18864:4;:69;18857:76;;;17301:1649;;;:::o;11422:238::-;11541:7;11623:2;11639;11628:13;;11623:18;11616:1;11607:6;:10;;11599:43;;11591:4;:52;11584:59;;11422:238;;;;;:::o;16002:717::-;16277:15;16314:44;16329:4;16335:12;16349:8;16314:14;:44::i;:::-;16304:54;;16378:35;16387:7;16396:6;16404:8;16378;:35::i;:::-;16368:45;;16433:37;16443:7;16452;16461:8;16433:9;:37::i;:::-;16423:47;;16490:43;16503:7;16512:10;16524:8;16490:12;:43::i;:::-;16480:53;;16553:47;16568:7;16577:12;16591:8;16553:14;:47::i;:::-;16543:57;-1:-1:-1;5025:8:12;14609:31;;14646:23;14662:2;14651:13;;14646:23;14608:62;14593:78;;16610:47;-1:-1:-1;15308:21:12;;;15335:23;15351:2;15340:13;;15335:23;15300:59;15292:68;;16667:45;16002:717;-1:-1:-1;;;;;;;;;;16002:717:12:o;19259:189::-;19316:7;19417:14;:4;19429:1;19417:11;:14::i;:::-;19400;:4;19412:1;19400:11;:14::i;:::-;19383;:4;19395:1;19383:11;:14::i;:::-;19366;:4;19378:1;19366:11;:14::i;:::-;:31;:48;:65;;19259:189;-1:-1:-1;;19259:189:12:o;13856:261::-;13987:7;14075:23;14091:2;14080:13;;14075:23;14068:1;14053:12;:16;;19991:1526;20112:18;;;20204:20;:4;20215:8;20204:10;:20::i;:::-;20186:38;-1:-1:-1;20238:16:12;20257:21;:4;20269:8;9604:2;9593:13;9588:23;;9579:33;;9447:184;20257:21;20238:40;-1:-1:-1;20549:13:12;20609:11;20566:39;;;;378:7:2;20566:39:12;;;;;:::i;:::-;;20565:55;;-1:-1:-1;20634:13:12;20694:11;20651:39;;;;490:6:2;20651:39:12;;;;;:::i;:::-;;20650:55;;-1:-1:-1;20824:19:12;20874:1;20847:23;;;20846:29;;;20922:26;;;;-1:-1:-1;20950:26:12;;;;-1:-1:-1;20846:29:12;-1:-1:-1;21282:26:12;;;;;;;;;;;;;:::i;:::-;;:31;;;;;:82;;;21348:11;21333:26;;:12;:26;;;;;;;:::i;:::-;;:31;;;;21282:82;:124;;;;21399:7;21384:22;;:12;:22;;;21282:124;:166;;;;21441:7;21426:22;;:12;:22;;;21282:166;21261:239;;;21470:30;;;;;;;;;;;;;;21261:239;20162:1349;;;;;19991:1526;;;;;;:::o;8954:191::-;9030:7;9126:1;9098:23;9114:2;9103:13;;9098:23;9089:33;;;9088:39;;12020:262;12151:7;12241:22;12257:2;12246:13;;12241:22;12232:3;12217:12;:18;;13264:254;13391:7;13477:22;13493:2;13482:13;;13477:22;13470:1;13457:10;:14;;23349:576;23415:7;23438:1;23443;23438:6;23434:108;;-1:-1:-1;23472:70:12;23465:77;;23458:84;;23434:108;23556:1;23561;23556:6;23552:108;;-1:-1:-1;23590:70:12;23583:77;;23576:84;;23552:108;23674:1;23679;23674:6;23670:108;;-1:-1:-1;23708:70:12;23701:77;;23694:84;;23670:108;23792:1;23797;23792:6;23788:108;;-1:-1:-1;23826:70:12;23819:77;;23812:84;;23788:108;-1:-1:-1;23914:4:12;;23349:576;-1:-1:-1;23349:576:12:o;12694:238::-;12815:7;12891:22;12907:2;12896:13;;12891:22;12884:1;12874:7;:11;;10068:241;10138:5;10237:4;10209:23;10225:2;10214:13;;10209:23;10200:33;;;10199:42;;24395:3405;24450:6;24472:19;:4;24450:6;24472:16;:19::i;:::-;24495:1;24472:24;24468:70;;24505:33;;;;;24536:1;24505:33;;;345:25:92;318:18;;24505:33:12;;;;;;;;24468:70;24646:9;24641:3083;24665:1;24661;:5;24641:3083;;;24695:19;:4;24712:1;24695:16;:19::i;:::-;24718:1;24695:24;24691:455;;24994:2;24999;:6;;24994:11;24985:21;;;24984:28;24980:74;;25021:33;;;;;25052:1;25021:33;;;345:25:92;318:18;;25021:33:12;199:177:92;24980:74:12;25077:5;;24691:455;25290:13;:4;25301:1;25290:10;:13::i;:::-;:18;;25307:1;25290:18;25285:66;;25318:33;;;;;25349:1;25318:33;;;345:25:92;318:18;;25318:33:12;199:177:92;25285:66:12;378:7:2;25452:14:12;:4;25464:1;9604:2;9593:13;9588:23;;9579:33;;9447:184;25452:14;:43;;;25451:114;;;-1:-1:-1;490:6:2;25521:14:12;:4;25533:1;9604:2;9593:13;9588:23;;9579:33;;9447:184;25521:14;:43;;;25451:114;25426:198;;;25591:33;;;;;25622:1;25591:33;;;345:25:92;318:18;;25591:33:12;199:177:92;25426:198:12;25895:24;25922:19;:4;25939:1;25922:16;:19::i;:::-;25895:46;;25983:1;25963:16;:21;25959:1751;;26111:1;26073:34;:4;26090:16;26073;:34::i;:::-;:39;26069:109;;26145:33;;;;;26176:1;26145:33;;;345:25:92;318:18;;26145:33:12;199:177:92;26069:109:12;26359:13;:4;26370:1;26359:10;:13::i;:::-;26327:28;:4;26338:16;26327:10;:28::i;:::-;:45;;26326:134;;;-1:-1:-1;26440:19:12;:4;26457:1;26440:16;:19::i;:::-;26402:34;:4;26419:16;26402;:34::i;:::-;:57;;26326:134;26297:226;;;26490:33;;;;;26521:1;26490:33;;;345:25:92;318:18;;26490:33:12;199:177:92;26297:226:12;26606:14;26623;:4;26635:1;26623:11;:14::i;:::-;26606:31;-1:-1:-1;26659:15:12;26677:29;:4;26689:16;26677:11;:29::i;:::-;26659:47;-1:-1:-1;26800:17:12;26820;:4;26835:1;26820:14;:17::i;:::-;26800:37;-1:-1:-1;26859:18:12;26880:32;:4;26895:16;26880:14;:32::i;:::-;26859:53;;27123:7;27113:6;:17;27112:48;;;;;27149:10;27136:9;:23;27112:48;27108:118;;;27193:33;;;;;27224:1;27193:33;;;345:25:92;318:18;;27193:33:12;199:177:92;27108:118:12;27588:7;27578:6;:17;;27577:48;;;;;27614:10;27601:9;:23;;27577:48;27573:118;;;27658:33;;;;;27689:1;27658:33;;;345:25:92;318:18;;27658:33:12;199:177:92;27573:118:12;25986:1724;;;;25959:1751;-1:-1:-1;24668:3:12;;24641:3083;;;-1:-1:-1;27777:4:12;:16;5703:134;7716:188;7790:7;7885:1;7858:22;7874:2;7863:13;;7858:22;7849:32;;;7848:38;;6302:180;6372:7;6463:1;6440:2;6456;6445:13;;6440:18;6431:28;;;6430:34;;14:180:92;73:6;126:2;114:9;105:7;101:23;97:32;94:52;;;142:1;139;132:12;94:52;-1:-1:-1;165:23:92;;14:180;-1:-1:-1;14:180:92:o;381:248::-;449:6;457;510:2;498:9;489:7;485:23;481:32;478:52;;;526:1;523;516:12;478:52;-1:-1:-1;;549:23:92;;;619:2;604:18;;;591:32;;-1:-1:-1;381:248:92:o;634:160::-;700:20;;760:1;749:20;;;739:31;;729:59;;784:1;781;774:12;729:59;634:160;;;:::o;799:318::-;874:6;882;890;943:2;931:9;922:7;918:23;914:32;911:52;;;959:1;956;949:12;911:52;995:9;982:23;972:33;;1024:36;1056:2;1045:9;1041:18;1024:36;:::i;:::-;1014:46;;1107:2;1096:9;1092:18;1079:32;1069:42;;799:318;;;;;:::o;1302:316::-;1379:6;1387;1395;1448:2;1436:9;1427:7;1423:23;1419:32;1416:52;;;1464:1;1461;1454:12;1416:52;-1:-1:-1;;1487:23:92;;;1557:2;1542:18;;1529:32;;-1:-1:-1;1608:2:92;1593:18;;;1580:32;;1302:316;-1:-1:-1;1302:316:92:o;1623:734::-;1750:6;1758;1766;1774;1782;1790;1798;1806;1814;1867:3;1855:9;1846:7;1842:23;1838:33;1835:53;;;1884:1;1881;1874:12;1835:53;1920:9;1907:23;1897:33;;1977:2;1966:9;1962:18;1949:32;1939:42;;2028:2;2017:9;2013:18;2000:32;1990:42;;2079:2;2068:9;2064:18;2051:32;2041:42;;2130:3;2119:9;2115:19;2102:33;2092:43;;2182:3;2171:9;2167:19;2154:33;2144:43;;2234:3;2223:9;2219:19;2206:33;2196:43;;2258:37;2290:3;2279:9;2275:19;2258:37;:::i;:::-;2248:47;;2314:37;2346:3;2335:9;2331:19;2314:37;:::i;:::-;2304:47;;1623:734;;;;;;;;;;;:::o;2362:318::-;2437:6;2445;2453;2506:2;2494:9;2485:7;2481:23;2477:32;2474:52;;;2522:1;2519;2512:12;2474:52;2558:9;2545:23;2535:33;;2615:2;2604:9;2600:18;2587:32;2577:42;;2638:36;2670:2;2659:9;2655:18;2638:36;:::i;:::-;2628:46;;2362:318;;;;;:::o;2960:352::-;3027:6;3035;3088:2;3076:9;3067:7;3063:23;3059:32;3056:52;;;3104:1;3101;3094:12;3056:52;3140:9;3127:23;3117:33;;3200:2;3189:9;3185:18;3172:32;3244:18;3237:5;3233:30;3226:5;3223:41;3213:69;;3278:1;3275;3268:12;3213:69;3301:5;3291:15;;;2960:352;;;;;:::o;3715:184::-;3767:77;3764:1;3757:88;3864:4;3861:1;3854:15;3888:4;3885:1;3878:15","linkReferences":{}},"methodIdentifiers":{"BITMASK_INT24()":"17b9a0cd","CLEAR_POOLID_MASK()":"763b1595","LONG_MASK()":"d9cf1e77","MAX_LEG_WIDTH()":"86ac76a3","OPTION_RATIO_MASK()":"3e6944bb","RISK_PARTNER_MASK()":"3f0e76b2","addAsset(uint256,uint256,uint256)":"236e4650","addIsLong(uint256,uint256,uint256)":"b4259a85","addLeg(uint256,uint256,uint256,uint256,uint256,uint256,uint256,int24,int24)":"2d07d538","addOptionRatio(uint256,uint256,uint256)":"79d09ad6","addRiskPartner(uint256,uint256,uint256)":"64ddb0b1","addStrike(uint256,int24,uint256)":"0ac41cf0","addTokenType(uint256,uint256,uint256)":"8f074261","addUniv3pool(uint256,uint64)":"81e130f6","addWidth(uint256,int24,uint256)":"44eaa2e6","asTicks(uint256,uint256,int24)":"6860c7bc","asset(uint256,uint256)":"e9bc245f","clearLeg(uint256,uint256)":"a1bb1ee8","countLegs(uint256)":"00792a20","countLongs(uint256)":"4e79d609","flipToBurnToken(uint256)":"233f5049","isLong(uint256,uint256)":"07e90dbd","optionRatio(uint256,uint256)":"037ae4af","riskPartner(uint256,uint256)":"73c2f1c0","strike(uint256,uint256)":"d85db593","tokenType(uint256,uint256)":"e2919d68","univ3pool(uint256)":"e2106db3","validate(uint256)":"ce4d01a3","width(uint256,uint256)":"c2a9f1ce"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.18+commit.87f61d96\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"parameterType\",\"type\":\"uint256\"}],\"name\":\"InvalidTokenIdParameter\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"TicksNotInitializable\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"BITMASK_INT24\",\"outputs\":[{\"internalType\":\"int256\",\"name\":\"\",\"type\":\"int256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"CLEAR_POOLID_MASK\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"LONG_MASK\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"MAX_LEG_WIDTH\",\"outputs\":[{\"internalType\":\"int24\",\"name\":\"\",\"type\":\"int24\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"OPTION_RATIO_MASK\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"RISK_PARTNER_MASK\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_asset\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"legIndex\",\"type\":\"uint256\"}],\"name\":\"addAsset\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_isLong\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"legIndex\",\"type\":\"uint256\"}],\"name\":\"addIsLong\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"legIndex\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_optionRatio\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_asset\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_isLong\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_tokenType\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_riskPartner\",\"type\":\"uint256\"},{\"internalType\":\"int24\",\"name\":\"_strike\",\"type\":\"int24\"},{\"internalType\":\"int24\",\"name\":\"_width\",\"type\":\"int24\"}],\"name\":\"addLeg\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"tokenId\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_optionRatio\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"legIndex\",\"type\":\"uint256\"}],\"name\":\"addOptionRatio\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_riskPartner\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"legIndex\",\"type\":\"uint256\"}],\"name\":\"addRiskPartner\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"},{\"internalType\":\"int24\",\"name\":\"_strike\",\"type\":\"int24\"},{\"internalType\":\"uint256\",\"name\":\"legIndex\",\"type\":\"uint256\"}],\"name\":\"addStrike\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_tokenType\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"legIndex\",\"type\":\"uint256\"}],\"name\":\"addTokenType\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"},{\"internalType\":\"uint64\",\"name\":\"_poolId\",\"type\":\"uint64\"}],\"name\":\"addUniv3pool\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"},{\"internalType\":\"int24\",\"name\":\"_width\",\"type\":\"int24\"},{\"internalType\":\"uint256\",\"name\":\"legIndex\",\"type\":\"uint256\"}],\"name\":\"addWidth\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"legIndex\",\"type\":\"uint256\"},{\"internalType\":\"int24\",\"name\":\"tickSpacing\",\"type\":\"int24\"}],\"name\":\"asTicks\",\"outputs\":[{\"internalType\":\"int24\",\"name\":\"legLowerTick\",\"type\":\"int24\"},{\"internalType\":\"int24\",\"name\":\"legUpperTick\",\"type\":\"int24\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"legIndex\",\"type\":\"uint256\"}],\"name\":\"asset\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"i\",\"type\":\"uint256\"}],\"name\":\"clearLeg\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"}],\"name\":\"countLegs\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"}],\"name\":\"countLongs\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"}],\"name\":\"flipToBurnToken\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"legIndex\",\"type\":\"uint256\"}],\"name\":\"isLong\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"legIndex\",\"type\":\"uint256\"}],\"name\":\"optionRatio\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"legIndex\",\"type\":\"uint256\"}],\"name\":\"riskPartner\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"legIndex\",\"type\":\"uint256\"}],\"name\":\"strike\",\"outputs\":[{\"internalType\":\"int24\",\"name\":\"\",\"type\":\"int24\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"legIndex\",\"type\":\"uint256\"}],\"name\":\"tokenType\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"}],\"name\":\"univ3pool\",\"outputs\":[{\"internalType\":\"uint64\",\"name\":\"\",\"type\":\"uint64\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"}],\"name\":\"validate\",\"outputs\":[{\"internalType\":\"uint64\",\"name\":\"univ3PoolAddressId\",\"type\":\"uint64\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"self\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"legIndex\",\"type\":\"uint256\"}],\"name\":\"width\",\"outputs\":[{\"internalType\":\"int24\",\"name\":\"\",\"type\":\"int24\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"author\":\"Axicon Labs Limited\",\"errors\":{\"InvalidTokenIdParameter(uint256)\":[{\"params\":{\"parameterType\":\"poolId=0, ratio=1, tokenType=2, risk_partner=3 , strike=4, width=5\"}}]},\"kind\":\"dev\",\"methods\":{\"addAsset(uint256,uint256,uint256)\":{\"details\":\"occupies the leftmost bit of the optionRatio 4 bits slot.The final mod: \\\"% 2\\\" = takes the rightmost bit of the pattern.\",\"params\":{\"legIndex\":\"the leg index of this position (in {0,1,2,3}).\",\"self\":\"the option position Id.\"},\"returns\":{\"_0\":\"the tokenId with numerarire added to the incoming leg index\"}},\"addIsLong(uint256,uint256,uint256)\":{\"params\":{\"_isLong\":\"whether the leg is long\",\"legIndex\":\"the leg index of this position (in {0,1,2,3}).\",\"self\":\"the option position Id.\"},\"returns\":{\"_0\":\"the tokenId with isLong added to its relevant leg\"}},\"addLeg(uint256,uint256,uint256,uint256,uint256,uint256,uint256,int24,int24)\":{\"params\":{\"_asset\":\"the asset of the leg.\",\"_isLong\":\"whether the leg is long.\",\"_optionRatio\":\"the relative size of the leg.\",\"_riskPartner\":\"the associated risk partner of the leg.\",\"_strike\":\"the strike price tick of the leg.\",\"_tokenType\":\"the type of token moved for the leg.\",\"_width\":\"the width of the leg.\",\"legIndex\":\"the leg index of this position (in {0,1,2,3}).\",\"self\":\"the tokenId in the SFPM representing an option position.\"},\"returns\":{\"tokenId\":\"the tokenId with the leg added\"}},\"addOptionRatio(uint256,uint256,uint256)\":{\"details\":\"The final mod: \\\"% 128\\\" = takes the rightmost (2 ** 7 = 128) 7 bits of the pattern.\",\"params\":{\"legIndex\":\"the leg index of the position (in {0,1,2,3}).\",\"self\":\"the option position Id.\"},\"returns\":{\"_0\":\"the tokenId with optionRatio added to the incoming leg index\"}},\"addRiskPartner(uint256,uint256,uint256)\":{\"params\":{\"legIndex\":\"the leg index of this position (in {0,1,2,3}).\",\"self\":\"the tokenId in the SFPM representing an option position.\"},\"returns\":{\"_0\":\"the tokenId with riskPartner added to its relevant leg.\"}},\"addStrike(uint256,int24,uint256)\":{\"params\":{\"legIndex\":\"the leg index of this position (in {0,1,2,3}).\",\"self\":\"the tokenId in the SFPM representing an option position.\"},\"returns\":{\"_0\":\"the tokenId with strike price tick added to its relevant leg\"}},\"addTokenType(uint256,uint256,uint256)\":{\"params\":{\"legIndex\":\"the leg index of this position (in {0,1,2,3}).\",\"self\":\"the tokenId in the SFPM representing an option position.\"},\"returns\":{\"_0\":\"the tokenId with tokenType added to its relevant leg.\"}},\"addUniv3pool(uint256,uint64)\":{\"params\":{\"self\":\"the option position Id.\"},\"returns\":{\"_0\":\"the tokenId with the Uniswap V3 pool added to it.\"}},\"addWidth(uint256,int24,uint256)\":{\"params\":{\"legIndex\":\"the leg index of this position (in {0,1,2,3}).\",\"self\":\"the tokenId in the SFPM representing an option position.\"},\"returns\":{\"_0\":\"the tokenId with width added to its relevant leg\"}},\"asTicks(uint256,uint256,int24)\":{\"details\":\"NOTE does not extract liquidity which is the third piece of information in a LiquidityChunk.\",\"params\":{\"legIndex\":\"the leg index of the position (in {0,1,2,3}).\",\"self\":\"the option position id.\",\"tickSpacing\":\"the tick spacing of the underlying Univ3 pool.\"},\"returns\":{\"legLowerTick\":\"the lower tick of the leg/liquidity chunk.\",\"legUpperTick\":\"the upper tick of the leg/liquidity chunk.\"}},\"asset(uint256,uint256)\":{\"details\":\"which token is the asset - can be token0 (return 0) or token1 (return 1)occupies the leftmost bit of the optionRatio 4 bits slot.The final mod: \\\"% 2\\\" = takes the leftmost bit of the pattern.\",\"params\":{\"legIndex\":\"the leg index of this position (in {0,1,2,3}).\",\"self\":\"the option position Id.\"},\"returns\":{\"_0\":\"0 if asset is token0, 1 if asset is token1\"}},\"clearLeg(uint256,uint256)\":{\"details\":\"set bits of the leg to zero. Also sets the optionRatio and asset to zero of that leg.NOTE it's important that the caller fills in the leg details after.- optionRatio is zeroed- asset is zeroed- width is zeroed- strike is zeroed- tokenType is zeroed- isLong is zeroed- riskPartner is zeroed\",\"params\":{\"i\":\"the leg index to reset, in {0,1,2,3}\",\"self\":\"the tokenId to reset the leg of\"},\"returns\":{\"_0\":\"`self` with the `i`th leg zeroed including optionRatio and asset.\"}},\"countLegs(uint256)\":{\"details\":\"ASSUMPTION: There is at least 1 leg in this option position.ASSUMPTION: For any leg, the option ratio is always > 0 (the leg always has a number of contracts associated with it).\",\"params\":{\"self\":\"the option position Id (tokenId).\"},\"returns\":{\"_0\":\"the number of legs in the option position.\"}},\"countLongs(uint256)\":{\"params\":{\"self\":\"the tokenId in the SFPM representing an option position.\"},\"returns\":{\"_0\":\"the number of long positions (in the range {0,...,4}).\"}},\"flipToBurnToken(uint256)\":{\"details\":\"uses XOR on existing isLong bits.useful during burning an option position. So we need to take an existing tokenId but now burn it. The way to do this is to simply flip it to a short instead.\",\"params\":{\"self\":\"the tokenId in the SFPM representing an option position.\"}},\"isLong(uint256,uint256)\":{\"params\":{\"legIndex\":\"the leg index of this position (in {0,1,2,3}).\",\"self\":\"the option position Id.\"},\"returns\":{\"_0\":\"1 if long; 0 if not long.\"}},\"optionRatio(uint256,uint256)\":{\"details\":\"The final mod: \\\"% 2**7\\\" = takes the rightmost (2 ** 7 = 128) 7 bits of the pattern.\",\"params\":{\"legIndex\":\"the leg index of this position (in {0,1,2,3}).\",\"self\":\"the option position Id.\"}},\"riskPartner(uint256,uint256)\":{\"params\":{\"legIndex\":\"the leg index of this position (in {0,1,2,3}).\",\"self\":\"the tokenId in the SFPM representing an option position.\"},\"returns\":{\"_0\":\"the leg index of `legIndex`'s risk partner.\"}},\"strike(uint256,uint256)\":{\"params\":{\"legIndex\":\"the leg index of this position (in {0,1,2,3}).\",\"self\":\"the tokenId in the SFPM representing an option position.\"},\"returns\":{\"_0\":\"the strike price (the underlying price of the leg).\"}},\"tokenType(uint256,uint256)\":{\"params\":{\"legIndex\":\"the leg index of this position (in {0,1,2,3}).\",\"self\":\"the tokenId in the SFPM representing an option position.\"},\"returns\":{\"_0\":\"1 if the token moved is token1 or 0 if the token moved is token0\"}},\"univ3pool(uint256)\":{\"params\":{\"self\":\"the option position Id.\"},\"returns\":{\"_0\":\"the poolId (Panoptic's uni v3 pool fingerprint) of the Uniswap v3 pool\"}},\"validate(uint256)\":{\"details\":\"used to validate a position tokenId and its legs.\",\"params\":{\"self\":\"the option position id.\"},\"returns\":{\"univ3PoolAddressId\":\"the first 64 bits of the underlying Uniswap V3 address.\"}},\"width(uint256,uint256)\":{\"details\":\"return as int24 to be compatible with the strike tick format (they naturally go together)\",\"params\":{\"legIndex\":\"the leg index of this position (in {0,1,2,3}).\",\"self\":\"the tokenId in the SFPM representing an option position.\"},\"returns\":{\"_0\":\"the width of the position.\"}}},\"title\":\"TokenIdHarness: A harness to expose the TokenId library for code coverage analysis.\",\"version\":1},\"userdoc\":{\"errors\":{\"InvalidTokenIdParameter(uint256)\":[{\"notice\":\"Invalid TokenId parameter detected\"}],\"TicksNotInitializable()\":[{\"notice\":\"The tick range given by the strike price and width is invalid because the upper and lower ticks are not multiples of `tickSpacing`\"}]},\"kind\":\"user\",\"methods\":{\"addAsset(uint256,uint256,uint256)\":{\"notice\":\"Add the asset basis for this position.\"},\"addIsLong(uint256,uint256,uint256)\":{\"notice\":\"Add \\\"isLong\\\" parameter indicating whether a leg is long (isLong=1) or short (isLong=0)returns 1 if the nth leg (leg index n-1) is a long position.\"},\"addLeg(uint256,uint256,uint256,uint256,uint256,uint256,uint256,int24,int24)\":{\"notice\":\"Add a leg to the tokenId.\"},\"addOptionRatio(uint256,uint256,uint256)\":{\"notice\":\"Add the number of contracts to leg index `legIndex`.\"},\"addRiskPartner(uint256,uint256,uint256)\":{\"notice\":\"Add the associated risk partner of the leg index (generally another leg in the overall position).\"},\"addStrike(uint256,int24,uint256)\":{\"notice\":\"Add the strike price tick of the nth leg (index `legIndex`).\"},\"addTokenType(uint256,uint256,uint256)\":{\"notice\":\"Add the type of token moved for a given leg (implies a call or put). Either Token0 or Token1.\"},\"addUniv3pool(uint256,uint64)\":{\"notice\":\"Add the Uniswap v3 Pool pointed to by this option position.\"},\"addWidth(uint256,int24,uint256)\":{\"notice\":\"Add the width of the nth leg (index `legIndex`). This is half the tick-range covered by the leg (tickUpper - tickLower)/2.\"},\"asTicks(uint256,uint256,int24)\":{\"notice\":\"Get the option position's nth leg's (index `legIndex`) tick ranges (lower, upper).\"},\"asset(uint256,uint256)\":{\"notice\":\"Get the asset basis for this position.\"},\"clearLeg(uint256,uint256)\":{\"notice\":\"Clear a leg in an option position with index `i`.\"},\"countLegs(uint256)\":{\"notice\":\"Return the number of active legs in the option position.\"},\"countLongs(uint256)\":{\"notice\":\"Get the number of longs in this option position.count the number of legs (out of a maximum of 4) that are long positions.\"},\"flipToBurnToken(uint256)\":{\"notice\":\"Flip all the `isLong` positions in the legs in the `tokenId` option position.\"},\"isLong(uint256,uint256)\":{\"notice\":\"Return 1 if the nth leg (leg index `legIndex`) is a long position.\"},\"optionRatio(uint256,uint256)\":{\"notice\":\"Get the number of contracts per leg.\"},\"riskPartner(uint256,uint256)\":{\"notice\":\"Get the associated risk partner of the leg index (generally another leg index in the position).that returning the riskPartner for any leg is 0 by default, this does not necessarily imply that token 1 (index 0)is the risk partner of that leg. We are assuming here that the position has been validated before this and thatthe risk partner of any leg always makes sense in this way. A leg btw. does not need to have a risk partner.the point here is that this function is very low level and must be used with utmost care because it comes downto the caller to interpret whether 00 means \\\"no risk partner\\\" or \\\"risk partner leg index 0\\\".But in general we can return 00, 01, 10, and 11 meaning the partner is leg 0, 1, 2, or 3.\"},\"strike(uint256,uint256)\":{\"notice\":\"Get the strike price tick of the nth leg (with index `legIndex`).\"},\"tokenType(uint256,uint256)\":{\"notice\":\"Get the type of token moved for a given leg (implies a call or put). Either Token0 or Token1.\"},\"univ3pool(uint256)\":{\"notice\":\"The Uniswap v3 Pool pointed to by this option position.\"},\"validate(uint256)\":{\"notice\":\"Validate an option position and all its active legs; return the underlying AMM address.\"},\"width(uint256,uint256)\":{\"notice\":\"Get the width of the nth leg (index `legIndex`). This is half the tick-range covered by the leg (tickUpper - tickLower)/2.\"}},\"notice\":\"Replicates the interface of the TokenId library, passing through any function calls\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"test/foundry/types/harnesses/TokenIdHarness.sol\":\"TokenIdHarness\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":18000},\"remappings\":[\":@contracts/=contracts/\",\":@libraries/=contracts/libraries/\",\":@multicall/=contracts/multicall/\",\":@openzeppelin/=lib/openzeppelin-contracts/\",\":@periphery/=contracts/periphery/\",\":@scripts/=scripts/\",\":@testUtils/=test/foundry/testUtils/\",\":@tokens/=contracts/tokens/\",\":@types/=contracts/types/\",\":@uniswap/=lib/\",\":ds-test/=lib/forge-std/lib/ds-test/src/\",\":forge-std/=lib/forge-std/src/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":solmate/=lib/solmate/src/\",\":univ3-core/=lib/v3-core/contracts/\",\":univ3-periphery/=lib/v3-periphery/contracts/\",\":v3-core/=lib/v3-core/contracts/\",\":v3-periphery/=lib/v3-periphery/contracts/\"]},\"sources\":{\"contracts/libraries/Constants.sol\":{\"keccak256\":\"0x23144978ba9ba9656514741ce4c9489720d1c4bcacafa0402e160805e547b71a\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://944d711e4be30582f55063f2b6f41902c68d52e7f32a075b7f499405dc1c7f0b\",\"dweb:/ipfs/QmWjYNrcQ8bKazZZktHV4iwCpRyCTfVUoMLSZzYEBRAyYj\"]},\"contracts/libraries/Errors.sol\":{\"keccak256\":\"0xc726df9eeff396c5f90d831ce0f22d13c1373efdc729418d58ab534b403d86fc\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://a8e98110a218b49dac5c8e0ab99892be1d3b4baf7490293314ff09e3eac14da7\",\"dweb:/ipfs/QmbSgGUiWfuN4mgghXpuPnVjYFL3pQkncv6FXoHWb8Wocv\"]},\"contracts/types/TokenId.sol\":{\"keccak256\":\"0x0d258e512399e1e510a4782faac8d822eefb74bf42968733f66180bee57d20e0\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://0348a30fedbea579320af2e7b3518296e640097e97763a10af3185302056bd45\",\"dweb:/ipfs/QmXWsaSFbhg8d2pdo7bDwvsD1gVWqPUw4ZK94qXEFEevQw\"]},\"test/foundry/types/harnesses/TokenIdHarness.sol\":{\"keccak256\":\"0xc9e6b57e008e9802c7c17b19451efb9ec74ee77600a98db64dd8d8bc220d395c\",\"license\":\"UNLICENSED\",\"urls\":[\"bzz-raw://4e343651ebdc826a9cb24e9f49675fc009f485847e88956a73f4cfe8182775b9\",\"dweb:/ipfs/QmRfTiDTMPSjU4ccuLKLdXLoJfoZ61k7LoDtQ2LzVw9n5E\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.18+commit.87f61d96"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"uint256","name":"parameterType","type":"uint256"}],"type":"error","name":"InvalidTokenIdParameter"},{"inputs":[],"type":"error","name":"TicksNotInitializable"},{"inputs":[],"stateMutability":"view","type":"function","name":"BITMASK_INT24","outputs":[{"internalType":"int256","name":"","type":"int256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"CLEAR_POOLID_MASK","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"LONG_MASK","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"MAX_LEG_WIDTH","outputs":[{"internalType":"int24","name":"","type":"int24"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"OPTION_RATIO_MASK","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"RISK_PARTNER_MASK","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"},{"internalType":"uint256","name":"_asset","type":"uint256"},{"internalType":"uint256","name":"legIndex","type":"uint256"}],"stateMutability":"view","type":"function","name":"addAsset","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"},{"internalType":"uint256","name":"_isLong","type":"uint256"},{"internalType":"uint256","name":"legIndex","type":"uint256"}],"stateMutability":"view","type":"function","name":"addIsLong","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"},{"internalType":"uint256","name":"legIndex","type":"uint256"},{"internalType":"uint256","name":"_optionRatio","type":"uint256"},{"internalType":"uint256","name":"_asset","type":"uint256"},{"internalType":"uint256","name":"_isLong","type":"uint256"},{"internalType":"uint256","name":"_tokenType","type":"uint256"},{"internalType":"uint256","name":"_riskPartner","type":"uint256"},{"internalType":"int24","name":"_strike","type":"int24"},{"internalType":"int24","name":"_width","type":"int24"}],"stateMutability":"view","type":"function","name":"addLeg","outputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"},{"internalType":"uint256","name":"_optionRatio","type":"uint256"},{"internalType":"uint256","name":"legIndex","type":"uint256"}],"stateMutability":"view","type":"function","name":"addOptionRatio","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"},{"internalType":"uint256","name":"_riskPartner","type":"uint256"},{"internalType":"uint256","name":"legIndex","type":"uint256"}],"stateMutability":"view","type":"function","name":"addRiskPartner","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"},{"internalType":"int24","name":"_strike","type":"int24"},{"internalType":"uint256","name":"legIndex","type":"uint256"}],"stateMutability":"view","type":"function","name":"addStrike","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"},{"internalType":"uint256","name":"_tokenType","type":"uint256"},{"internalType":"uint256","name":"legIndex","type":"uint256"}],"stateMutability":"view","type":"function","name":"addTokenType","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"},{"internalType":"uint64","name":"_poolId","type":"uint64"}],"stateMutability":"view","type":"function","name":"addUniv3pool","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"},{"internalType":"int24","name":"_width","type":"int24"},{"internalType":"uint256","name":"legIndex","type":"uint256"}],"stateMutability":"view","type":"function","name":"addWidth","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"},{"internalType":"uint256","name":"legIndex","type":"uint256"},{"internalType":"int24","name":"tickSpacing","type":"int24"}],"stateMutability":"view","type":"function","name":"asTicks","outputs":[{"internalType":"int24","name":"legLowerTick","type":"int24"},{"internalType":"int24","name":"legUpperTick","type":"int24"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"},{"internalType":"uint256","name":"legIndex","type":"uint256"}],"stateMutability":"view","type":"function","name":"asset","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"},{"internalType":"uint256","name":"i","type":"uint256"}],"stateMutability":"view","type":"function","name":"clearLeg","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"}],"stateMutability":"view","type":"function","name":"countLegs","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"}],"stateMutability":"view","type":"function","name":"countLongs","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"}],"stateMutability":"view","type":"function","name":"flipToBurnToken","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"},{"internalType":"uint256","name":"legIndex","type":"uint256"}],"stateMutability":"view","type":"function","name":"isLong","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"},{"internalType":"uint256","name":"legIndex","type":"uint256"}],"stateMutability":"view","type":"function","name":"optionRatio","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"},{"internalType":"uint256","name":"legIndex","type":"uint256"}],"stateMutability":"view","type":"function","name":"riskPartner","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"},{"internalType":"uint256","name":"legIndex","type":"uint256"}],"stateMutability":"view","type":"function","name":"strike","outputs":[{"internalType":"int24","name":"","type":"int24"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"},{"internalType":"uint256","name":"legIndex","type":"uint256"}],"stateMutability":"view","type":"function","name":"tokenType","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"}],"stateMutability":"view","type":"function","name":"univ3pool","outputs":[{"internalType":"uint64","name":"","type":"uint64"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"}],"stateMutability":"view","type":"function","name":"validate","outputs":[{"internalType":"uint64","name":"univ3PoolAddressId","type":"uint64"}]},{"inputs":[{"internalType":"uint256","name":"self","type":"uint256"},{"internalType":"uint256","name":"legIndex","type":"uint256"}],"stateMutability":"view","type":"function","name":"width","outputs":[{"internalType":"int24","name":"","type":"int24"}]}],"devdoc":{"kind":"dev","methods":{"addAsset(uint256,uint256,uint256)":{"details":"occupies the leftmost bit of the optionRatio 4 bits slot.The final mod: \"% 2\" = takes the rightmost bit of the pattern.","params":{"legIndex":"the leg index of this position (in {0,1,2,3}).","self":"the option position Id."},"returns":{"_0":"the tokenId with numerarire added to the incoming leg index"}},"addIsLong(uint256,uint256,uint256)":{"params":{"_isLong":"whether the leg is long","legIndex":"the leg index of this position (in {0,1,2,3}).","self":"the option position Id."},"returns":{"_0":"the tokenId with isLong added to its relevant leg"}},"addLeg(uint256,uint256,uint256,uint256,uint256,uint256,uint256,int24,int24)":{"params":{"_asset":"the asset of the leg.","_isLong":"whether the leg is long.","_optionRatio":"the relative size of the leg.","_riskPartner":"the associated risk partner of the leg.","_strike":"the strike price tick of the leg.","_tokenType":"the type of token moved for the leg.","_width":"the width of the leg.","legIndex":"the leg index of this position (in {0,1,2,3}).","self":"the tokenId in the SFPM representing an option position."},"returns":{"tokenId":"the tokenId with the leg added"}},"addOptionRatio(uint256,uint256,uint256)":{"details":"The final mod: \"% 128\" = takes the rightmost (2 ** 7 = 128) 7 bits of the pattern.","params":{"legIndex":"the leg index of the position (in {0,1,2,3}).","self":"the option position Id."},"returns":{"_0":"the tokenId with optionRatio added to the incoming leg index"}},"addRiskPartner(uint256,uint256,uint256)":{"params":{"legIndex":"the leg index of this position (in {0,1,2,3}).","self":"the tokenId in the SFPM representing an option position."},"returns":{"_0":"the tokenId with riskPartner added to its relevant leg."}},"addStrike(uint256,int24,uint256)":{"params":{"legIndex":"the leg index of this position (in {0,1,2,3}).","self":"the tokenId in the SFPM representing an option position."},"returns":{"_0":"the tokenId with strike price tick added to its relevant leg"}},"addTokenType(uint256,uint256,uint256)":{"params":{"legIndex":"the leg index of this position (in {0,1,2,3}).","self":"the tokenId in the SFPM representing an option position."},"returns":{"_0":"the tokenId with tokenType added to its relevant leg."}},"addUniv3pool(uint256,uint64)":{"params":{"self":"the option position Id."},"returns":{"_0":"the tokenId with the Uniswap V3 pool added to it."}},"addWidth(uint256,int24,uint256)":{"params":{"legIndex":"the leg index of this position (in {0,1,2,3}).","self":"the tokenId in the SFPM representing an option position."},"returns":{"_0":"the tokenId with width added to its relevant leg"}},"asTicks(uint256,uint256,int24)":{"details":"NOTE does not extract liquidity which is the third piece of information in a LiquidityChunk.","params":{"legIndex":"the leg index of the position (in {0,1,2,3}).","self":"the option position id.","tickSpacing":"the tick spacing of the underlying Univ3 pool."},"returns":{"legLowerTick":"the lower tick of the leg/liquidity chunk.","legUpperTick":"the upper tick of the leg/liquidity chunk."}},"asset(uint256,uint256)":{"details":"which token is the asset - can be token0 (return 0) or token1 (return 1)occupies the leftmost bit of the optionRatio 4 bits slot.The final mod: \"% 2\" = takes the leftmost bit of the pattern.","params":{"legIndex":"the leg index of this position (in {0,1,2,3}).","self":"the option position Id."},"returns":{"_0":"0 if asset is token0, 1 if asset is token1"}},"clearLeg(uint256,uint256)":{"details":"set bits of the leg to zero. Also sets the optionRatio and asset to zero of that leg.NOTE it's important that the caller fills in the leg details after.- optionRatio is zeroed- asset is zeroed- width is zeroed- strike is zeroed- tokenType is zeroed- isLong is zeroed- riskPartner is zeroed","params":{"i":"the leg index to reset, in {0,1,2,3}","self":"the tokenId to reset the leg of"},"returns":{"_0":"`self` with the `i`th leg zeroed including optionRatio and asset."}},"countLegs(uint256)":{"details":"ASSUMPTION: There is at least 1 leg in this option position.ASSUMPTION: For any leg, the option ratio is always > 0 (the leg always has a number of contracts associated with it).","params":{"self":"the option position Id (tokenId)."},"returns":{"_0":"the number of legs in the option position."}},"countLongs(uint256)":{"params":{"self":"the tokenId in the SFPM representing an option position."},"returns":{"_0":"the number of long positions (in the range {0,...,4})."}},"flipToBurnToken(uint256)":{"details":"uses XOR on existing isLong bits.useful during burning an option position. So we need to take an existing tokenId but now burn it. The way to do this is to simply flip it to a short instead.","params":{"self":"the tokenId in the SFPM representing an option position."}},"isLong(uint256,uint256)":{"params":{"legIndex":"the leg index of this position (in {0,1,2,3}).","self":"the option position Id."},"returns":{"_0":"1 if long; 0 if not long."}},"optionRatio(uint256,uint256)":{"details":"The final mod: \"% 2**7\" = takes the rightmost (2 ** 7 = 128) 7 bits of the pattern.","params":{"legIndex":"the leg index of this position (in {0,1,2,3}).","self":"the option position Id."}},"riskPartner(uint256,uint256)":{"params":{"legIndex":"the leg index of this position (in {0,1,2,3}).","self":"the tokenId in the SFPM representing an option position."},"returns":{"_0":"the leg index of `legIndex`'s risk partner."}},"strike(uint256,uint256)":{"params":{"legIndex":"the leg index of this position (in {0,1,2,3}).","self":"the tokenId in the SFPM representing an option position."},"returns":{"_0":"the strike price (the underlying price of the leg)."}},"tokenType(uint256,uint256)":{"params":{"legIndex":"the leg index of this position (in {0,1,2,3}).","self":"the tokenId in the SFPM representing an option position."},"returns":{"_0":"1 if the token moved is token1 or 0 if the token moved is token0"}},"univ3pool(uint256)":{"params":{"self":"the option position Id."},"returns":{"_0":"the poolId (Panoptic's uni v3 pool fingerprint) of the Uniswap v3 pool"}},"validate(uint256)":{"details":"used to validate a position tokenId and its legs.","params":{"self":"the option position id."},"returns":{"univ3PoolAddressId":"the first 64 bits of the underlying Uniswap V3 address."}},"width(uint256,uint256)":{"details":"return as int24 to be compatible with the strike tick format (they naturally go together)","params":{"legIndex":"the leg index of this position (in {0,1,2,3}).","self":"the tokenId in the SFPM representing an option position."},"returns":{"_0":"the width of the position."}}},"version":1},"userdoc":{"kind":"user","methods":{"addAsset(uint256,uint256,uint256)":{"notice":"Add the asset basis for this position."},"addIsLong(uint256,uint256,uint256)":{"notice":"Add \"isLong\" parameter indicating whether a leg is long (isLong=1) or short (isLong=0)returns 1 if the nth leg (leg index n-1) is a long position."},"addLeg(uint256,uint256,uint256,uint256,uint256,uint256,uint256,int24,int24)":{"notice":"Add a leg to the tokenId."},"addOptionRatio(uint256,uint256,uint256)":{"notice":"Add the number of contracts to leg index `legIndex`."},"addRiskPartner(uint256,uint256,uint256)":{"notice":"Add the associated risk partner of the leg index (generally another leg in the overall position)."},"addStrike(uint256,int24,uint256)":{"notice":"Add the strike price tick of the nth leg (index `legIndex`)."},"addTokenType(uint256,uint256,uint256)":{"notice":"Add the type of token moved for a given leg (implies a call or put). Either Token0 or Token1."},"addUniv3pool(uint256,uint64)":{"notice":"Add the Uniswap v3 Pool pointed to by this option position."},"addWidth(uint256,int24,uint256)":{"notice":"Add the width of the nth leg (index `legIndex`). This is half the tick-range covered by the leg (tickUpper - tickLower)/2."},"asTicks(uint256,uint256,int24)":{"notice":"Get the option position's nth leg's (index `legIndex`) tick ranges (lower, upper)."},"asset(uint256,uint256)":{"notice":"Get the asset basis for this position."},"clearLeg(uint256,uint256)":{"notice":"Clear a leg in an option position with index `i`."},"countLegs(uint256)":{"notice":"Return the number of active legs in the option position."},"countLongs(uint256)":{"notice":"Get the number of longs in this option position.count the number of legs (out of a maximum of 4) that are long positions."},"flipToBurnToken(uint256)":{"notice":"Flip all the `isLong` positions in the legs in the `tokenId` option position."},"isLong(uint256,uint256)":{"notice":"Return 1 if the nth leg (leg index `legIndex`) is a long position."},"optionRatio(uint256,uint256)":{"notice":"Get the number of contracts per leg."},"riskPartner(uint256,uint256)":{"notice":"Get the associated risk partner of the leg index (generally another leg index in the position).that returning the riskPartner for any leg is 0 by default, this does not necessarily imply that token 1 (index 0)is the risk partner of that leg. We are assuming here that the position has been validated before this and thatthe risk partner of any leg always makes sense in this way. A leg btw. does not need to have a risk partner.the point here is that this function is very low level and must be used with utmost care because it comes downto the caller to interpret whether 00 means \"no risk partner\" or \"risk partner leg index 0\".But in general we can return 00, 01, 10, and 11 meaning the partner is leg 0, 1, 2, or 3."},"strike(uint256,uint256)":{"notice":"Get the strike price tick of the nth leg (with index `legIndex`)."},"tokenType(uint256,uint256)":{"notice":"Get the type of token moved for a given leg (implies a call or put). Either Token0 or Token1."},"univ3pool(uint256)":{"notice":"The Uniswap v3 Pool pointed to by this option position."},"validate(uint256)":{"notice":"Validate an option position and all its active legs; return the underlying AMM address."},"width(uint256,uint256)":{"notice":"Get the width of the nth leg (index `legIndex`). This is half the tick-range covered by the leg (tickUpper - tickLower)/2."}},"version":1}},"settings":{"remappings":["@contracts/=contracts/","@libraries/=contracts/libraries/","@multicall/=contracts/multicall/","@openzeppelin/=lib/openzeppelin-contracts/","@periphery/=contracts/periphery/","@scripts/=scripts/","@testUtils/=test/foundry/testUtils/","@tokens/=contracts/tokens/","@types/=contracts/types/","@uniswap/=lib/","ds-test/=lib/forge-std/lib/ds-test/src/","forge-std/=lib/forge-std/src/","openzeppelin-contracts/=lib/openzeppelin-contracts/","solmate/=lib/solmate/src/","univ3-core/=lib/v3-core/contracts/","univ3-periphery/=lib/v3-periphery/contracts/","v3-core/=lib/v3-core/contracts/","v3-periphery/=lib/v3-periphery/contracts/"],"optimizer":{"enabled":true,"runs":18000},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"test/foundry/types/harnesses/TokenIdHarness.sol":"TokenIdHarness"},"libraries":{}},"sources":{"contracts/libraries/Constants.sol":{"keccak256":"0x23144978ba9ba9656514741ce4c9489720d1c4bcacafa0402e160805e547b71a","urls":["bzz-raw://944d711e4be30582f55063f2b6f41902c68d52e7f32a075b7f499405dc1c7f0b","dweb:/ipfs/QmWjYNrcQ8bKazZZktHV4iwCpRyCTfVUoMLSZzYEBRAyYj"],"license":"GPL-2.0-or-later"},"contracts/libraries/Errors.sol":{"keccak256":"0xc726df9eeff396c5f90d831ce0f22d13c1373efdc729418d58ab534b403d86fc","urls":["bzz-raw://a8e98110a218b49dac5c8e0ab99892be1d3b4baf7490293314ff09e3eac14da7","dweb:/ipfs/QmbSgGUiWfuN4mgghXpuPnVjYFL3pQkncv6FXoHWb8Wocv"],"license":"GPL-2.0-or-later"},"contracts/types/TokenId.sol":{"keccak256":"0x0d258e512399e1e510a4782faac8d822eefb74bf42968733f66180bee57d20e0","urls":["bzz-raw://0348a30fedbea579320af2e7b3518296e640097e97763a10af3185302056bd45","dweb:/ipfs/QmXWsaSFbhg8d2pdo7bDwvsD1gVWqPUw4ZK94qXEFEevQw"],"license":"GPL-2.0-or-later"},"test/foundry/types/harnesses/TokenIdHarness.sol":{"keccak256":"0xc9e6b57e008e9802c7c17b19451efb9ec74ee77600a98db64dd8d8bc220d395c","urls":["bzz-raw://4e343651ebdc826a9cb24e9f49675fc009f485847e88956a73f4cfe8182775b9","dweb:/ipfs/QmRfTiDTMPSjU4ccuLKLdXLoJfoZ61k7LoDtQ2LzVw9n5E"],"license":"UNLICENSED"}},"version":1},"ast":{"absolutePath":"test/foundry/types/harnesses/TokenIdHarness.sol","id":83719,"exportedSymbols":{"Constants":[2465],"Errors":[2516],"TokenId":[6292],"TokenIdHarness":[83718]},"nodeType":"SourceUnit","src":"39:16618:91","nodes":[{"id":83182,"nodeType":"PragmaDirective","src":"39:23:91","nodes":[],"literals":["solidity","^","0.8",".0"]},{"id":83183,"nodeType":"ImportDirective","src":"64:28:91","nodes":[],"absolutePath":"contracts/types/TokenId.sol","file":"@types/TokenId.sol","nameLocation":"-1:-1:-1","scope":83719,"sourceUnit":6293,"symbolAliases":[],"unitAlias":""},{"id":83718,"nodeType":"ContractDefinition","src":"317:16339:91","nodes":[{"id":83187,"nodeType":"VariableDeclaration","src":"432:105:91","nodes":[],"constant":true,"functionSelector":"d9cf1e77","mutability":"constant","name":"LONG_MASK","nameLocation":"456:9:91","scope":83718,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83185,"name":"uint256","nodeType":"ElementaryTypeName","src":"432:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"30783130305f3030303030303030303130305f3030303030303030303130305f3030303030303030303130305f30303030303030303030303030303030","id":83186,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"476:61:91","typeDescriptions":{"typeIdentifier":"t_rational_105312291668557560842337184396146720457997191364272433102967537664_by_1","typeString":"int_const 1053...(58 digits omitted)...7664"},"value":"0x100_000000000100_000000000100_000000000100_0000000000000000"},"visibility":"public"},{"id":83190,"nodeType":"VariableDeclaration","src":"678:119:91","nodes":[],"constant":true,"functionSelector":"763b1595","mutability":"constant","name":"CLEAR_POOLID_MASK","nameLocation":"702:17:91","scope":83718,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83188,"name":"uint256","nodeType":"ElementaryTypeName","src":"678:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"30784646464646464646464646464646464646464646464646464646464646464646464646464646464646464646464646465f30303030303030303030303030303030","id":83189,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"730:67:91","typeDescriptions":{"typeIdentifier":"t_rational_115792089237316195423570985008687907853269984665640564039439137263839420088320_by_1","typeString":"int_const 1157...(70 digits omitted)...8320"},"value":"0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF_0000000000000000"},"visibility":"public"},{"id":83193,"nodeType":"VariableDeclaration","src":"875:122:91","nodes":[],"constant":true,"functionSelector":"3e6944bb","mutability":"constant","name":"OPTION_RATIO_MASK","nameLocation":"899:17:91","scope":83718,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83191,"name":"uint256","nodeType":"ElementaryTypeName","src":"875:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"30783030303030303030303046455f3030303030303030303046455f3030303030303030303046455f3030303030303030303046455f30303030303030303030303030303030","id":83192,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"927:70:91","typeDescriptions":{"typeIdentifier":"t_rational_104489539389896954898256425143051824204419088306739054719350603776_by_1","typeString":"int_const 1044...(58 digits omitted)...3776"},"value":"0x0000000000FE_0000000000FE_0000000000FE_0000000000FE_0000000000000000"},"visibility":"public"},{"id":83196,"nodeType":"VariableDeclaration","src":"1003:47:91","nodes":[],"constant":true,"functionSelector":"17b9a0cd","mutability":"constant","name":"BITMASK_INT24","nameLocation":"1026:13:91","scope":83718,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":83194,"name":"int256","nodeType":"ElementaryTypeName","src":"1003:6:91","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"value":{"hexValue":"3078464646464646","id":83195,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1042:8:91","typeDescriptions":{"typeIdentifier":"t_rational_16777215_by_1","typeString":"int_const 16777215"},"value":"0xFFFFFF"},"visibility":"public"},{"id":83199,"nodeType":"VariableDeclaration","src":"1186:42:91","nodes":[],"constant":true,"functionSelector":"86ac76a3","mutability":"constant","name":"MAX_LEG_WIDTH","nameLocation":"1208:13:91","scope":83718,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":83197,"name":"int24","nodeType":"ElementaryTypeName","src":"1186:5:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"value":{"hexValue":"34303935","id":83198,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1224:4:91","typeDescriptions":{"typeIdentifier":"t_rational_4095_by_1","typeString":"int_const 4095"},"value":"4095"},"visibility":"public"},{"id":83202,"nodeType":"VariableDeclaration","src":"1502:58:91","nodes":[],"constant":true,"functionSelector":"3f0e76b2","mutability":"constant","name":"RISK_PARTNER_MASK","nameLocation":"1526:17:91","scope":83718,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83200,"name":"uint256","nodeType":"ElementaryTypeName","src":"1502:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"3078464646464646464646334646","id":83201,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"1546:14:91","typeDescriptions":{"typeIdentifier":"t_rational_281474976707583_by_1","typeString":"int_const 281474976707583"},"value":"0xFFFFFFFFF3FF"},"visibility":"public"},{"id":83220,"nodeType":"FunctionDefinition","src":"2009:131:91","nodes":[],"body":{"id":83219,"nodeType":"Block","src":"2071:69:91","nodes":[],"statements":[{"assignments":[83211],"declarations":[{"constant":false,"id":83211,"mutability":"mutable","name":"r","nameLocation":"2088:1:91","nodeType":"VariableDeclaration","scope":83219,"src":"2081:8:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"},"typeName":{"id":83210,"name":"uint64","nodeType":"ElementaryTypeName","src":"2081:6:91","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"visibility":"internal"}],"id":83216,"initialValue":{"arguments":[{"id":83214,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83205,"src":"2110:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83212,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"2092:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83213,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2100:9:91","memberName":"univ3pool","nodeType":"MemberAccess","referencedDeclaration":5232,"src":"2092:17:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint64_$","typeString":"function (uint256) pure returns (uint64)"}},"id":83215,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2092:23:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"VariableDeclarationStatement","src":"2081:34:91"},{"expression":{"id":83217,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83211,"src":"2132:1:91","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"functionReturnParameters":83209,"id":83218,"nodeType":"Return","src":"2125:8:91"}]},"documentation":{"id":83203,"nodeType":"StructuredDocumentation","src":"1793:211:91","text":" @notice The Uniswap v3 Pool pointed to by this option position.\n @param self the option position Id.\n @return the poolId (Panoptic's uni v3 pool fingerprint) of the Uniswap v3 pool"},"functionSelector":"e2106db3","implemented":true,"kind":"function","modifiers":[],"name":"univ3pool","nameLocation":"2018:9:91","parameters":{"id":83206,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83205,"mutability":"mutable","name":"self","nameLocation":"2036:4:91","nodeType":"VariableDeclaration","scope":83220,"src":"2028:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83204,"name":"uint256","nodeType":"ElementaryTypeName","src":"2028:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"2027:14:91"},"returnParameters":{"id":83209,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83208,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83220,"src":"2063:6:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"},"typeName":{"id":83207,"name":"uint64","nodeType":"ElementaryTypeName","src":"2063:6:91","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"visibility":"internal"}],"src":"2062:8:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83241,"nodeType":"FunctionDefinition","src":"2847:153:91","nodes":[],"body":{"id":83240,"nodeType":"Block","src":"2924:76:91","nodes":[],"statements":[{"assignments":[83231],"declarations":[{"constant":false,"id":83231,"mutability":"mutable","name":"r","nameLocation":"2942:1:91","nodeType":"VariableDeclaration","scope":83240,"src":"2934:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83230,"name":"uint256","nodeType":"ElementaryTypeName","src":"2934:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":83237,"initialValue":{"arguments":[{"id":83234,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83223,"src":"2960:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83235,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83225,"src":"2966:8:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83232,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"2946:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83233,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"2954:5:91","memberName":"asset","nodeType":"MemberAccess","referencedDeclaration":5259,"src":"2946:13:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":83236,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2946:29:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"2934:41:91"},{"expression":{"id":83238,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83231,"src":"2992:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":83229,"id":83239,"nodeType":"Return","src":"2985:8:91"}]},"documentation":{"id":83221,"nodeType":"StructuredDocumentation","src":"2377:465:91","text":" @notice Get the asset basis for this position.\n @dev which token is the asset - can be token0 (return 0) or token1 (return 1)\n @param self the option position Id.\n @param legIndex the leg index of this position (in {0,1,2,3}).\n @dev occupies the leftmost bit of the optionRatio 4 bits slot.\n @dev The final mod: \"% 2\" = takes the leftmost bit of the pattern.\n @return 0 if asset is token0, 1 if asset is token1"},"functionSelector":"e9bc245f","implemented":true,"kind":"function","modifiers":[],"name":"asset","nameLocation":"2856:5:91","parameters":{"id":83226,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83223,"mutability":"mutable","name":"self","nameLocation":"2870:4:91","nodeType":"VariableDeclaration","scope":83241,"src":"2862:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83222,"name":"uint256","nodeType":"ElementaryTypeName","src":"2862:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83225,"mutability":"mutable","name":"legIndex","nameLocation":"2884:8:91","nodeType":"VariableDeclaration","scope":83241,"src":"2876:16:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83224,"name":"uint256","nodeType":"ElementaryTypeName","src":"2876:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"2861:32:91"},"returnParameters":{"id":83229,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83228,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83241,"src":"2915:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83227,"name":"uint256","nodeType":"ElementaryTypeName","src":"2915:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"2914:9:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83262,"nodeType":"FunctionDefinition","src":"3283:165:91","nodes":[],"body":{"id":83261,"nodeType":"Block","src":"3366:82:91","nodes":[],"statements":[{"assignments":[83252],"declarations":[{"constant":false,"id":83252,"mutability":"mutable","name":"r","nameLocation":"3384:1:91","nodeType":"VariableDeclaration","scope":83261,"src":"3376:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83251,"name":"uint256","nodeType":"ElementaryTypeName","src":"3376:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":83258,"initialValue":{"arguments":[{"id":83255,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83244,"src":"3408:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83256,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83246,"src":"3414:8:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83253,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"3388:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83254,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3396:11:91","memberName":"optionRatio","nodeType":"MemberAccess","referencedDeclaration":5288,"src":"3388:19:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":83257,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3388:35:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"3376:47:91"},{"expression":{"id":83259,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83252,"src":"3440:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":83250,"id":83260,"nodeType":"Return","src":"3433:8:91"}]},"documentation":{"id":83242,"nodeType":"StructuredDocumentation","src":"3006:272:91","text":" @notice Get the number of contracts per leg.\n @param self the option position Id.\n @param legIndex the leg index of this position (in {0,1,2,3}).\n @dev The final mod: \"% 2**7\" = takes the rightmost (2 ** 7 = 128) 7 bits of the pattern."},"functionSelector":"037ae4af","implemented":true,"kind":"function","modifiers":[],"name":"optionRatio","nameLocation":"3292:11:91","parameters":{"id":83247,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83244,"mutability":"mutable","name":"self","nameLocation":"3312:4:91","nodeType":"VariableDeclaration","scope":83262,"src":"3304:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83243,"name":"uint256","nodeType":"ElementaryTypeName","src":"3304:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83246,"mutability":"mutable","name":"legIndex","nameLocation":"3326:8:91","nodeType":"VariableDeclaration","scope":83262,"src":"3318:16:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83245,"name":"uint256","nodeType":"ElementaryTypeName","src":"3318:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"3303:32:91"},"returnParameters":{"id":83250,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83249,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83262,"src":"3357:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83248,"name":"uint256","nodeType":"ElementaryTypeName","src":"3357:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"3356:9:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83283,"nodeType":"FunctionDefinition","src":"3706:155:91","nodes":[],"body":{"id":83282,"nodeType":"Block","src":"3784:77:91","nodes":[],"statements":[{"assignments":[83273],"declarations":[{"constant":false,"id":83273,"mutability":"mutable","name":"r","nameLocation":"3802:1:91","nodeType":"VariableDeclaration","scope":83282,"src":"3794:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83272,"name":"uint256","nodeType":"ElementaryTypeName","src":"3794:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":83279,"initialValue":{"arguments":[{"id":83276,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83265,"src":"3821:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83277,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83267,"src":"3827:8:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83274,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"3806:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83275,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3814:6:91","memberName":"isLong","nodeType":"MemberAccess","referencedDeclaration":5317,"src":"3806:14:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":83278,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3806:30:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"3794:42:91"},{"expression":{"id":83280,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83273,"src":"3853:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":83271,"id":83281,"nodeType":"Return","src":"3846:8:91"}]},"documentation":{"id":83263,"nodeType":"StructuredDocumentation","src":"3454:247:91","text":" @notice Return 1 if the nth leg (leg index `legIndex`) is a long position.\n @param self the option position Id.\n @param legIndex the leg index of this position (in {0,1,2,3}).\n @return 1 if long; 0 if not long."},"functionSelector":"07e90dbd","implemented":true,"kind":"function","modifiers":[],"name":"isLong","nameLocation":"3715:6:91","parameters":{"id":83268,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83265,"mutability":"mutable","name":"self","nameLocation":"3730:4:91","nodeType":"VariableDeclaration","scope":83283,"src":"3722:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83264,"name":"uint256","nodeType":"ElementaryTypeName","src":"3722:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83267,"mutability":"mutable","name":"legIndex","nameLocation":"3744:8:91","nodeType":"VariableDeclaration","scope":83283,"src":"3736:16:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83266,"name":"uint256","nodeType":"ElementaryTypeName","src":"3736:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"3721:32:91"},"returnParameters":{"id":83271,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83270,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83283,"src":"3775:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83269,"name":"uint256","nodeType":"ElementaryTypeName","src":"3775:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"3774:9:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83304,"nodeType":"FunctionDefinition","src":"4218:161:91","nodes":[],"body":{"id":83303,"nodeType":"Block","src":"4299:80:91","nodes":[],"statements":[{"assignments":[83294],"declarations":[{"constant":false,"id":83294,"mutability":"mutable","name":"r","nameLocation":"4317:1:91","nodeType":"VariableDeclaration","scope":83303,"src":"4309:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83293,"name":"uint256","nodeType":"ElementaryTypeName","src":"4309:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":83300,"initialValue":{"arguments":[{"id":83297,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83286,"src":"4339:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83298,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83288,"src":"4345:8:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83295,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"4321:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83296,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"4329:9:91","memberName":"tokenType","nodeType":"MemberAccess","referencedDeclaration":5346,"src":"4321:17:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":83299,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4321:33:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"4309:45:91"},{"expression":{"id":83301,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83294,"src":"4371:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":83292,"id":83302,"nodeType":"Return","src":"4364:8:91"}]},"documentation":{"id":83284,"nodeType":"StructuredDocumentation","src":"3867:346:91","text":" @notice Get the type of token moved for a given leg (implies a call or put). Either Token0 or Token1.\n @param self the tokenId in the SFPM representing an option position.\n @param legIndex the leg index of this position (in {0,1,2,3}).\n @return 1 if the token moved is token1 or 0 if the token moved is token0"},"functionSelector":"e2919d68","implemented":true,"kind":"function","modifiers":[],"name":"tokenType","nameLocation":"4227:9:91","parameters":{"id":83289,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83286,"mutability":"mutable","name":"self","nameLocation":"4245:4:91","nodeType":"VariableDeclaration","scope":83304,"src":"4237:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83285,"name":"uint256","nodeType":"ElementaryTypeName","src":"4237:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83288,"mutability":"mutable","name":"legIndex","nameLocation":"4259:8:91","nodeType":"VariableDeclaration","scope":83304,"src":"4251:16:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83287,"name":"uint256","nodeType":"ElementaryTypeName","src":"4251:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"4236:32:91"},"returnParameters":{"id":83292,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83291,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83304,"src":"4290:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83290,"name":"uint256","nodeType":"ElementaryTypeName","src":"4290:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"4289:9:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83325,"nodeType":"FunctionDefinition","src":"5437:165:91","nodes":[],"body":{"id":83324,"nodeType":"Block","src":"5520:82:91","nodes":[],"statements":[{"assignments":[83315],"declarations":[{"constant":false,"id":83315,"mutability":"mutable","name":"r","nameLocation":"5538:1:91","nodeType":"VariableDeclaration","scope":83324,"src":"5530:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83314,"name":"uint256","nodeType":"ElementaryTypeName","src":"5530:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":83321,"initialValue":{"arguments":[{"id":83318,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83307,"src":"5562:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83319,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83309,"src":"5568:8:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83316,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"5542:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83317,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5550:11:91","memberName":"riskPartner","nodeType":"MemberAccess","referencedDeclaration":5375,"src":"5542:19:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":83320,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5542:35:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"5530:47:91"},{"expression":{"id":83322,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83315,"src":"5594:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":83313,"id":83323,"nodeType":"Return","src":"5587:8:91"}]},"documentation":{"id":83305,"nodeType":"StructuredDocumentation","src":"4385:1047:91","text":" @notice Get the associated risk partner of the leg index (generally another leg index in the position).\n @notice that returning the riskPartner for any leg is 0 by default, this does not necessarily imply that token 1 (index 0)\n @notice is the risk partner of that leg. We are assuming here that the position has been validated before this and that\n @notice the risk partner of any leg always makes sense in this way. A leg btw. does not need to have a risk partner.\n @notice the point here is that this function is very low level and must be used with utmost care because it comes down\n @notice to the caller to interpret whether 00 means \"no risk partner\" or \"risk partner leg index 0\".\n @notice But in general we can return 00, 01, 10, and 11 meaning the partner is leg 0, 1, 2, or 3.\n @param self the tokenId in the SFPM representing an option position.\n @param legIndex the leg index of this position (in {0,1,2,3}).\n @return the leg index of `legIndex`'s risk partner."},"functionSelector":"73c2f1c0","implemented":true,"kind":"function","modifiers":[],"name":"riskPartner","nameLocation":"5446:11:91","parameters":{"id":83310,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83307,"mutability":"mutable","name":"self","nameLocation":"5466:4:91","nodeType":"VariableDeclaration","scope":83325,"src":"5458:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83306,"name":"uint256","nodeType":"ElementaryTypeName","src":"5458:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83309,"mutability":"mutable","name":"legIndex","nameLocation":"5480:8:91","nodeType":"VariableDeclaration","scope":83325,"src":"5472:16:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83308,"name":"uint256","nodeType":"ElementaryTypeName","src":"5472:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"5457:32:91"},"returnParameters":{"id":83313,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83312,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83325,"src":"5511:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83311,"name":"uint256","nodeType":"ElementaryTypeName","src":"5511:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"5510:9:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83346,"nodeType":"FunctionDefinition","src":"5918:151:91","nodes":[],"body":{"id":83345,"nodeType":"Block","src":"5994:75:91","nodes":[],"statements":[{"assignments":[83336],"declarations":[{"constant":false,"id":83336,"mutability":"mutable","name":"r","nameLocation":"6010:1:91","nodeType":"VariableDeclaration","scope":83345,"src":"6004:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":83335,"name":"int24","nodeType":"ElementaryTypeName","src":"6004:5:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"}],"id":83342,"initialValue":{"arguments":[{"id":83339,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83328,"src":"6029:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83340,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83330,"src":"6035:8:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83337,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"6014:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83338,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6022:6:91","memberName":"strike","nodeType":"MemberAccess","referencedDeclaration":5404,"src":"6014:14:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_int24_$","typeString":"function (uint256,uint256) pure returns (int24)"}},"id":83341,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6014:30:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"VariableDeclarationStatement","src":"6004:40:91"},{"expression":{"id":83343,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83336,"src":"6061:1:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"functionReturnParameters":83334,"id":83344,"nodeType":"Return","src":"6054:8:91"}]},"documentation":{"id":83326,"nodeType":"StructuredDocumentation","src":"5608:305:91","text":" @notice Get the strike price tick of the nth leg (with index `legIndex`).\n @param self the tokenId in the SFPM representing an option position.\n @param legIndex the leg index of this position (in {0,1,2,3}).\n @return the strike price (the underlying price of the leg)."},"functionSelector":"d85db593","implemented":true,"kind":"function","modifiers":[],"name":"strike","nameLocation":"5927:6:91","parameters":{"id":83331,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83328,"mutability":"mutable","name":"self","nameLocation":"5942:4:91","nodeType":"VariableDeclaration","scope":83346,"src":"5934:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83327,"name":"uint256","nodeType":"ElementaryTypeName","src":"5934:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83330,"mutability":"mutable","name":"legIndex","nameLocation":"5956:8:91","nodeType":"VariableDeclaration","scope":83346,"src":"5948:16:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83329,"name":"uint256","nodeType":"ElementaryTypeName","src":"5948:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"5933:32:91"},"returnParameters":{"id":83334,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83333,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83346,"src":"5987:5:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":83332,"name":"int24","nodeType":"ElementaryTypeName","src":"5987:5:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"}],"src":"5986:7:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83367,"nodeType":"FunctionDefinition","src":"6519:149:91","nodes":[],"body":{"id":83366,"nodeType":"Block","src":"6594:74:91","nodes":[],"statements":[{"assignments":[83357],"declarations":[{"constant":false,"id":83357,"mutability":"mutable","name":"r","nameLocation":"6610:1:91","nodeType":"VariableDeclaration","scope":83366,"src":"6604:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":83356,"name":"int24","nodeType":"ElementaryTypeName","src":"6604:5:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"}],"id":83363,"initialValue":{"arguments":[{"id":83360,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83349,"src":"6628:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83361,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83351,"src":"6634:8:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83358,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"6614:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83359,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"6622:5:91","memberName":"width","nodeType":"MemberAccess","referencedDeclaration":5436,"src":"6614:13:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_int24_$","typeString":"function (uint256,uint256) pure returns (int24)"}},"id":83362,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6614:29:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"VariableDeclarationStatement","src":"6604:39:91"},{"expression":{"id":83364,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83357,"src":"6660:1:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"functionReturnParameters":83355,"id":83365,"nodeType":"Return","src":"6653:8:91"}]},"documentation":{"id":83347,"nodeType":"StructuredDocumentation","src":"6075:439:91","text":" @notice Get the width of the nth leg (index `legIndex`). This is half the tick-range covered by the leg (tickUpper - tickLower)/2.\n @dev return as int24 to be compatible with the strike tick format (they naturally go together)\n @param self the tokenId in the SFPM representing an option position.\n @param legIndex the leg index of this position (in {0,1,2,3}).\n @return the width of the position."},"functionSelector":"c2a9f1ce","implemented":true,"kind":"function","modifiers":[],"name":"width","nameLocation":"6528:5:91","parameters":{"id":83352,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83349,"mutability":"mutable","name":"self","nameLocation":"6542:4:91","nodeType":"VariableDeclaration","scope":83367,"src":"6534:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83348,"name":"uint256","nodeType":"ElementaryTypeName","src":"6534:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83351,"mutability":"mutable","name":"legIndex","nameLocation":"6556:8:91","nodeType":"VariableDeclaration","scope":83367,"src":"6548:16:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83350,"name":"uint256","nodeType":"ElementaryTypeName","src":"6548:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"6533:32:91"},"returnParameters":{"id":83355,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83354,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83367,"src":"6587:5:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":83353,"name":"int24","nodeType":"ElementaryTypeName","src":"6587:5:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"}],"src":"6586:7:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83388,"nodeType":"FunctionDefinition","src":"7049:164:91","nodes":[],"body":{"id":83387,"nodeType":"Block","src":"7131:82:91","nodes":[],"statements":[{"assignments":[83378],"declarations":[{"constant":false,"id":83378,"mutability":"mutable","name":"r","nameLocation":"7149:1:91","nodeType":"VariableDeclaration","scope":83387,"src":"7141:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83377,"name":"uint256","nodeType":"ElementaryTypeName","src":"7141:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":83384,"initialValue":{"arguments":[{"id":83381,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83370,"src":"7174:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83382,"name":"_poolId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83372,"src":"7180:7:91","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint64","typeString":"uint64"}],"expression":{"id":83379,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"7153:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83380,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"7161:12:91","memberName":"addUniv3pool","nodeType":"MemberAccess","referencedDeclaration":5455,"src":"7153:20:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint64_$returns$_t_uint256_$","typeString":"function (uint256,uint64) pure returns (uint256)"}},"id":83383,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7153:35:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"7141:47:91"},{"expression":{"id":83385,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83378,"src":"7205:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":83376,"id":83386,"nodeType":"Return","src":"7198:8:91"}]},"documentation":{"id":83368,"nodeType":"StructuredDocumentation","src":"6850:194:91","text":" @notice Add the Uniswap v3 Pool pointed to by this option position.\n @param self the option position Id.\n @return the tokenId with the Uniswap V3 pool added to it."},"functionSelector":"81e130f6","implemented":true,"kind":"function","modifiers":[],"name":"addUniv3pool","nameLocation":"7058:12:91","parameters":{"id":83373,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83370,"mutability":"mutable","name":"self","nameLocation":"7079:4:91","nodeType":"VariableDeclaration","scope":83388,"src":"7071:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83369,"name":"uint256","nodeType":"ElementaryTypeName","src":"7071:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83372,"mutability":"mutable","name":"_poolId","nameLocation":"7092:7:91","nodeType":"VariableDeclaration","scope":83388,"src":"7085:14:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"},"typeName":{"id":83371,"name":"uint64","nodeType":"ElementaryTypeName","src":"7085:6:91","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"visibility":"internal"}],"src":"7070:30:91"},"returnParameters":{"id":83376,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83375,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83388,"src":"7122:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83374,"name":"uint256","nodeType":"ElementaryTypeName","src":"7122:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"7121:9:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83412,"nodeType":"FunctionDefinition","src":"7839:213:91","nodes":[],"body":{"id":83411,"nodeType":"Block","src":"7965:87:91","nodes":[],"statements":[{"assignments":[83401],"declarations":[{"constant":false,"id":83401,"mutability":"mutable","name":"r","nameLocation":"7983:1:91","nodeType":"VariableDeclaration","scope":83411,"src":"7975:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83400,"name":"uint256","nodeType":"ElementaryTypeName","src":"7975:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":83408,"initialValue":{"arguments":[{"id":83404,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83391,"src":"8004:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83405,"name":"_asset","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83393,"src":"8010:6:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83406,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83395,"src":"8018:8:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83402,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"7987:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83403,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"7995:8:91","memberName":"addAsset","nodeType":"MemberAccess","referencedDeclaration":5486,"src":"7987:16:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":83407,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7987:40:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"7975:52:91"},{"expression":{"id":83409,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83401,"src":"8044:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":83399,"id":83410,"nodeType":"Return","src":"8037:8:91"}]},"documentation":{"id":83389,"nodeType":"StructuredDocumentation","src":"7436:398:91","text":" @notice Add the asset basis for this position.\n @param self the option position Id.\n @param legIndex the leg index of this position (in {0,1,2,3}).\n @dev occupies the leftmost bit of the optionRatio 4 bits slot.\n @dev The final mod: \"% 2\" = takes the rightmost bit of the pattern.\n @return the tokenId with numerarire added to the incoming leg index"},"functionSelector":"236e4650","implemented":true,"kind":"function","modifiers":[],"name":"addAsset","nameLocation":"7848:8:91","parameters":{"id":83396,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83391,"mutability":"mutable","name":"self","nameLocation":"7874:4:91","nodeType":"VariableDeclaration","scope":83412,"src":"7866:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83390,"name":"uint256","nodeType":"ElementaryTypeName","src":"7866:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83393,"mutability":"mutable","name":"_asset","nameLocation":"7896:6:91","nodeType":"VariableDeclaration","scope":83412,"src":"7888:14:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83392,"name":"uint256","nodeType":"ElementaryTypeName","src":"7888:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83395,"mutability":"mutable","name":"legIndex","nameLocation":"7920:8:91","nodeType":"VariableDeclaration","scope":83412,"src":"7912:16:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83394,"name":"uint256","nodeType":"ElementaryTypeName","src":"7912:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"7856:78:91"},"returnParameters":{"id":83399,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83398,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83412,"src":"7956:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83397,"name":"uint256","nodeType":"ElementaryTypeName","src":"7956:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"7955:9:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83436,"nodeType":"FunctionDefinition","src":"8425:237:91","nodes":[],"body":{"id":83435,"nodeType":"Block","src":"8563:99:91","nodes":[],"statements":[{"assignments":[83425],"declarations":[{"constant":false,"id":83425,"mutability":"mutable","name":"r","nameLocation":"8581:1:91","nodeType":"VariableDeclaration","scope":83435,"src":"8573:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83424,"name":"uint256","nodeType":"ElementaryTypeName","src":"8573:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":83432,"initialValue":{"arguments":[{"id":83428,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83415,"src":"8608:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83429,"name":"_optionRatio","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83417,"src":"8614:12:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83430,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83419,"src":"8628:8:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83426,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"8585:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83427,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"8593:14:91","memberName":"addOptionRatio","nodeType":"MemberAccess","referencedDeclaration":5519,"src":"8585:22:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":83431,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"8585:52:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"8573:64:91"},{"expression":{"id":83433,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83425,"src":"8654:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":83423,"id":83434,"nodeType":"Return","src":"8647:8:91"}]},"documentation":{"id":83413,"nodeType":"StructuredDocumentation","src":"8058:362:91","text":" @notice Add the number of contracts to leg index `legIndex`.\n @param self the option position Id.\n @param legIndex the leg index of the position (in {0,1,2,3}).\n @dev The final mod: \"% 128\" = takes the rightmost (2 ** 7 = 128) 7 bits of the pattern.\n @return the tokenId with optionRatio added to the incoming leg index"},"functionSelector":"79d09ad6","implemented":true,"kind":"function","modifiers":[],"name":"addOptionRatio","nameLocation":"8434:14:91","parameters":{"id":83420,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83415,"mutability":"mutable","name":"self","nameLocation":"8466:4:91","nodeType":"VariableDeclaration","scope":83436,"src":"8458:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83414,"name":"uint256","nodeType":"ElementaryTypeName","src":"8458:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83417,"mutability":"mutable","name":"_optionRatio","nameLocation":"8488:12:91","nodeType":"VariableDeclaration","scope":83436,"src":"8480:20:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83416,"name":"uint256","nodeType":"ElementaryTypeName","src":"8480:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83419,"mutability":"mutable","name":"legIndex","nameLocation":"8518:8:91","nodeType":"VariableDeclaration","scope":83436,"src":"8510:16:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83418,"name":"uint256","nodeType":"ElementaryTypeName","src":"8510:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"8448:84:91"},"returnParameters":{"id":83423,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83422,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83436,"src":"8554:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83421,"name":"uint256","nodeType":"ElementaryTypeName","src":"8554:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"8553:9:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83460,"nodeType":"FunctionDefinition","src":"9086:217:91","nodes":[],"body":{"id":83459,"nodeType":"Block","src":"9214:89:91","nodes":[],"statements":[{"assignments":[83449],"declarations":[{"constant":false,"id":83449,"mutability":"mutable","name":"r","nameLocation":"9232:1:91","nodeType":"VariableDeclaration","scope":83459,"src":"9224:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83448,"name":"uint256","nodeType":"ElementaryTypeName","src":"9224:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":83456,"initialValue":{"arguments":[{"id":83452,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83439,"src":"9254:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83453,"name":"_isLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83441,"src":"9260:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83454,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83443,"src":"9269:8:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83450,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"9236:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83451,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"9244:9:91","memberName":"addIsLong","nodeType":"MemberAccess","referencedDeclaration":5550,"src":"9236:17:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":83455,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9236:42:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"9224:54:91"},{"expression":{"id":83457,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83449,"src":"9295:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":83447,"id":83458,"nodeType":"Return","src":"9288:8:91"}]},"documentation":{"id":83437,"nodeType":"StructuredDocumentation","src":"8668:413:91","text":" @notice Add \"isLong\" parameter indicating whether a leg is long (isLong=1) or short (isLong=0)\n @notice returns 1 if the nth leg (leg index n-1) is a long position.\n @param self the option position Id.\n @param _isLong whether the leg is long\n @param legIndex the leg index of this position (in {0,1,2,3}).\n @return the tokenId with isLong added to its relevant leg"},"functionSelector":"b4259a85","implemented":true,"kind":"function","modifiers":[],"name":"addIsLong","nameLocation":"9095:9:91","parameters":{"id":83444,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83439,"mutability":"mutable","name":"self","nameLocation":"9122:4:91","nodeType":"VariableDeclaration","scope":83460,"src":"9114:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83438,"name":"uint256","nodeType":"ElementaryTypeName","src":"9114:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83441,"mutability":"mutable","name":"_isLong","nameLocation":"9144:7:91","nodeType":"VariableDeclaration","scope":83460,"src":"9136:15:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83440,"name":"uint256","nodeType":"ElementaryTypeName","src":"9136:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83443,"mutability":"mutable","name":"legIndex","nameLocation":"9169:8:91","nodeType":"VariableDeclaration","scope":83460,"src":"9161:16:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83442,"name":"uint256","nodeType":"ElementaryTypeName","src":"9161:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"9104:79:91"},"returnParameters":{"id":83447,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83446,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83460,"src":"9205:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83445,"name":"uint256","nodeType":"ElementaryTypeName","src":"9205:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"9204:9:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83484,"nodeType":"FunctionDefinition","src":"9649:229:91","nodes":[],"body":{"id":83483,"nodeType":"Block","src":"9783:95:91","nodes":[],"statements":[{"assignments":[83473],"declarations":[{"constant":false,"id":83473,"mutability":"mutable","name":"r","nameLocation":"9801:1:91","nodeType":"VariableDeclaration","scope":83483,"src":"9793:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83472,"name":"uint256","nodeType":"ElementaryTypeName","src":"9793:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":83480,"initialValue":{"arguments":[{"id":83476,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83463,"src":"9826:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83477,"name":"_tokenType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83465,"src":"9832:10:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83478,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83467,"src":"9844:8:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83474,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"9805:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83475,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"9813:12:91","memberName":"addTokenType","nodeType":"MemberAccess","referencedDeclaration":5583,"src":"9805:20:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":83479,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9805:48:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"9793:60:91"},{"expression":{"id":83481,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83473,"src":"9870:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":83471,"id":83482,"nodeType":"Return","src":"9863:8:91"}]},"documentation":{"id":83461,"nodeType":"StructuredDocumentation","src":"9309:335:91","text":" @notice Add the type of token moved for a given leg (implies a call or put). Either Token0 or Token1.\n @param self the tokenId in the SFPM representing an option position.\n @param legIndex the leg index of this position (in {0,1,2,3}).\n @return the tokenId with tokenType added to its relevant leg."},"functionSelector":"8f074261","implemented":true,"kind":"function","modifiers":[],"name":"addTokenType","nameLocation":"9658:12:91","parameters":{"id":83468,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83463,"mutability":"mutable","name":"self","nameLocation":"9688:4:91","nodeType":"VariableDeclaration","scope":83484,"src":"9680:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83462,"name":"uint256","nodeType":"ElementaryTypeName","src":"9680:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83465,"mutability":"mutable","name":"_tokenType","nameLocation":"9710:10:91","nodeType":"VariableDeclaration","scope":83484,"src":"9702:18:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83464,"name":"uint256","nodeType":"ElementaryTypeName","src":"9702:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83467,"mutability":"mutable","name":"legIndex","nameLocation":"9738:8:91","nodeType":"VariableDeclaration","scope":83484,"src":"9730:16:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83466,"name":"uint256","nodeType":"ElementaryTypeName","src":"9730:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"9670:82:91"},"returnParameters":{"id":83471,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83470,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83484,"src":"9774:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83469,"name":"uint256","nodeType":"ElementaryTypeName","src":"9774:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"9773:9:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83508,"nodeType":"FunctionDefinition","src":"10230:237:91","nodes":[],"body":{"id":83507,"nodeType":"Block","src":"10368:99:91","nodes":[],"statements":[{"assignments":[83497],"declarations":[{"constant":false,"id":83497,"mutability":"mutable","name":"r","nameLocation":"10386:1:91","nodeType":"VariableDeclaration","scope":83507,"src":"10378:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83496,"name":"uint256","nodeType":"ElementaryTypeName","src":"10378:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":83504,"initialValue":{"arguments":[{"id":83500,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83487,"src":"10413:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83501,"name":"_riskPartner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83489,"src":"10419:12:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83502,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83491,"src":"10433:8:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83498,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"10390:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83499,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"10398:14:91","memberName":"addRiskPartner","nodeType":"MemberAccess","referencedDeclaration":5616,"src":"10390:22:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":83503,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10390:52:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"10378:64:91"},{"expression":{"id":83505,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83497,"src":"10459:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":83495,"id":83506,"nodeType":"Return","src":"10452:8:91"}]},"documentation":{"id":83485,"nodeType":"StructuredDocumentation","src":"9884:341:91","text":" @notice Add the associated risk partner of the leg index (generally another leg in the overall position).\n @param self the tokenId in the SFPM representing an option position.\n @param legIndex the leg index of this position (in {0,1,2,3}).\n @return the tokenId with riskPartner added to its relevant leg."},"functionSelector":"64ddb0b1","implemented":true,"kind":"function","modifiers":[],"name":"addRiskPartner","nameLocation":"10239:14:91","parameters":{"id":83492,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83487,"mutability":"mutable","name":"self","nameLocation":"10271:4:91","nodeType":"VariableDeclaration","scope":83508,"src":"10263:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83486,"name":"uint256","nodeType":"ElementaryTypeName","src":"10263:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83489,"mutability":"mutable","name":"_riskPartner","nameLocation":"10293:12:91","nodeType":"VariableDeclaration","scope":83508,"src":"10285:20:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83488,"name":"uint256","nodeType":"ElementaryTypeName","src":"10285:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83491,"mutability":"mutable","name":"legIndex","nameLocation":"10323:8:91","nodeType":"VariableDeclaration","scope":83508,"src":"10315:16:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83490,"name":"uint256","nodeType":"ElementaryTypeName","src":"10315:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"10253:84:91"},"returnParameters":{"id":83495,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83494,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83508,"src":"10359:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83493,"name":"uint256","nodeType":"ElementaryTypeName","src":"10359:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"10358:9:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83532,"nodeType":"FunctionDefinition","src":"10787:215:91","nodes":[],"body":{"id":83531,"nodeType":"Block","src":"10913:89:91","nodes":[],"statements":[{"assignments":[83521],"declarations":[{"constant":false,"id":83521,"mutability":"mutable","name":"r","nameLocation":"10931:1:91","nodeType":"VariableDeclaration","scope":83531,"src":"10923:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83520,"name":"uint256","nodeType":"ElementaryTypeName","src":"10923:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":83528,"initialValue":{"arguments":[{"id":83524,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83511,"src":"10953:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83525,"name":"_strike","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83513,"src":"10959:7:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},{"id":83526,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83515,"src":"10968:8:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_int24","typeString":"int24"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83522,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"10935:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83523,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"10943:9:91","memberName":"addStrike","nodeType":"MemberAccess","referencedDeclaration":5652,"src":"10935:17:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_int24_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,int24,uint256) pure returns (uint256)"}},"id":83527,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10935:42:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"10923:54:91"},{"expression":{"id":83529,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83521,"src":"10994:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":83519,"id":83530,"nodeType":"Return","src":"10987:8:91"}]},"documentation":{"id":83509,"nodeType":"StructuredDocumentation","src":"10473:309:91","text":" @notice Add the strike price tick of the nth leg (index `legIndex`).\n @param self the tokenId in the SFPM representing an option position.\n @param legIndex the leg index of this position (in {0,1,2,3}).\n @return the tokenId with strike price tick added to its relevant leg"},"functionSelector":"0ac41cf0","implemented":true,"kind":"function","modifiers":[],"name":"addStrike","nameLocation":"10796:9:91","parameters":{"id":83516,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83511,"mutability":"mutable","name":"self","nameLocation":"10823:4:91","nodeType":"VariableDeclaration","scope":83532,"src":"10815:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83510,"name":"uint256","nodeType":"ElementaryTypeName","src":"10815:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83513,"mutability":"mutable","name":"_strike","nameLocation":"10843:7:91","nodeType":"VariableDeclaration","scope":83532,"src":"10837:13:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":83512,"name":"int24","nodeType":"ElementaryTypeName","src":"10837:5:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"},{"constant":false,"id":83515,"mutability":"mutable","name":"legIndex","nameLocation":"10868:8:91","nodeType":"VariableDeclaration","scope":83532,"src":"10860:16:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83514,"name":"uint256","nodeType":"ElementaryTypeName","src":"10860:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"10805:77:91"},"returnParameters":{"id":83519,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83518,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83532,"src":"10904:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83517,"name":"uint256","nodeType":"ElementaryTypeName","src":"10904:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"10903:9:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83556,"nodeType":"FunctionDefinition","src":"11372:261:91","nodes":[],"body":{"id":83555,"nodeType":"Block","src":"11466:167:91","nodes":[],"statements":[{"assignments":[83545],"declarations":[{"constant":false,"id":83545,"mutability":"mutable","name":"r","nameLocation":"11564:1:91","nodeType":"VariableDeclaration","scope":83555,"src":"11556:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83544,"name":"uint256","nodeType":"ElementaryTypeName","src":"11556:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":83552,"initialValue":{"arguments":[{"id":83548,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83535,"src":"11585:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83549,"name":"_width","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83537,"src":"11591:6:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},{"id":83550,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83539,"src":"11599:8:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_int24","typeString":"int24"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83546,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"11568:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83547,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"11576:8:91","memberName":"addWidth","nodeType":"MemberAccess","referencedDeclaration":5688,"src":"11568:16:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_int24_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,int24,uint256) pure returns (uint256)"}},"id":83551,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11568:40:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"11556:52:91"},{"expression":{"id":83553,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83545,"src":"11625:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":83543,"id":83554,"nodeType":"Return","src":"11618:8:91"}]},"documentation":{"id":83533,"nodeType":"StructuredDocumentation","src":"11008:359:91","text":" @notice Add the width of the nth leg (index `legIndex`). This is half the tick-range covered by the leg (tickUpper - tickLower)/2.\n @param self the tokenId in the SFPM representing an option position.\n @param legIndex the leg index of this position (in {0,1,2,3}).\n @return the tokenId with width added to its relevant leg"},"functionSelector":"44eaa2e6","implemented":true,"kind":"function","modifiers":[],"name":"addWidth","nameLocation":"11381:8:91","parameters":{"id":83540,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83535,"mutability":"mutable","name":"self","nameLocation":"11398:4:91","nodeType":"VariableDeclaration","scope":83556,"src":"11390:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83534,"name":"uint256","nodeType":"ElementaryTypeName","src":"11390:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83537,"mutability":"mutable","name":"_width","nameLocation":"11410:6:91","nodeType":"VariableDeclaration","scope":83556,"src":"11404:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":83536,"name":"int24","nodeType":"ElementaryTypeName","src":"11404:5:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"},{"constant":false,"id":83539,"mutability":"mutable","name":"legIndex","nameLocation":"11426:8:91","nodeType":"VariableDeclaration","scope":83556,"src":"11418:16:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83538,"name":"uint256","nodeType":"ElementaryTypeName","src":"11418:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"11389:46:91"},"returnParameters":{"id":83543,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83542,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83556,"src":"11457:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83541,"name":"uint256","nodeType":"ElementaryTypeName","src":"11457:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"11456:9:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83598,"nodeType":"FunctionDefinition","src":"12271:559:91","nodes":[],"body":{"id":83597,"nodeType":"Block","src":"12561:269:91","nodes":[],"statements":[{"assignments":[83581],"declarations":[{"constant":false,"id":83581,"mutability":"mutable","name":"r","nameLocation":"12579:1:91","nodeType":"VariableDeclaration","scope":83597,"src":"12571:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83580,"name":"uint256","nodeType":"ElementaryTypeName","src":"12571:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":83594,"initialValue":{"arguments":[{"id":83584,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83559,"src":"12611:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83585,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83561,"src":"12629:8:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83586,"name":"_optionRatio","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83563,"src":"12651:12:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83587,"name":"_asset","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83565,"src":"12677:6:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83588,"name":"_isLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83567,"src":"12697:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83589,"name":"_tokenType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83569,"src":"12718:10:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83590,"name":"_riskPartner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83571,"src":"12742:12:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83591,"name":"_strike","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83573,"src":"12768:7:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},{"id":83592,"name":"_width","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83575,"src":"12789:6:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_int24","typeString":"int24"},{"typeIdentifier":"t_int24","typeString":"int24"}],"expression":{"id":83582,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"12583:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83583,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"12591:6:91","memberName":"addLeg","nodeType":"MemberAccess","referencedDeclaration":5769,"src":"12583:14:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_uint256_$_t_int24_$_t_int24_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256,uint256,uint256,uint256,uint256,int24,int24) pure returns (uint256)"}},"id":83593,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12583:222:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"12571:234:91"},{"expression":{"id":83595,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83581,"src":"12822:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":83579,"id":83596,"nodeType":"Return","src":"12815:8:91"}]},"documentation":{"id":83557,"nodeType":"StructuredDocumentation","src":"11639:627:91","text":" @notice Add a leg to the tokenId.\n @param self the tokenId in the SFPM representing an option position.\n @param legIndex the leg index of this position (in {0,1,2,3}).\n @param _optionRatio the relative size of the leg.\n @param _asset the asset of the leg.\n @param _isLong whether the leg is long.\n @param _tokenType the type of token moved for the leg.\n @param _riskPartner the associated risk partner of the leg.\n @param _strike the strike price tick of the leg.\n @param _width the width of the leg.\n @return tokenId the tokenId with the leg added"},"functionSelector":"2d07d538","implemented":true,"kind":"function","modifiers":[],"name":"addLeg","nameLocation":"12280:6:91","parameters":{"id":83576,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83559,"mutability":"mutable","name":"self","nameLocation":"12304:4:91","nodeType":"VariableDeclaration","scope":83598,"src":"12296:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83558,"name":"uint256","nodeType":"ElementaryTypeName","src":"12296:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83561,"mutability":"mutable","name":"legIndex","nameLocation":"12326:8:91","nodeType":"VariableDeclaration","scope":83598,"src":"12318:16:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83560,"name":"uint256","nodeType":"ElementaryTypeName","src":"12318:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83563,"mutability":"mutable","name":"_optionRatio","nameLocation":"12352:12:91","nodeType":"VariableDeclaration","scope":83598,"src":"12344:20:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83562,"name":"uint256","nodeType":"ElementaryTypeName","src":"12344:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83565,"mutability":"mutable","name":"_asset","nameLocation":"12382:6:91","nodeType":"VariableDeclaration","scope":83598,"src":"12374:14:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83564,"name":"uint256","nodeType":"ElementaryTypeName","src":"12374:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83567,"mutability":"mutable","name":"_isLong","nameLocation":"12406:7:91","nodeType":"VariableDeclaration","scope":83598,"src":"12398:15:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83566,"name":"uint256","nodeType":"ElementaryTypeName","src":"12398:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83569,"mutability":"mutable","name":"_tokenType","nameLocation":"12431:10:91","nodeType":"VariableDeclaration","scope":83598,"src":"12423:18:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83568,"name":"uint256","nodeType":"ElementaryTypeName","src":"12423:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83571,"mutability":"mutable","name":"_riskPartner","nameLocation":"12459:12:91","nodeType":"VariableDeclaration","scope":83598,"src":"12451:20:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83570,"name":"uint256","nodeType":"ElementaryTypeName","src":"12451:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83573,"mutability":"mutable","name":"_strike","nameLocation":"12487:7:91","nodeType":"VariableDeclaration","scope":83598,"src":"12481:13:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":83572,"name":"int24","nodeType":"ElementaryTypeName","src":"12481:5:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"},{"constant":false,"id":83575,"mutability":"mutable","name":"_width","nameLocation":"12510:6:91","nodeType":"VariableDeclaration","scope":83598,"src":"12504:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":83574,"name":"int24","nodeType":"ElementaryTypeName","src":"12504:5:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"}],"src":"12286:236:91"},"returnParameters":{"id":83579,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83578,"mutability":"mutable","name":"tokenId","nameLocation":"12552:7:91","nodeType":"VariableDeclaration","scope":83598,"src":"12544:15:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83577,"name":"uint256","nodeType":"ElementaryTypeName","src":"12544:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"12543:17:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83616,"nodeType":"FunctionDefinition","src":"13410:145:91","nodes":[],"body":{"id":83615,"nodeType":"Block","src":"13479:76:91","nodes":[],"statements":[{"assignments":[83607],"declarations":[{"constant":false,"id":83607,"mutability":"mutable","name":"r","nameLocation":"13497:1:91","nodeType":"VariableDeclaration","scope":83615,"src":"13489:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83606,"name":"uint256","nodeType":"ElementaryTypeName","src":"13489:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":83612,"initialValue":{"arguments":[{"id":83610,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83601,"src":"13525:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83608,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"13501:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83609,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"13509:15:91","memberName":"flipToBurnToken","nodeType":"MemberAccess","referencedDeclaration":5850,"src":"13501:23:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256) pure returns (uint256)"}},"id":83611,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13501:29:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"13489:41:91"},{"expression":{"id":83613,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83607,"src":"13547:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":83605,"id":83614,"nodeType":"Return","src":"13540:8:91"}]},"documentation":{"id":83599,"nodeType":"StructuredDocumentation","src":"13013:392:91","text":"@notice Flip all the `isLong` positions in the legs in the `tokenId` option position.\n @dev uses XOR on existing isLong bits.\n @dev useful during burning an option position. So we need to take an existing tokenId but now burn it.\n The way to do this is to simply flip it to a short instead.\n @param self the tokenId in the SFPM representing an option position."},"functionSelector":"233f5049","implemented":true,"kind":"function","modifiers":[],"name":"flipToBurnToken","nameLocation":"13419:15:91","parameters":{"id":83602,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83601,"mutability":"mutable","name":"self","nameLocation":"13443:4:91","nodeType":"VariableDeclaration","scope":83616,"src":"13435:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83600,"name":"uint256","nodeType":"ElementaryTypeName","src":"13435:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"13434:14:91"},"returnParameters":{"id":83605,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83604,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83616,"src":"13470:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83603,"name":"uint256","nodeType":"ElementaryTypeName","src":"13470:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"13469:9:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83634,"nodeType":"FunctionDefinition","src":"13876:135:91","nodes":[],"body":{"id":83633,"nodeType":"Block","src":"13940:71:91","nodes":[],"statements":[{"assignments":[83625],"declarations":[{"constant":false,"id":83625,"mutability":"mutable","name":"r","nameLocation":"13958:1:91","nodeType":"VariableDeclaration","scope":83633,"src":"13950:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83624,"name":"uint256","nodeType":"ElementaryTypeName","src":"13950:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":83630,"initialValue":{"arguments":[{"id":83628,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83619,"src":"13981:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83626,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"13962:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83627,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"13970:10:91","memberName":"countLongs","nodeType":"MemberAccess","referencedDeclaration":5880,"src":"13962:18:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256) pure returns (uint256)"}},"id":83629,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13962:24:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"13950:36:91"},{"expression":{"id":83631,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83625,"src":"14003:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":83623,"id":83632,"nodeType":"Return","src":"13996:8:91"}]},"documentation":{"id":83617,"nodeType":"StructuredDocumentation","src":"13561:310:91","text":" @notice Get the number of longs in this option position.\n @notice count the number of legs (out of a maximum of 4) that are long positions.\n @param self the tokenId in the SFPM representing an option position.\n @return the number of long positions (in the range {0,...,4})."},"functionSelector":"4e79d609","implemented":true,"kind":"function","modifiers":[],"name":"countLongs","nameLocation":"13885:10:91","parameters":{"id":83620,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83619,"mutability":"mutable","name":"self","nameLocation":"13904:4:91","nodeType":"VariableDeclaration","scope":83634,"src":"13896:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83618,"name":"uint256","nodeType":"ElementaryTypeName","src":"13896:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"13895:14:91"},"returnParameters":{"id":83623,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83622,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83634,"src":"13931:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83621,"name":"uint256","nodeType":"ElementaryTypeName","src":"13931:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"13930:9:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83660,"nodeType":"FunctionDefinition","src":"14563:251:91","nodes":[],"body":{"id":83659,"nodeType":"Block","src":"14722:92:91","nodes":[],"statements":[{"expression":{"id":83657,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"components":[{"id":83648,"name":"legLowerTick","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83644,"src":"14733:12:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},{"id":83649,"name":"legUpperTick","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83646,"src":"14747:12:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}}],"id":83650,"isConstant":false,"isInlineArray":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"TupleExpression","src":"14732:28:91","typeDescriptions":{"typeIdentifier":"t_tuple$_t_int24_$_t_int24_$","typeString":"tuple(int24,int24)"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":83653,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83637,"src":"14779:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83654,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83639,"src":"14785:8:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83655,"name":"tickSpacing","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83641,"src":"14795:11:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_int24","typeString":"int24"}],"expression":{"id":83651,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"14763:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83652,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"14771:7:91","memberName":"asTicks","nodeType":"MemberAccess","referencedDeclaration":5976,"src":"14763:15:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_int24_$returns$_t_int24_$_t_int24_$","typeString":"function (uint256,uint256,int24) pure returns (int24,int24)"}},"id":83656,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"14763:44:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$_t_int24_$_t_int24_$","typeString":"tuple(int24,int24)"}},"src":"14732:75:91","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":83658,"nodeType":"ExpressionStatement","src":"14732:75:91"}]},"documentation":{"id":83635,"nodeType":"StructuredDocumentation","src":"14017:541:91","text":" @notice Get the option position's nth leg's (index `legIndex`) tick ranges (lower, upper).\n @dev NOTE does not extract liquidity which is the third piece of information in a LiquidityChunk.\n @param self the option position id.\n @param legIndex the leg index of the position (in {0,1,2,3}).\n @param tickSpacing the tick spacing of the underlying Univ3 pool.\n @return legLowerTick the lower tick of the leg/liquidity chunk.\n @return legUpperTick the upper tick of the leg/liquidity chunk."},"functionSelector":"6860c7bc","implemented":true,"kind":"function","modifiers":[],"name":"asTicks","nameLocation":"14572:7:91","parameters":{"id":83642,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83637,"mutability":"mutable","name":"self","nameLocation":"14597:4:91","nodeType":"VariableDeclaration","scope":83660,"src":"14589:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83636,"name":"uint256","nodeType":"ElementaryTypeName","src":"14589:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83639,"mutability":"mutable","name":"legIndex","nameLocation":"14619:8:91","nodeType":"VariableDeclaration","scope":83660,"src":"14611:16:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83638,"name":"uint256","nodeType":"ElementaryTypeName","src":"14611:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83641,"mutability":"mutable","name":"tickSpacing","nameLocation":"14643:11:91","nodeType":"VariableDeclaration","scope":83660,"src":"14637:17:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":83640,"name":"int24","nodeType":"ElementaryTypeName","src":"14637:5:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"}],"src":"14579:81:91"},"returnParameters":{"id":83647,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83644,"mutability":"mutable","name":"legLowerTick","nameLocation":"14688:12:91","nodeType":"VariableDeclaration","scope":83660,"src":"14682:18:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":83643,"name":"int24","nodeType":"ElementaryTypeName","src":"14682:5:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"},{"constant":false,"id":83646,"mutability":"mutable","name":"legUpperTick","nameLocation":"14708:12:91","nodeType":"VariableDeclaration","scope":83660,"src":"14702:18:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":83645,"name":"int24","nodeType":"ElementaryTypeName","src":"14702:5:91","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"}],"src":"14681:40:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83678,"nodeType":"FunctionDefinition","src":"15223:133:91","nodes":[],"body":{"id":83677,"nodeType":"Block","src":"15286:70:91","nodes":[],"statements":[{"assignments":[83669],"declarations":[{"constant":false,"id":83669,"mutability":"mutable","name":"r","nameLocation":"15304:1:91","nodeType":"VariableDeclaration","scope":83677,"src":"15296:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83668,"name":"uint256","nodeType":"ElementaryTypeName","src":"15296:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":83674,"initialValue":{"arguments":[{"id":83672,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83663,"src":"15326:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83670,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"15308:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83671,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"15316:9:91","memberName":"countLegs","nodeType":"MemberAccess","referencedDeclaration":6029,"src":"15308:17:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256) pure returns (uint256)"}},"id":83673,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"15308:23:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"15296:35:91"},{"expression":{"id":83675,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83669,"src":"15348:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":83667,"id":83676,"nodeType":"Return","src":"15341:8:91"}]},"documentation":{"id":83661,"nodeType":"StructuredDocumentation","src":"14820:398:91","text":" @notice Return the number of active legs in the option position.\n @param self the option position Id (tokenId).\n @dev ASSUMPTION: There is at least 1 leg in this option position.\n @dev ASSUMPTION: For any leg, the option ratio is always > 0 (the leg always has a number of contracts associated with it).\n @return the number of legs in the option position."},"functionSelector":"00792a20","implemented":true,"kind":"function","modifiers":[],"name":"countLegs","nameLocation":"15232:9:91","parameters":{"id":83664,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83663,"mutability":"mutable","name":"self","nameLocation":"15250:4:91","nodeType":"VariableDeclaration","scope":83678,"src":"15242:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83662,"name":"uint256","nodeType":"ElementaryTypeName","src":"15242:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"15241:14:91"},"returnParameters":{"id":83667,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83666,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83678,"src":"15277:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83665,"name":"uint256","nodeType":"ElementaryTypeName","src":"15277:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"15276:9:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83699,"nodeType":"FunctionDefinition","src":"16041:145:91","nodes":[],"body":{"id":83698,"nodeType":"Block","src":"16114:72:91","nodes":[],"statements":[{"assignments":[83689],"declarations":[{"constant":false,"id":83689,"mutability":"mutable","name":"r","nameLocation":"16132:1:91","nodeType":"VariableDeclaration","scope":83698,"src":"16124:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83688,"name":"uint256","nodeType":"ElementaryTypeName","src":"16124:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":83695,"initialValue":{"arguments":[{"id":83692,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83681,"src":"16153:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":83693,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83683,"src":"16159:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83690,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"16136:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83691,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"16144:8:91","memberName":"clearLeg","nodeType":"MemberAccess","referencedDeclaration":6074,"src":"16136:16:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":83694,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"16136:25:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"16124:37:91"},{"expression":{"id":83696,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83689,"src":"16178:1:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":83687,"id":83697,"nodeType":"Return","src":"16171:8:91"}]},"documentation":{"id":83679,"nodeType":"StructuredDocumentation","src":"15362:674:91","text":" @notice Clear a leg in an option position with index `i`.\n @dev set bits of the leg to zero. Also sets the optionRatio and asset to zero of that leg.\n @dev NOTE it's important that the caller fills in the leg details after.\n @dev  - optionRatio is zeroed\n @dev  - asset is zeroed\n @dev  - width is zeroed\n @dev  - strike is zeroed\n @dev  - tokenType is zeroed\n @dev  - isLong is zeroed\n @dev  - riskPartner is zeroed\n @param self the tokenId to reset the leg of\n @param i the leg index to reset, in {0,1,2,3}\n @return `self` with the `i`th leg zeroed including optionRatio and asset."},"functionSelector":"a1bb1ee8","implemented":true,"kind":"function","modifiers":[],"name":"clearLeg","nameLocation":"16050:8:91","parameters":{"id":83684,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83681,"mutability":"mutable","name":"self","nameLocation":"16067:4:91","nodeType":"VariableDeclaration","scope":83699,"src":"16059:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83680,"name":"uint256","nodeType":"ElementaryTypeName","src":"16059:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":83683,"mutability":"mutable","name":"i","nameLocation":"16081:1:91","nodeType":"VariableDeclaration","scope":83699,"src":"16073:9:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83682,"name":"uint256","nodeType":"ElementaryTypeName","src":"16073:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"16058:25:91"},"returnParameters":{"id":83687,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83686,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":83699,"src":"16105:7:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83685,"name":"uint256","nodeType":"ElementaryTypeName","src":"16105:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"16104:9:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":83717,"nodeType":"FunctionDefinition","src":"16506:148:91","nodes":[],"body":{"id":83716,"nodeType":"Block","src":"16586:68:91","nodes":[],"statements":[{"assignments":[83708],"declarations":[{"constant":false,"id":83708,"mutability":"mutable","name":"r","nameLocation":"16603:1:91","nodeType":"VariableDeclaration","scope":83716,"src":"16596:8:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"},"typeName":{"id":83707,"name":"uint64","nodeType":"ElementaryTypeName","src":"16596:6:91","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"visibility":"internal"}],"id":83713,"initialValue":{"arguments":[{"id":83711,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83702,"src":"16624:4:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":83709,"name":"TokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6292,"src":"16607:7:91","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_TokenId_$6292_$","typeString":"type(library TokenId)"}},"id":83710,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"16615:8:91","memberName":"validate","nodeType":"MemberAccess","referencedDeclaration":6291,"src":"16607:16:91","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint64_$","typeString":"function (uint256) pure returns (uint64)"}},"id":83712,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"16607:22:91","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"nodeType":"VariableDeclarationStatement","src":"16596:33:91"},{"expression":{"id":83714,"name":"r","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":83708,"src":"16646:1:91","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"functionReturnParameters":83706,"id":83715,"nodeType":"Return","src":"16639:8:91"}]},"documentation":{"id":83700,"nodeType":"StructuredDocumentation","src":"16192:309:91","text":" @notice Validate an option position and all its active legs; return the underlying AMM address.\n @dev used to validate a position tokenId and its legs.\n @param self the option position id.\n @return univ3PoolAddressId the first 64 bits of the underlying Uniswap V3 address."},"functionSelector":"ce4d01a3","implemented":true,"kind":"function","modifiers":[],"name":"validate","nameLocation":"16515:8:91","parameters":{"id":83703,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83702,"mutability":"mutable","name":"self","nameLocation":"16532:4:91","nodeType":"VariableDeclaration","scope":83717,"src":"16524:12:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":83701,"name":"uint256","nodeType":"ElementaryTypeName","src":"16524:7:91","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"16523:14:91"},"returnParameters":{"id":83706,"nodeType":"ParameterList","parameters":[{"constant":false,"id":83705,"mutability":"mutable","name":"univ3PoolAddressId","nameLocation":"16566:18:91","nodeType":"VariableDeclaration","scope":83717,"src":"16559:25:91","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"},"typeName":{"id":83704,"name":"uint64","nodeType":"ElementaryTypeName","src":"16559:6:91","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"visibility":"internal"}],"src":"16558:27:91"},"scope":83718,"stateMutability":"view","virtual":false,"visibility":"public"}],"abstract":false,"baseContracts":[],"canonicalName":"TokenIdHarness","contractDependencies":[],"contractKind":"contract","documentation":{"id":83184,"nodeType":"StructuredDocumentation","src":"94:223:91","text":"@title TokenIdHarness: A harness to expose the TokenId library for code coverage analysis.\n @notice Replicates the interface of the TokenId library, passing through any function calls\n @author Axicon Labs Limited"},"fullyImplemented":true,"linearizedBaseContracts":[83718],"name":"TokenIdHarness","nameLocation":"326:14:91","scope":83719,"usedErrors":[2482,2509]}],"license":"UNLICENSED"},"id":91}