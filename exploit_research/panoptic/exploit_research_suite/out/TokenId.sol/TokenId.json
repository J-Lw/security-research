{"abi":[],"bytecode":{"object":"0x60566037600b82828239805160001a607314602a57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220daeb96d272dfdb9e6e94083b63895d9e2fe63d699fad12dbbad116e911a7072464736f6c63430008120033","sourceMap":"4268:23534:12:-:0;;;;;;;;;;;;;;;-1:-1:-1;;;4268:23534:12;;;;;;;;;;;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x73000000000000000000000000000000000000000030146080604052600080fdfea2646970667358221220daeb96d272dfdb9e6e94083b63895d9e2fe63d699fad12dbbad116e911a7072464736f6c63430008120033","sourceMap":"4268:23534:12:-:0;;;;;;;;","linkReferences":{}},"methodIdentifiers":{},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.18+commit.87f61d96\"},\"language\":\"Solidity\",\"output\":{\"abi\":[],\"devdoc\":{\"author\":\"Axicon Labs Limited\",\"details\":\"PACKING RULES FOR A TOKENID:this is how the token Id is packed into its bit-constituents containing position information.the following is a diagram to be read top-down in a little endian format(so (1) below occupies the first 64 least significant bits, e.g.):From the LSB to the MSB: ===== 1 time (same for all legs) ==============================================================      Property         Size      Offset      Comment (1) univ3pool        64bits     0bits      : first 8 bytes of the Uniswap v3 pool address (first 64 bits; little-endian), plus a pseudorandom number in the event of a collision ===== 4 times (one for each leg) ============================================================== (2) asset             1bit      0bits      : Specifies the asset (0: token0, 1: token1) (3) optionRatio       7bits     1bits      : number of contracts per leg (4) isLong            1bit      8bits      : long==1 means liquidity is removed, long==0 -> liquidity is added (5) tokenType         1bit      9bits      : put/call: which token is moved when deployed (0 -> token0, 1 -> token1) (6) riskPartner       2bits     10bits     : normally its own index. Partner in defined risk position otherwise (7) strike           24bits     12bits     : strike price; defined as (tickUpper + tickLower) / 2 (8) width            12bits     36bits     : width; defined as (tickUpper - tickLower) / tickSpacing Total                48bits                : Each leg takes up this many bits =============================================================================================== The bit pattern is therefore, in general:                        (strike price tick of the 3rd leg)                            |             (width of the 2nd leg)                            |                   | (8)(7)(6)(5)(4)(3)(2)  (8)(7)(6)(5)(4)(3)(2)  (8)(7)(6)(5)(4)(3)(2)   (8)(7)(6)(5)(4)(3)(2)        (1)  <---- 48 bits ---->    <---- 48 bits ---->    <---- 48 bits ---->     <---- 48 bits ---->    <- 64 bits ->         Leg 4                  Leg 3                  Leg 2                   Leg 1         Univ3 Pool Address  <--- most significant bit                                                       least significant bit --->\",\"kind\":\"dev\",\"methods\":{},\"title\":\"Panoptic's tokenId: the fundamental options position.\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{},\"notice\":\"This is the token ID used in the ERC1155 representation of the option position in the SFPM.The SFPM \\\"Overloads\\\" the ERC1155 `id` by storing all option information in said `id`.Contains methods for packing and unpacking a Panoptic options position into a uint256 bit pattern.our terminology: \\\"leg n\\\" or \\\"nth leg\\\" (in {1,2,3,4}) corresponds to \\\"leg index n-1\\\" or `legIndex` (in {0,1,2,3})Some rules of how legs behave (we enforce these in a `validate()` function):   - a leg is inactive if it's not part of the position. Technically it means that all bits are zero.   - a leg is active if it has an optionRatio > 0 since this must always be set for an active leg.   - if a leg is active (e.g. leg 1) there can be no gaps in other legs meaning: if leg 1 is active then leg 3 cannot be active if leg 2 is inactive. Examples:  We can think of the bit pattern as an array starting at bit index 0 going to bit index 255 (so 256 total bits)  We also refer to the legs via their index, so leg number 2 has leg index 1 (legIndex) (counting from zero), and in general leg number N has leg index N-1.  - the underlying strike price of the 2nd leg (leg index = 1) in this option position starts at bit index  (64 + 12 + 48 * (leg index=1))=123  - the tokenType of the 4th leg in this option position starts at bit index 64+9+48*3=217  - the Uniswap v3 pool id starts at bit index 0 and ends at bit index 63 (and thus takes up 64 bits).  - the width of the 3rd leg in this option position starts at bit index 64+36+48*2=196\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/types/TokenId.sol\":\"TokenId\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":18000},\"remappings\":[\":@contracts/=contracts/\",\":@libraries/=contracts/libraries/\",\":@multicall/=contracts/multicall/\",\":@openzeppelin/=lib/openzeppelin-contracts/\",\":@periphery/=contracts/periphery/\",\":@scripts/=scripts/\",\":@testUtils/=test/foundry/testUtils/\",\":@tokens/=contracts/tokens/\",\":@types/=contracts/types/\",\":@uniswap/=lib/\",\":ds-test/=lib/forge-std/lib/ds-test/src/\",\":forge-std/=lib/forge-std/src/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":solmate/=lib/solmate/src/\",\":univ3-core/=lib/v3-core/contracts/\",\":univ3-periphery/=lib/v3-periphery/contracts/\",\":v3-core/=lib/v3-core/contracts/\",\":v3-periphery/=lib/v3-periphery/contracts/\"]},\"sources\":{\"contracts/libraries/Constants.sol\":{\"keccak256\":\"0x23144978ba9ba9656514741ce4c9489720d1c4bcacafa0402e160805e547b71a\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://944d711e4be30582f55063f2b6f41902c68d52e7f32a075b7f499405dc1c7f0b\",\"dweb:/ipfs/QmWjYNrcQ8bKazZZktHV4iwCpRyCTfVUoMLSZzYEBRAyYj\"]},\"contracts/libraries/Errors.sol\":{\"keccak256\":\"0xc726df9eeff396c5f90d831ce0f22d13c1373efdc729418d58ab534b403d86fc\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://a8e98110a218b49dac5c8e0ab99892be1d3b4baf7490293314ff09e3eac14da7\",\"dweb:/ipfs/QmbSgGUiWfuN4mgghXpuPnVjYFL3pQkncv6FXoHWb8Wocv\"]},\"contracts/types/TokenId.sol\":{\"keccak256\":\"0x0d258e512399e1e510a4782faac8d822eefb74bf42968733f66180bee57d20e0\",\"license\":\"GPL-2.0-or-later\",\"urls\":[\"bzz-raw://0348a30fedbea579320af2e7b3518296e640097e97763a10af3185302056bd45\",\"dweb:/ipfs/QmXWsaSFbhg8d2pdo7bDwvsD1gVWqPUw4ZK94qXEFEevQw\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.18+commit.87f61d96"},"language":"Solidity","output":{"abi":[],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"remappings":["@contracts/=contracts/","@libraries/=contracts/libraries/","@multicall/=contracts/multicall/","@openzeppelin/=lib/openzeppelin-contracts/","@periphery/=contracts/periphery/","@scripts/=scripts/","@testUtils/=test/foundry/testUtils/","@tokens/=contracts/tokens/","@types/=contracts/types/","@uniswap/=lib/","ds-test/=lib/forge-std/lib/ds-test/src/","forge-std/=lib/forge-std/src/","openzeppelin-contracts/=lib/openzeppelin-contracts/","solmate/=lib/solmate/src/","univ3-core/=lib/v3-core/contracts/","univ3-periphery/=lib/v3-periphery/contracts/","v3-core/=lib/v3-core/contracts/","v3-periphery/=lib/v3-periphery/contracts/"],"optimizer":{"enabled":true,"runs":18000},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"contracts/types/TokenId.sol":"TokenId"},"libraries":{}},"sources":{"contracts/libraries/Constants.sol":{"keccak256":"0x23144978ba9ba9656514741ce4c9489720d1c4bcacafa0402e160805e547b71a","urls":["bzz-raw://944d711e4be30582f55063f2b6f41902c68d52e7f32a075b7f499405dc1c7f0b","dweb:/ipfs/QmWjYNrcQ8bKazZZktHV4iwCpRyCTfVUoMLSZzYEBRAyYj"],"license":"GPL-2.0-or-later"},"contracts/libraries/Errors.sol":{"keccak256":"0xc726df9eeff396c5f90d831ce0f22d13c1373efdc729418d58ab534b403d86fc","urls":["bzz-raw://a8e98110a218b49dac5c8e0ab99892be1d3b4baf7490293314ff09e3eac14da7","dweb:/ipfs/QmbSgGUiWfuN4mgghXpuPnVjYFL3pQkncv6FXoHWb8Wocv"],"license":"GPL-2.0-or-later"},"contracts/types/TokenId.sol":{"keccak256":"0x0d258e512399e1e510a4782faac8d822eefb74bf42968733f66180bee57d20e0","urls":["bzz-raw://0348a30fedbea579320af2e7b3518296e640097e97763a10af3185302056bd45","dweb:/ipfs/QmXWsaSFbhg8d2pdo7bDwvsD1gVWqPUw4ZK94qXEFEevQw"],"license":"GPL-2.0-or-later"}},"version":1},"ast":{"absolutePath":"contracts/types/TokenId.sol","id":6293,"exportedSymbols":{"Constants":[2465],"Errors":[2516],"TokenId":[6292]},"nodeType":"SourceUnit","src":"45:27758:12","nodes":[{"id":5194,"nodeType":"PragmaDirective","src":"45:23:12","nodes":[],"literals":["solidity","^","0.8",".0"]},{"id":5196,"nodeType":"ImportDirective","src":"83:51:12","nodes":[],"absolutePath":"contracts/libraries/Constants.sol","file":"@libraries/Constants.sol","nameLocation":"-1:-1:-1","scope":6293,"sourceUnit":2466,"symbolAliases":[{"foreign":{"id":5195,"name":"Constants","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2465,"src":"91:9:12","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":5198,"nodeType":"ImportDirective","src":"135:45:12","nodes":[],"absolutePath":"contracts/libraries/Errors.sol","file":"@libraries/Errors.sol","nameLocation":"-1:-1:-1","scope":6293,"sourceUnit":2517,"symbolAliases":[{"foreign":{"id":5197,"name":"Errors","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2516,"src":"143:6:12","typeDescriptions":{}},"nameLocation":"-1:-1:-1"}],"unitAlias":""},{"id":6292,"nodeType":"ContractDefinition","src":"4268:23534:12","nodes":[{"id":5202,"nodeType":"UsingForDirective","src":"4290:26:12","nodes":[],"global":false,"libraryName":{"id":5200,"name":"TokenId","nameLocations":["4296:7:12"],"nodeType":"IdentifierPath","referencedDeclaration":6292,"src":"4296:7:12"},"typeName":{"id":5201,"name":"uint256","nodeType":"ElementaryTypeName","src":"4308:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}},{"id":5205,"nodeType":"VariableDeclaration","src":"4407:107:12","nodes":[],"constant":true,"mutability":"constant","name":"LONG_MASK","nameLocation":"4433:9:12","scope":6292,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5203,"name":"uint256","nodeType":"ElementaryTypeName","src":"4407:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"30783130305f3030303030303030303130305f3030303030303030303130305f3030303030303030303130305f30303030303030303030303030303030","id":5204,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4453:61:12","typeDescriptions":{"typeIdentifier":"t_rational_105312291668557560842337184396146720457997191364272433102967537664_by_1","typeString":"int_const 1053...(58 digits omitted)...7664"},"value":"0x100_000000000100_000000000100_000000000100_0000000000000000"},"visibility":"internal"},{"id":5208,"nodeType":"VariableDeclaration","src":"4655:121:12","nodes":[],"constant":true,"mutability":"constant","name":"CLEAR_POOLID_MASK","nameLocation":"4681:17:12","scope":6292,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5206,"name":"uint256","nodeType":"ElementaryTypeName","src":"4655:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"30784646464646464646464646464646464646464646464646464646464646464646464646464646464646464646464646465f30303030303030303030303030303030","id":5207,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4709:67:12","typeDescriptions":{"typeIdentifier":"t_rational_115792089237316195423570985008687907853269984665640564039439137263839420088320_by_1","typeString":"int_const 1157...(70 digits omitted)...8320"},"value":"0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF_0000000000000000"},"visibility":"internal"},{"id":5211,"nodeType":"VariableDeclaration","src":"4854:124:12","nodes":[],"constant":true,"mutability":"constant","name":"OPTION_RATIO_MASK","nameLocation":"4880:17:12","scope":6292,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5209,"name":"uint256","nodeType":"ElementaryTypeName","src":"4854:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"30783030303030303030303046455f3030303030303030303046455f3030303030303030303046455f3030303030303030303046455f30303030303030303030303030303030","id":5210,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"4908:70:12","typeDescriptions":{"typeIdentifier":"t_rational_104489539389896954898256425143051824204419088306739054719350603776_by_1","typeString":"int_const 1044...(58 digits omitted)...3776"},"value":"0x0000000000FE_0000000000FE_0000000000FE_0000000000FE_0000000000000000"},"visibility":"internal"},{"id":5214,"nodeType":"VariableDeclaration","src":"4984:49:12","nodes":[],"constant":true,"mutability":"constant","name":"BITMASK_INT24","nameLocation":"5009:13:12","scope":6292,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"},"typeName":{"id":5212,"name":"int256","nodeType":"ElementaryTypeName","src":"4984:6:12","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"value":{"hexValue":"3078464646464646","id":5213,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"5025:8:12","typeDescriptions":{"typeIdentifier":"t_rational_16777215_by_1","typeString":"int_const 16777215"},"value":"0xFFFFFF"},"visibility":"internal"},{"id":5217,"nodeType":"VariableDeclaration","src":"5254:60:12","nodes":[],"constant":true,"mutability":"constant","name":"RISK_PARTNER_MASK","nameLocation":"5280:17:12","scope":6292,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5215,"name":"uint256","nodeType":"ElementaryTypeName","src":"5254:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"value":{"hexValue":"3078464646464646464646334646","id":5216,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"5300:14:12","typeDescriptions":{"typeIdentifier":"t_rational_281474976707583_by_1","typeString":"int_const 281474976707583"},"value":"0xFFFFFFFFF3FF"},"visibility":"internal"},{"id":5232,"nodeType":"FunctionDefinition","src":"5703:134:12","nodes":[],"body":{"id":5231,"nodeType":"Block","src":"5767:70:12","nodes":[],"statements":[{"id":5230,"nodeType":"UncheckedBlock","src":"5777:54:12","statements":[{"expression":{"arguments":[{"id":5227,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5220,"src":"5815:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5226,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"5808:6:12","typeDescriptions":{"typeIdentifier":"t_type$_t_uint64_$","typeString":"type(uint64)"},"typeName":{"id":5225,"name":"uint64","nodeType":"ElementaryTypeName","src":"5808:6:12","typeDescriptions":{}}},"id":5228,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5808:12:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"functionReturnParameters":5224,"id":5229,"nodeType":"Return","src":"5801:19:12"}]}]},"documentation":{"id":5218,"nodeType":"StructuredDocumentation","src":"5501:197:12","text":"@notice The Uniswap v3 Pool pointed to by this option position.\n @param self the option position Id\n @return the poolId (Panoptic's uni v3 pool fingerprint) of the Uniswap v3 pool"},"implemented":true,"kind":"function","modifiers":[],"name":"univ3pool","nameLocation":"5712:9:12","parameters":{"id":5221,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5220,"mutability":"mutable","name":"self","nameLocation":"5730:4:12","nodeType":"VariableDeclaration","scope":5232,"src":"5722:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5219,"name":"uint256","nodeType":"ElementaryTypeName","src":"5722:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"5721:14:12"},"returnParameters":{"id":5224,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5223,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":5232,"src":"5759:6:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"},"typeName":{"id":5222,"name":"uint64","nodeType":"ElementaryTypeName","src":"5759:6:12","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"visibility":"internal"}],"src":"5758:8:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5259,"nodeType":"FunctionDefinition","src":"6302:180:12","nodes":[],"body":{"id":5258,"nodeType":"Block","src":"6381:101:12","nodes":[],"statements":[{"id":5257,"nodeType":"UncheckedBlock","src":"6391:85:12","statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5254,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5251,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5244,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5235,"src":"6431:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">>","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5249,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3634","id":5245,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6440:2:12","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5248,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5246,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5237,"src":"6445:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"3438","id":5247,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6456:2:12","typeDescriptions":{"typeIdentifier":"t_rational_48_by_1","typeString":"int_const 48"},"value":"48"},"src":"6445:13:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6440:18:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5250,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"6439:20:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6431:28:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5252,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"6430:30:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"%","rightExpression":{"hexValue":"32","id":5253,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6463:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"src":"6430:34:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5243,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6422:7:12","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":5242,"name":"uint256","nodeType":"ElementaryTypeName","src":"6422:7:12","typeDescriptions":{}}},"id":5255,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6422:43:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":5241,"id":5256,"nodeType":"Return","src":"6415:50:12"}]}]},"documentation":{"id":5233,"nodeType":"StructuredDocumentation","src":"5843:454:12","text":"@notice Get the asset basis for this position.\n @dev which token is the asset - can be token0 (return 0) or token1 (return 1)\n @param self the option position Id\n @param legIndex the leg index of this position (in {0,1,2,3})\n @dev occupies the leftmost bit of the optionRatio 4 bits slot.\n @dev The final mod: \"% 2\" = takes the leftmost bit of the pattern.\n @return 0 if asset is token0, 1 if asset is token1"},"implemented":true,"kind":"function","modifiers":[],"name":"asset","nameLocation":"6311:5:12","parameters":{"id":5238,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5235,"mutability":"mutable","name":"self","nameLocation":"6325:4:12","nodeType":"VariableDeclaration","scope":5259,"src":"6317:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5234,"name":"uint256","nodeType":"ElementaryTypeName","src":"6317:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5237,"mutability":"mutable","name":"legIndex","nameLocation":"6339:8:12","nodeType":"VariableDeclaration","scope":5259,"src":"6331:16:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5236,"name":"uint256","nodeType":"ElementaryTypeName","src":"6331:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"6316:32:12"},"returnParameters":{"id":5241,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5240,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":5259,"src":"6372:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5239,"name":"uint256","nodeType":"ElementaryTypeName","src":"6372:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"6371:9:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5288,"nodeType":"FunctionDefinition","src":"6752:192:12","nodes":[],"body":{"id":5287,"nodeType":"Block","src":"6837:107:12","nodes":[],"statements":[{"id":5286,"nodeType":"UncheckedBlock","src":"6847:91:12","statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5283,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5280,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5271,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5262,"src":"6887:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">>","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5278,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5276,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3634","id":5272,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6896:2:12","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5275,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5273,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5264,"src":"6901:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"3438","id":5274,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6912:2:12","typeDescriptions":{"typeIdentifier":"t_rational_48_by_1","typeString":"int_const 48"},"value":"48"},"src":"6901:13:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6896:18:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"hexValue":"31","id":5277,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6917:1:12","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"6896:22:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5279,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"6895:24:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"6887:32:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5281,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"6886:34:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"%","rightExpression":{"hexValue":"313238","id":5282,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"6923:3:12","typeDescriptions":{"typeIdentifier":"t_rational_128_by_1","typeString":"int_const 128"},"value":"128"},"src":"6886:40:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5270,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"6878:7:12","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":5269,"name":"uint256","nodeType":"ElementaryTypeName","src":"6878:7:12","typeDescriptions":{}}},"id":5284,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"6878:49:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":5268,"id":5285,"nodeType":"Return","src":"6871:56:12"}]}]},"documentation":{"id":5260,"nodeType":"StructuredDocumentation","src":"6488:259:12","text":"@notice Get the number of contracts per leg.\n @param self the option position Id.\n @param legIndex the leg index of this position (in {0,1,2,3})\n @dev The final mod: \"% 2**7\" = takes the rightmost (2 ** 7 = 128) 7 bits of the pattern."},"implemented":true,"kind":"function","modifiers":[],"name":"optionRatio","nameLocation":"6761:11:12","parameters":{"id":5265,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5262,"mutability":"mutable","name":"self","nameLocation":"6781:4:12","nodeType":"VariableDeclaration","scope":5288,"src":"6773:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5261,"name":"uint256","nodeType":"ElementaryTypeName","src":"6773:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5264,"mutability":"mutable","name":"legIndex","nameLocation":"6795:8:12","nodeType":"VariableDeclaration","scope":5288,"src":"6787:16:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5263,"name":"uint256","nodeType":"ElementaryTypeName","src":"6787:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"6772:32:12"},"returnParameters":{"id":5268,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5267,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":5288,"src":"6828:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5266,"name":"uint256","nodeType":"ElementaryTypeName","src":"6828:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"6827:9:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5317,"nodeType":"FunctionDefinition","src":"7188:185:12","nodes":[],"body":{"id":5316,"nodeType":"Block","src":"7268:105:12","nodes":[],"statements":[{"id":5315,"nodeType":"UncheckedBlock","src":"7278:89:12","statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5312,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5309,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5300,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5291,"src":"7318:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">>","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5307,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5305,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3634","id":5301,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7327:2:12","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5304,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5302,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5293,"src":"7332:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"3438","id":5303,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7343:2:12","typeDescriptions":{"typeIdentifier":"t_rational_48_by_1","typeString":"int_const 48"},"value":"48"},"src":"7332:13:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7327:18:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"hexValue":"38","id":5306,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7348:1:12","typeDescriptions":{"typeIdentifier":"t_rational_8_by_1","typeString":"int_const 8"},"value":"8"},"src":"7327:22:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5308,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"7326:24:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7318:32:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5310,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"7317:34:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"%","rightExpression":{"hexValue":"32","id":5311,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7354:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"src":"7317:38:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5299,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"7309:7:12","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":5298,"name":"uint256","nodeType":"ElementaryTypeName","src":"7309:7:12","typeDescriptions":{}}},"id":5313,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7309:47:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":5297,"id":5314,"nodeType":"Return","src":"7302:54:12"}]}]},"documentation":{"id":5289,"nodeType":"StructuredDocumentation","src":"6950:233:12","text":"@notice Return 1 if the nth leg (leg index `legIndex`) is a long position.\n @param self the option position Id\n @param legIndex the leg index of this position (in {0,1,2,3})\n @return 1 if long; 0 if not long."},"implemented":true,"kind":"function","modifiers":[],"name":"isLong","nameLocation":"7197:6:12","parameters":{"id":5294,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5291,"mutability":"mutable","name":"self","nameLocation":"7212:4:12","nodeType":"VariableDeclaration","scope":5317,"src":"7204:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5290,"name":"uint256","nodeType":"ElementaryTypeName","src":"7204:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5293,"mutability":"mutable","name":"legIndex","nameLocation":"7226:8:12","nodeType":"VariableDeclaration","scope":5317,"src":"7218:16:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5292,"name":"uint256","nodeType":"ElementaryTypeName","src":"7218:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"7203:32:12"},"returnParameters":{"id":5297,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5296,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":5317,"src":"7259:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5295,"name":"uint256","nodeType":"ElementaryTypeName","src":"7259:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"7258:9:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5346,"nodeType":"FunctionDefinition","src":"7716:188:12","nodes":[],"body":{"id":5345,"nodeType":"Block","src":"7799:105:12","nodes":[],"statements":[{"id":5344,"nodeType":"UncheckedBlock","src":"7809:89:12","statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5341,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5338,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5329,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5320,"src":"7849:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">>","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5336,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5334,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3634","id":5330,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7858:2:12","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5333,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5331,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5322,"src":"7863:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"3438","id":5332,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7874:2:12","typeDescriptions":{"typeIdentifier":"t_rational_48_by_1","typeString":"int_const 48"},"value":"48"},"src":"7863:13:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7858:18:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"hexValue":"39","id":5335,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7879:1:12","typeDescriptions":{"typeIdentifier":"t_rational_9_by_1","typeString":"int_const 9"},"value":"9"},"src":"7858:22:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5337,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"7857:24:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"7849:32:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5339,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"7848:34:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"%","rightExpression":{"hexValue":"32","id":5340,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"7885:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"src":"7848:38:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5328,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"7840:7:12","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":5327,"name":"uint256","nodeType":"ElementaryTypeName","src":"7840:7:12","typeDescriptions":{}}},"id":5342,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"7840:47:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":5326,"id":5343,"nodeType":"Return","src":"7833:54:12"}]}]},"documentation":{"id":5318,"nodeType":"StructuredDocumentation","src":"7379:332:12","text":"@notice Get the type of token moved for a given leg (implies a call or put). Either Token0 or Token1.\n @param self the tokenId in the SFPM representing an option position\n @param legIndex the leg index of this position (in {0,1,2,3})\n @return 1 if the token moved is token1 or 0 if the token moved is token0"},"implemented":true,"kind":"function","modifiers":[],"name":"tokenType","nameLocation":"7725:9:12","parameters":{"id":5323,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5320,"mutability":"mutable","name":"self","nameLocation":"7743:4:12","nodeType":"VariableDeclaration","scope":5346,"src":"7735:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5319,"name":"uint256","nodeType":"ElementaryTypeName","src":"7735:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5322,"mutability":"mutable","name":"legIndex","nameLocation":"7757:8:12","nodeType":"VariableDeclaration","scope":5346,"src":"7749:16:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5321,"name":"uint256","nodeType":"ElementaryTypeName","src":"7749:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"7734:32:12"},"returnParameters":{"id":5326,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5325,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":5346,"src":"7790:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5324,"name":"uint256","nodeType":"ElementaryTypeName","src":"7790:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"7789:9:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5375,"nodeType":"FunctionDefinition","src":"8954:191:12","nodes":[],"body":{"id":5374,"nodeType":"Block","src":"9039:106:12","nodes":[],"statements":[{"id":5373,"nodeType":"UncheckedBlock","src":"9049:90:12","statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5370,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5367,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5358,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5349,"src":"9089:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">>","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5365,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5363,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3634","id":5359,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"9098:2:12","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5362,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5360,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5351,"src":"9103:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"3438","id":5361,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"9114:2:12","typeDescriptions":{"typeIdentifier":"t_rational_48_by_1","typeString":"int_const 48"},"value":"48"},"src":"9103:13:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9098:18:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"hexValue":"3130","id":5364,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"9119:2:12","typeDescriptions":{"typeIdentifier":"t_rational_10_by_1","typeString":"int_const 10"},"value":"10"},"src":"9098:23:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5366,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"9097:25:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9089:33:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5368,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"9088:35:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"%","rightExpression":{"hexValue":"34","id":5369,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"9126:1:12","typeDescriptions":{"typeIdentifier":"t_rational_4_by_1","typeString":"int_const 4"},"value":"4"},"src":"9088:39:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5357,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"9080:7:12","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":5356,"name":"uint256","nodeType":"ElementaryTypeName","src":"9080:7:12","typeDescriptions":{}}},"id":5371,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9080:48:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":5355,"id":5372,"nodeType":"Return","src":"9073:55:12"}]}]},"documentation":{"id":5347,"nodeType":"StructuredDocumentation","src":"7910:1039:12","text":"@notice Get the associated risk partner of the leg index (generally another leg index in the position).\n @notice that returning the riskPartner for any leg is 0 by default, this does not necessarily imply that token 1 (index 0)\n @notice is the risk partner of that leg. We are assuming here that the position has been validated before this and that\n @notice the risk partner of any leg always makes sense in this way. A leg btw. does not need to have a risk partner.\n @notice the point here is that this function is very low level and must be used with utmost care because it comes down\n @notice to the caller to interpret whether 00 means \"no risk partner\" or \"risk partner leg index 0\".\n @notice But in general we can return 00, 01, 10, and 11 meaning the partner is leg 0, 1, 2, or 3.\n @param self the tokenId in the SFPM representing an option position\n @param legIndex the leg index of this position (in {0,1,2,3})\n @return the leg index of `legIndex`'s risk partner."},"implemented":true,"kind":"function","modifiers":[],"name":"riskPartner","nameLocation":"8963:11:12","parameters":{"id":5352,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5349,"mutability":"mutable","name":"self","nameLocation":"8983:4:12","nodeType":"VariableDeclaration","scope":5375,"src":"8975:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5348,"name":"uint256","nodeType":"ElementaryTypeName","src":"8975:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5351,"mutability":"mutable","name":"legIndex","nameLocation":"8997:8:12","nodeType":"VariableDeclaration","scope":5375,"src":"8989:16:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5350,"name":"uint256","nodeType":"ElementaryTypeName","src":"8989:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"8974:32:12"},"returnParameters":{"id":5355,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5354,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":5375,"src":"9030:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5353,"name":"uint256","nodeType":"ElementaryTypeName","src":"9030:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"9029:9:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5404,"nodeType":"FunctionDefinition","src":"9447:184:12","nodes":[],"body":{"id":5403,"nodeType":"Block","src":"9525:106:12","nodes":[],"statements":[{"id":5402,"nodeType":"UncheckedBlock","src":"9535:90:12","statements":[{"expression":{"arguments":[{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5398,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5389,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5378,"src":"9579:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">>","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5396,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5394,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3634","id":5390,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"9588:2:12","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5393,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5391,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5380,"src":"9593:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"3438","id":5392,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"9604:2:12","typeDescriptions":{"typeIdentifier":"t_rational_48_by_1","typeString":"int_const 48"},"value":"48"},"src":"9593:13:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9588:18:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"hexValue":"3132","id":5395,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"9609:2:12","typeDescriptions":{"typeIdentifier":"t_rational_12_by_1","typeString":"int_const 12"},"value":"12"},"src":"9588:23:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5397,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"9587:25:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"9579:33:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5388,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"9572:6:12","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":5387,"name":"int256","nodeType":"ElementaryTypeName","src":"9572:6:12","typeDescriptions":{}}},"id":5399,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9572:41:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":5386,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"9566:5:12","typeDescriptions":{"typeIdentifier":"t_type$_t_int24_$","typeString":"type(int24)"},"typeName":{"id":5385,"name":"int24","nodeType":"ElementaryTypeName","src":"9566:5:12","typeDescriptions":{}}},"id":5400,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"9566:48:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"functionReturnParameters":5384,"id":5401,"nodeType":"Return","src":"9559:55:12"}]}]},"documentation":{"id":5376,"nodeType":"StructuredDocumentation","src":"9151:291:12","text":"@notice Get the strike price tick of the nth leg (with index `legIndex`).\n @param self the tokenId in the SFPM representing an option position\n @param legIndex the leg index of this position (in {0,1,2,3})\n @return the strike price (the underlying price of the leg)."},"implemented":true,"kind":"function","modifiers":[],"name":"strike","nameLocation":"9456:6:12","parameters":{"id":5381,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5378,"mutability":"mutable","name":"self","nameLocation":"9471:4:12","nodeType":"VariableDeclaration","scope":5404,"src":"9463:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5377,"name":"uint256","nodeType":"ElementaryTypeName","src":"9463:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5380,"mutability":"mutable","name":"legIndex","nameLocation":"9485:8:12","nodeType":"VariableDeclaration","scope":5404,"src":"9477:16:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5379,"name":"uint256","nodeType":"ElementaryTypeName","src":"9477:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"9462:32:12"},"returnParameters":{"id":5384,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5383,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":5404,"src":"9518:5:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":5382,"name":"int24","nodeType":"ElementaryTypeName","src":"9518:5:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"}],"src":"9517:7:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5436,"nodeType":"FunctionDefinition","src":"10068:241:12","nodes":[],"body":{"id":5435,"nodeType":"Block","src":"10145:164:12","nodes":[],"statements":[{"id":5434,"nodeType":"UncheckedBlock","src":"10155:99:12","statements":[{"expression":{"arguments":[{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5430,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5427,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5418,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5407,"src":"10200:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">>","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5425,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5423,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3634","id":5419,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"10209:2:12","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5422,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5420,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5409,"src":"10214:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"3438","id":5421,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"10225:2:12","typeDescriptions":{"typeIdentifier":"t_rational_48_by_1","typeString":"int_const 48"},"value":"48"},"src":"10214:13:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"10209:18:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"hexValue":"3336","id":5424,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"10230:2:12","typeDescriptions":{"typeIdentifier":"t_rational_36_by_1","typeString":"int_const 36"},"value":"36"},"src":"10209:23:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5426,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"10208:25:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"10200:33:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5428,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"10199:35:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"%","rightExpression":{"hexValue":"34303936","id":5429,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"10237:4:12","typeDescriptions":{"typeIdentifier":"t_rational_4096_by_1","typeString":"int_const 4096"},"value":"4096"},"src":"10199:42:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5417,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"10192:6:12","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":5416,"name":"int256","nodeType":"ElementaryTypeName","src":"10192:6:12","typeDescriptions":{}}},"id":5431,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10192:50:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":5415,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"10186:5:12","typeDescriptions":{"typeIdentifier":"t_type$_t_int24_$","typeString":"type(int24)"},"typeName":{"id":5414,"name":"int24","nodeType":"ElementaryTypeName","src":"10186:5:12","typeDescriptions":{}}},"id":5432,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10186:57:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"functionReturnParameters":5413,"id":5433,"nodeType":"Return","src":"10179:64:12"}]}]},"documentation":{"id":5405,"nodeType":"StructuredDocumentation","src":"9637:426:12","text":"@notice Get the width of the nth leg (index `legIndex`). This is half the tick-range covered by the leg (tickUpper - tickLower)/2.\n @dev return as int24 to be compatible with the strike tick format (they naturally go together)\n @param self the tokenId in the SFPM representing an option position\n @param legIndex the leg index of this position (in {0,1,2,3})\n @return the width of the position."},"implemented":true,"kind":"function","modifiers":[],"name":"width","nameLocation":"10077:5:12","parameters":{"id":5410,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5407,"mutability":"mutable","name":"self","nameLocation":"10091:4:12","nodeType":"VariableDeclaration","scope":5436,"src":"10083:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5406,"name":"uint256","nodeType":"ElementaryTypeName","src":"10083:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5409,"mutability":"mutable","name":"legIndex","nameLocation":"10105:8:12","nodeType":"VariableDeclaration","scope":5436,"src":"10097:16:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5408,"name":"uint256","nodeType":"ElementaryTypeName","src":"10097:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"10082:32:12"},"returnParameters":{"id":5413,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5412,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":5436,"src":"10138:5:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":5411,"name":"int24","nodeType":"ElementaryTypeName","src":"10138:5:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"}],"src":"10137:7:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5455,"nodeType":"FunctionDefinition","src":"10681:165:12","nodes":[],"body":{"id":5454,"nodeType":"Block","src":"10765:81:12","nodes":[],"statements":[{"id":5453,"nodeType":"UncheckedBlock","src":"10775:65:12","statements":[{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5451,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5446,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5439,"src":"10806:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"arguments":[{"id":5449,"name":"_poolId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5441,"src":"10821:7:12","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint64","typeString":"uint64"}],"id":5448,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"10813:7:12","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":5447,"name":"uint256","nodeType":"ElementaryTypeName","src":"10813:7:12","typeDescriptions":{}}},"id":5450,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"10813:16:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"10806:23:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":5445,"id":5452,"nodeType":"Return","src":"10799:30:12"}]}]},"documentation":{"id":5437,"nodeType":"StructuredDocumentation","src":"10495:181:12","text":"@notice Add the Uniswap v3 Pool pointed to by this option position.\n @param self the option position Id.\n @return the tokenId with the Uniswap V3 pool added to it."},"implemented":true,"kind":"function","modifiers":[],"name":"addUniv3pool","nameLocation":"10690:12:12","parameters":{"id":5442,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5439,"mutability":"mutable","name":"self","nameLocation":"10711:4:12","nodeType":"VariableDeclaration","scope":5455,"src":"10703:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5438,"name":"uint256","nodeType":"ElementaryTypeName","src":"10703:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5441,"mutability":"mutable","name":"_poolId","nameLocation":"10724:7:12","nodeType":"VariableDeclaration","scope":5455,"src":"10717:14:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"},"typeName":{"id":5440,"name":"uint64","nodeType":"ElementaryTypeName","src":"10717:6:12","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"visibility":"internal"}],"src":"10702:30:12"},"returnParameters":{"id":5445,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5444,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":5455,"src":"10756:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5443,"name":"uint256","nodeType":"ElementaryTypeName","src":"10756:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"10755:9:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5486,"nodeType":"FunctionDefinition","src":"11422:238:12","nodes":[],"body":{"id":5485,"nodeType":"Block","src":"11550:110:12","nodes":[],"statements":[{"id":5484,"nodeType":"UncheckedBlock","src":"11560:94:12","statements":[{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5482,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5467,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5458,"src":"11591:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5480,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5472,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5470,"name":"_asset","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5460,"src":"11607:6:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"%","rightExpression":{"hexValue":"32","id":5471,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"11616:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"src":"11607:10:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5469,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"11599:7:12","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":5468,"name":"uint256","nodeType":"ElementaryTypeName","src":"11599:7:12","typeDescriptions":{}}},"id":5473,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"11599:19:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<<","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5478,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3634","id":5474,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"11623:2:12","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5477,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5475,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5462,"src":"11628:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"3438","id":5476,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"11639:2:12","typeDescriptions":{"typeIdentifier":"t_rational_48_by_1","typeString":"int_const 48"},"value":"48"},"src":"11628:13:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"11623:18:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5479,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"11622:20:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"11599:43:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5481,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"11598:45:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"11591:52:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":5466,"id":5483,"nodeType":"Return","src":"11584:59:12"}]}]},"documentation":{"id":5456,"nodeType":"StructuredDocumentation","src":"11032:385:12","text":"@notice Add the asset basis for this position.\n @param self the option position Id.\n @param legIndex the leg index of this position (in {0,1,2,3})\n @dev occupies the leftmost bit of the optionRatio 4 bits slot\n @dev The final mod: \"% 2\" = takes the rightmost bit of the pattern\n @return the tokenId with numerarire added to the incoming leg index"},"implemented":true,"kind":"function","modifiers":[],"name":"addAsset","nameLocation":"11431:8:12","parameters":{"id":5463,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5458,"mutability":"mutable","name":"self","nameLocation":"11457:4:12","nodeType":"VariableDeclaration","scope":5486,"src":"11449:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5457,"name":"uint256","nodeType":"ElementaryTypeName","src":"11449:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5460,"mutability":"mutable","name":"_asset","nameLocation":"11479:6:12","nodeType":"VariableDeclaration","scope":5486,"src":"11471:14:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5459,"name":"uint256","nodeType":"ElementaryTypeName","src":"11471:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5462,"mutability":"mutable","name":"legIndex","nameLocation":"11503:8:12","nodeType":"VariableDeclaration","scope":5486,"src":"11495:16:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5461,"name":"uint256","nodeType":"ElementaryTypeName","src":"11495:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"11439:78:12"},"returnParameters":{"id":5466,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5465,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":5486,"src":"11541:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5464,"name":"uint256","nodeType":"ElementaryTypeName","src":"11541:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"11540:9:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5519,"nodeType":"FunctionDefinition","src":"12020:262:12","nodes":[],"body":{"id":5518,"nodeType":"Block","src":"12160:122:12","nodes":[],"statements":[{"id":5517,"nodeType":"UncheckedBlock","src":"12170:106:12","statements":[{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5515,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5498,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5489,"src":"12201:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5513,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5503,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5501,"name":"_optionRatio","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5491,"src":"12217:12:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"%","rightExpression":{"hexValue":"313238","id":5502,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"12232:3:12","typeDescriptions":{"typeIdentifier":"t_rational_128_by_1","typeString":"int_const 128"},"value":"128"},"src":"12217:18:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5500,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"12209:7:12","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":5499,"name":"uint256","nodeType":"ElementaryTypeName","src":"12209:7:12","typeDescriptions":{}}},"id":5504,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"12209:27:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<<","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5511,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5509,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3634","id":5505,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"12241:2:12","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5508,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5506,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5493,"src":"12246:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"3438","id":5507,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"12257:2:12","typeDescriptions":{"typeIdentifier":"t_rational_48_by_1","typeString":"int_const 48"},"value":"48"},"src":"12246:13:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"12241:18:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"hexValue":"31","id":5510,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"12262:1:12","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"12241:22:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5512,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"12240:24:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"12209:55:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5514,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"12208:57:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"12201:64:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":5497,"id":5516,"nodeType":"Return","src":"12194:71:12"}]}]},"documentation":{"id":5487,"nodeType":"StructuredDocumentation","src":"11666:349:12","text":"@notice Add the number of contracts to leg index `legIndex`.\n @param self the option position Id\n @param legIndex the leg index of the position (in {0,1,2,3})\n @dev The final mod: \"% 128\" = takes the rightmost (2 ** 7 = 128) 7 bits of the pattern.\n @return the tokenId with optionRatio added to the incoming leg index"},"implemented":true,"kind":"function","modifiers":[],"name":"addOptionRatio","nameLocation":"12029:14:12","parameters":{"id":5494,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5489,"mutability":"mutable","name":"self","nameLocation":"12061:4:12","nodeType":"VariableDeclaration","scope":5519,"src":"12053:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5488,"name":"uint256","nodeType":"ElementaryTypeName","src":"12053:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5491,"mutability":"mutable","name":"_optionRatio","nameLocation":"12083:12:12","nodeType":"VariableDeclaration","scope":5519,"src":"12075:20:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5490,"name":"uint256","nodeType":"ElementaryTypeName","src":"12075:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5493,"mutability":"mutable","name":"legIndex","nameLocation":"12113:8:12","nodeType":"VariableDeclaration","scope":5519,"src":"12105:16:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5492,"name":"uint256","nodeType":"ElementaryTypeName","src":"12105:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"12043:84:12"},"returnParameters":{"id":5497,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5496,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":5519,"src":"12151:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5495,"name":"uint256","nodeType":"ElementaryTypeName","src":"12151:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"12150:9:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5550,"nodeType":"FunctionDefinition","src":"12694:238:12","nodes":[],"body":{"id":5549,"nodeType":"Block","src":"12824:108:12","nodes":[],"statements":[{"id":5548,"nodeType":"UncheckedBlock","src":"12834:92:12","statements":[{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5546,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5531,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5522,"src":"12865:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5544,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5534,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5532,"name":"_isLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5524,"src":"12874:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"%","rightExpression":{"hexValue":"32","id":5533,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"12884:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"src":"12874:11:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5535,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"12873:13:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<<","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5542,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5540,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3634","id":5536,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"12891:2:12","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5539,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5537,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5526,"src":"12896:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"3438","id":5538,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"12907:2:12","typeDescriptions":{"typeIdentifier":"t_rational_48_by_1","typeString":"int_const 48"},"value":"48"},"src":"12896:13:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"12891:18:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"hexValue":"38","id":5541,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"12912:1:12","typeDescriptions":{"typeIdentifier":"t_rational_8_by_1","typeString":"int_const 8"},"value":"8"},"src":"12891:22:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5543,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"12890:24:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"12873:41:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5545,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"12872:43:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"12865:50:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":5530,"id":5547,"nodeType":"Return","src":"12858:57:12"}]}]},"documentation":{"id":5520,"nodeType":"StructuredDocumentation","src":"12288:401:12","text":"@notice Add \"isLong\" parameter indicating whether a leg is long (isLong=1) or short (isLong=0)\n @notice returns 1 if the nth leg (leg index n-1) is a long position.\n @param self the option position Id\n @param _isLong whether the leg is long\n @param legIndex the leg index of this position (in {0,1,2,3})\n @return the tokenId with isLong added to its relevant leg"},"implemented":true,"kind":"function","modifiers":[],"name":"addIsLong","nameLocation":"12703:9:12","parameters":{"id":5527,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5522,"mutability":"mutable","name":"self","nameLocation":"12730:4:12","nodeType":"VariableDeclaration","scope":5550,"src":"12722:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5521,"name":"uint256","nodeType":"ElementaryTypeName","src":"12722:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5524,"mutability":"mutable","name":"_isLong","nameLocation":"12752:7:12","nodeType":"VariableDeclaration","scope":5550,"src":"12744:15:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5523,"name":"uint256","nodeType":"ElementaryTypeName","src":"12744:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5526,"mutability":"mutable","name":"legIndex","nameLocation":"12777:8:12","nodeType":"VariableDeclaration","scope":5550,"src":"12769:16:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5525,"name":"uint256","nodeType":"ElementaryTypeName","src":"12769:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"12712:79:12"},"returnParameters":{"id":5530,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5529,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":5550,"src":"12815:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5528,"name":"uint256","nodeType":"ElementaryTypeName","src":"12815:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"12814:9:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5583,"nodeType":"FunctionDefinition","src":"13264:254:12","nodes":[],"body":{"id":5582,"nodeType":"Block","src":"13400:118:12","nodes":[],"statements":[{"id":5581,"nodeType":"UncheckedBlock","src":"13410:102:12","statements":[{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5579,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5562,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5553,"src":"13441:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5577,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5567,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5565,"name":"_tokenType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5555,"src":"13457:10:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"%","rightExpression":{"hexValue":"32","id":5566,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"13470:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"src":"13457:14:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5564,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"13449:7:12","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":5563,"name":"uint256","nodeType":"ElementaryTypeName","src":"13449:7:12","typeDescriptions":{}}},"id":5568,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"13449:23:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<<","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5575,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5573,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3634","id":5569,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"13477:2:12","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5572,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5570,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5557,"src":"13482:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"3438","id":5571,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"13493:2:12","typeDescriptions":{"typeIdentifier":"t_rational_48_by_1","typeString":"int_const 48"},"value":"48"},"src":"13482:13:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"13477:18:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"hexValue":"39","id":5574,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"13498:1:12","typeDescriptions":{"typeIdentifier":"t_rational_9_by_1","typeString":"int_const 9"},"value":"9"},"src":"13477:22:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5576,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"13476:24:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"13449:51:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5578,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"13448:53:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"13441:60:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":5561,"id":5580,"nodeType":"Return","src":"13434:67:12"}]}]},"documentation":{"id":5551,"nodeType":"StructuredDocumentation","src":"12938:321:12","text":"@notice Add the type of token moved for a given leg (implies a call or put). Either Token0 or Token1.\n @param self the tokenId in the SFPM representing an option position\n @param legIndex the leg index of this position (in {0,1,2,3})\n @return the tokenId with tokenType added to its relevant leg."},"implemented":true,"kind":"function","modifiers":[],"name":"addTokenType","nameLocation":"13273:12:12","parameters":{"id":5558,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5553,"mutability":"mutable","name":"self","nameLocation":"13303:4:12","nodeType":"VariableDeclaration","scope":5583,"src":"13295:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5552,"name":"uint256","nodeType":"ElementaryTypeName","src":"13295:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5555,"mutability":"mutable","name":"_tokenType","nameLocation":"13325:10:12","nodeType":"VariableDeclaration","scope":5583,"src":"13317:18:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5554,"name":"uint256","nodeType":"ElementaryTypeName","src":"13317:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5557,"mutability":"mutable","name":"legIndex","nameLocation":"13353:8:12","nodeType":"VariableDeclaration","scope":5583,"src":"13345:16:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5556,"name":"uint256","nodeType":"ElementaryTypeName","src":"13345:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"13285:82:12"},"returnParameters":{"id":5561,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5560,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":5583,"src":"13391:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5559,"name":"uint256","nodeType":"ElementaryTypeName","src":"13391:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"13390:9:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5616,"nodeType":"FunctionDefinition","src":"13856:261:12","nodes":[],"body":{"id":5615,"nodeType":"Block","src":"13996:121:12","nodes":[],"statements":[{"id":5614,"nodeType":"UncheckedBlock","src":"14006:105:12","statements":[{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5612,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5595,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5586,"src":"14037:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5610,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5600,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5598,"name":"_riskPartner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5588,"src":"14053:12:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"%","rightExpression":{"hexValue":"34","id":5599,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"14068:1:12","typeDescriptions":{"typeIdentifier":"t_rational_4_by_1","typeString":"int_const 4"},"value":"4"},"src":"14053:16:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5597,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"14045:7:12","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":5596,"name":"uint256","nodeType":"ElementaryTypeName","src":"14045:7:12","typeDescriptions":{}}},"id":5601,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"14045:25:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<<","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5608,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5606,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3634","id":5602,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"14075:2:12","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5605,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5603,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5590,"src":"14080:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"3438","id":5604,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"14091:2:12","typeDescriptions":{"typeIdentifier":"t_rational_48_by_1","typeString":"int_const 48"},"value":"48"},"src":"14080:13:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"14075:18:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"hexValue":"3130","id":5607,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"14096:2:12","typeDescriptions":{"typeIdentifier":"t_rational_10_by_1","typeString":"int_const 10"},"value":"10"},"src":"14075:23:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5609,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"14074:25:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"14045:54:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5611,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"14044:56:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"14037:63:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":5594,"id":5613,"nodeType":"Return","src":"14030:70:12"}]}]},"documentation":{"id":5584,"nodeType":"StructuredDocumentation","src":"13524:327:12","text":"@notice Add the associated risk partner of the leg index (generally another leg in the overall position).\n @param self the tokenId in the SFPM representing an option position\n @param legIndex the leg index of this position (in {0,1,2,3})\n @return the tokenId with riskPartner added to its relevant leg."},"implemented":true,"kind":"function","modifiers":[],"name":"addRiskPartner","nameLocation":"13865:14:12","parameters":{"id":5591,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5586,"mutability":"mutable","name":"self","nameLocation":"13897:4:12","nodeType":"VariableDeclaration","scope":5616,"src":"13889:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5585,"name":"uint256","nodeType":"ElementaryTypeName","src":"13889:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5588,"mutability":"mutable","name":"_riskPartner","nameLocation":"13919:12:12","nodeType":"VariableDeclaration","scope":5616,"src":"13911:20:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5587,"name":"uint256","nodeType":"ElementaryTypeName","src":"13911:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5590,"mutability":"mutable","name":"legIndex","nameLocation":"13949:8:12","nodeType":"VariableDeclaration","scope":5616,"src":"13941:16:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5589,"name":"uint256","nodeType":"ElementaryTypeName","src":"13941:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"13879:84:12"},"returnParameters":{"id":5594,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5593,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":5616,"src":"13987:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5592,"name":"uint256","nodeType":"ElementaryTypeName","src":"13987:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"13986:9:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5652,"nodeType":"FunctionDefinition","src":"14424:264:12","nodes":[],"body":{"id":5651,"nodeType":"Block","src":"14552:136:12","nodes":[],"statements":[{"id":5650,"nodeType":"UncheckedBlock","src":"14562:120:12","statements":[{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5648,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5628,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5619,"src":"14593:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"arguments":[{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":5646,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_int256","typeString":"int256"},"id":5636,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":5633,"name":"_strike","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5621,"src":"14616:7:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int24","typeString":"int24"}],"id":5632,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"14609:6:12","typeDescriptions":{"typeIdentifier":"t_type$_t_int256_$","typeString":"type(int256)"},"typeName":{"id":5631,"name":"int256","nodeType":"ElementaryTypeName","src":"14609:6:12","typeDescriptions":{}}},"id":5634,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"14609:15:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"&","rightExpression":{"id":5635,"name":"BITMASK_INT24","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5214,"src":"14627:13:12","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"src":"14609:31:12","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"id":5637,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"14608:33:12","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}},"nodeType":"BinaryOperation","operator":"<<","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5644,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5642,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3634","id":5638,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"14646:2:12","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5641,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5639,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5623,"src":"14651:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"3438","id":5640,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"14662:2:12","typeDescriptions":{"typeIdentifier":"t_rational_48_by_1","typeString":"int_const 48"},"value":"48"},"src":"14651:13:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"14646:18:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"hexValue":"3132","id":5643,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"14667:2:12","typeDescriptions":{"typeIdentifier":"t_rational_12_by_1","typeString":"int_const 12"},"value":"12"},"src":"14646:23:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5645,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"14645:25:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"14608:62:12","typeDescriptions":{"typeIdentifier":"t_int256","typeString":"int256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int256","typeString":"int256"}],"id":5630,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"14600:7:12","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":5629,"name":"uint256","nodeType":"ElementaryTypeName","src":"14600:7:12","typeDescriptions":{}}},"id":5647,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"14600:71:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"14593:78:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":5627,"id":5649,"nodeType":"Return","src":"14586:85:12"}]}]},"documentation":{"id":5617,"nodeType":"StructuredDocumentation","src":"14123:296:12","text":"@notice Add the strike price tick of the nth leg (index `legIndex`).\n @param self the tokenId in the SFPM representing an option position.\n @param legIndex the leg index of this position (in {0,1,2,3})\n @return the tokenId with strike price tick added to its relevant leg"},"implemented":true,"kind":"function","modifiers":[],"name":"addStrike","nameLocation":"14433:9:12","parameters":{"id":5624,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5619,"mutability":"mutable","name":"self","nameLocation":"14460:4:12","nodeType":"VariableDeclaration","scope":5652,"src":"14452:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5618,"name":"uint256","nodeType":"ElementaryTypeName","src":"14452:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5621,"mutability":"mutable","name":"_strike","nameLocation":"14480:7:12","nodeType":"VariableDeclaration","scope":5652,"src":"14474:13:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":5620,"name":"int24","nodeType":"ElementaryTypeName","src":"14474:5:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"},{"constant":false,"id":5623,"mutability":"mutable","name":"legIndex","nameLocation":"14505:8:12","nodeType":"VariableDeclaration","scope":5652,"src":"14497:16:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5622,"name":"uint256","nodeType":"ElementaryTypeName","src":"14497:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"14442:77:12"},"returnParameters":{"id":5627,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5626,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":5652,"src":"14543:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5625,"name":"uint256","nodeType":"ElementaryTypeName","src":"14543:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"14542:9:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5688,"nodeType":"FunctionDefinition","src":"15045:332:12","nodes":[],"body":{"id":5687,"nodeType":"Block","src":"15171:206:12","nodes":[],"statements":[{"id":5686,"nodeType":"UncheckedBlock","src":"15261:110:12","statements":[{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5684,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5664,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5655,"src":"15292:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5682,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint24","typeString":"uint24"},"id":5672,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":5669,"name":"_width","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5657,"src":"15315:6:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_int24","typeString":"int24"}],"id":5668,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"15308:6:12","typeDescriptions":{"typeIdentifier":"t_type$_t_uint24_$","typeString":"type(uint24)"},"typeName":{"id":5667,"name":"uint24","nodeType":"ElementaryTypeName","src":"15308:6:12","typeDescriptions":{}}},"id":5670,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"15308:14:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}},"nodeType":"BinaryOperation","operator":"%","rightExpression":{"hexValue":"34303936","id":5671,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"15325:4:12","typeDescriptions":{"typeIdentifier":"t_rational_4096_by_1","typeString":"int_const 4096"},"value":"4096"},"src":"15308:21:12","typeDescriptions":{"typeIdentifier":"t_uint24","typeString":"uint24"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint24","typeString":"uint24"}],"id":5666,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"15300:7:12","typeDescriptions":{"typeIdentifier":"t_type$_t_uint256_$","typeString":"type(uint256)"},"typeName":{"id":5665,"name":"uint256","nodeType":"ElementaryTypeName","src":"15300:7:12","typeDescriptions":{}}},"id":5673,"isConstant":false,"isLValue":false,"isPure":false,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"15300:30:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<<","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5680,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5678,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3634","id":5674,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"15335:2:12","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5677,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5675,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5659,"src":"15340:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"hexValue":"3438","id":5676,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"15351:2:12","typeDescriptions":{"typeIdentifier":"t_rational_48_by_1","typeString":"int_const 48"},"value":"48"},"src":"15340:13:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"15335:18:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"hexValue":"3336","id":5679,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"15356:2:12","typeDescriptions":{"typeIdentifier":"t_rational_36_by_1","typeString":"int_const 36"},"value":"36"},"src":"15335:23:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5681,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"15334:25:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"15300:59:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5683,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"15299:61:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"15292:68:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":5663,"id":5685,"nodeType":"Return","src":"15285:75:12"}]}]},"documentation":{"id":5653,"nodeType":"StructuredDocumentation","src":"14694:346:12","text":"@notice Add the width of the nth leg (index `legIndex`). This is half the tick-range covered by the leg (tickUpper - tickLower)/2.\n @param self the tokenId in the SFPM representing an option position.\n @param legIndex the leg index of this position (in {0,1,2,3})\n @return the tokenId with width added to its relevant leg"},"implemented":true,"kind":"function","modifiers":[],"name":"addWidth","nameLocation":"15054:8:12","parameters":{"id":5660,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5655,"mutability":"mutable","name":"self","nameLocation":"15080:4:12","nodeType":"VariableDeclaration","scope":5688,"src":"15072:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5654,"name":"uint256","nodeType":"ElementaryTypeName","src":"15072:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5657,"mutability":"mutable","name":"_width","nameLocation":"15100:6:12","nodeType":"VariableDeclaration","scope":5688,"src":"15094:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":5656,"name":"int24","nodeType":"ElementaryTypeName","src":"15094:5:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"},{"constant":false,"id":5659,"mutability":"mutable","name":"legIndex","nameLocation":"15124:8:12","nodeType":"VariableDeclaration","scope":5688,"src":"15116:16:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5658,"name":"uint256","nodeType":"ElementaryTypeName","src":"15116:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"15062:76:12"},"returnParameters":{"id":5663,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5662,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":5688,"src":"15162:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5661,"name":"uint256","nodeType":"ElementaryTypeName","src":"15162:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"15161:9:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5769,"nodeType":"FunctionDefinition","src":"16002:717:12","nodes":[],"body":{"id":5768,"nodeType":"Block","src":"16294:425:12","nodes":[],"statements":[{"expression":{"id":5718,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":5712,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5710,"src":"16304:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":5714,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5691,"src":"16329:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":5715,"name":"_optionRatio","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5695,"src":"16335:12:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":5716,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5693,"src":"16349:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5713,"name":"addOptionRatio","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5519,"src":"16314:14:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":5717,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"16314:44:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"16304:54:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5719,"nodeType":"ExpressionStatement","src":"16304:54:12"},{"expression":{"id":5726,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":5720,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5710,"src":"16368:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":5722,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5710,"src":"16387:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":5723,"name":"_asset","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5697,"src":"16396:6:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":5724,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5693,"src":"16404:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5721,"name":"addAsset","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5486,"src":"16378:8:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":5725,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"16378:35:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"16368:45:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5727,"nodeType":"ExpressionStatement","src":"16368:45:12"},{"expression":{"id":5734,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":5728,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5710,"src":"16423:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":5730,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5710,"src":"16443:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":5731,"name":"_isLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5699,"src":"16452:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":5732,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5693,"src":"16461:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5729,"name":"addIsLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5550,"src":"16433:9:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":5733,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"16433:37:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"16423:47:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5735,"nodeType":"ExpressionStatement","src":"16423:47:12"},{"expression":{"id":5742,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":5736,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5710,"src":"16480:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":5738,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5710,"src":"16503:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":5739,"name":"_tokenType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5701,"src":"16512:10:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":5740,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5693,"src":"16524:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5737,"name":"addTokenType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5583,"src":"16490:12:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":5741,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"16490:43:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"16480:53:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5743,"nodeType":"ExpressionStatement","src":"16480:53:12"},{"expression":{"id":5750,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":5744,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5710,"src":"16543:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":5746,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5710,"src":"16568:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":5747,"name":"_riskPartner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5703,"src":"16577:12:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":5748,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5693,"src":"16591:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5745,"name":"addRiskPartner","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5616,"src":"16553:14:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,uint256,uint256) pure returns (uint256)"}},"id":5749,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"16553:47:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"16543:57:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5751,"nodeType":"ExpressionStatement","src":"16543:57:12"},{"expression":{"id":5758,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":5752,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5710,"src":"16610:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":5754,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5710,"src":"16630:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":5755,"name":"_strike","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5705,"src":"16639:7:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},{"id":5756,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5693,"src":"16648:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_int24","typeString":"int24"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5753,"name":"addStrike","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5652,"src":"16620:9:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_int24_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,int24,uint256) pure returns (uint256)"}},"id":5757,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"16620:37:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"16610:47:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5759,"nodeType":"ExpressionStatement","src":"16610:47:12"},{"expression":{"id":5766,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":5760,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5710,"src":"16667:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"arguments":[{"id":5762,"name":"tokenId","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5710,"src":"16686:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},{"id":5763,"name":"_width","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5707,"src":"16695:6:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},{"id":5764,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5693,"src":"16703:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"},{"typeIdentifier":"t_int24","typeString":"int24"},{"typeIdentifier":"t_uint256","typeString":"uint256"}],"id":5761,"name":"addWidth","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5688,"src":"16677:8:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_int24_$_t_uint256_$returns$_t_uint256_$","typeString":"function (uint256,int24,uint256) pure returns (uint256)"}},"id":5765,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"16677:35:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"16667:45:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5767,"nodeType":"ExpressionStatement","src":"16667:45:12"}]},"documentation":{"id":5689,"nodeType":"StructuredDocumentation","src":"15383:614:12","text":"@notice Add a leg to the tokenId.\n @param self the tokenId in the SFPM representing an option position.\n @param legIndex the leg index of this position (in {0,1,2,3})\n @param _optionRatio the relative size of the leg\n @param _asset the asset of the leg\n @param _isLong whether the leg is long\n @param _tokenType the type of token moved for the leg\n @param _riskPartner the associated risk partner of the leg\n @param _strike the strike price tick of the leg\n @param _width the width of the leg\n @return tokenId the tokenId with the leg added"},"implemented":true,"kind":"function","modifiers":[],"name":"addLeg","nameLocation":"16011:6:12","parameters":{"id":5708,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5691,"mutability":"mutable","name":"self","nameLocation":"16035:4:12","nodeType":"VariableDeclaration","scope":5769,"src":"16027:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5690,"name":"uint256","nodeType":"ElementaryTypeName","src":"16027:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5693,"mutability":"mutable","name":"legIndex","nameLocation":"16057:8:12","nodeType":"VariableDeclaration","scope":5769,"src":"16049:16:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5692,"name":"uint256","nodeType":"ElementaryTypeName","src":"16049:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5695,"mutability":"mutable","name":"_optionRatio","nameLocation":"16083:12:12","nodeType":"VariableDeclaration","scope":5769,"src":"16075:20:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5694,"name":"uint256","nodeType":"ElementaryTypeName","src":"16075:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5697,"mutability":"mutable","name":"_asset","nameLocation":"16113:6:12","nodeType":"VariableDeclaration","scope":5769,"src":"16105:14:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5696,"name":"uint256","nodeType":"ElementaryTypeName","src":"16105:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5699,"mutability":"mutable","name":"_isLong","nameLocation":"16137:7:12","nodeType":"VariableDeclaration","scope":5769,"src":"16129:15:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5698,"name":"uint256","nodeType":"ElementaryTypeName","src":"16129:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5701,"mutability":"mutable","name":"_tokenType","nameLocation":"16162:10:12","nodeType":"VariableDeclaration","scope":5769,"src":"16154:18:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5700,"name":"uint256","nodeType":"ElementaryTypeName","src":"16154:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5703,"mutability":"mutable","name":"_riskPartner","nameLocation":"16190:12:12","nodeType":"VariableDeclaration","scope":5769,"src":"16182:20:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5702,"name":"uint256","nodeType":"ElementaryTypeName","src":"16182:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5705,"mutability":"mutable","name":"_strike","nameLocation":"16218:7:12","nodeType":"VariableDeclaration","scope":5769,"src":"16212:13:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":5704,"name":"int24","nodeType":"ElementaryTypeName","src":"16212:5:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"},{"constant":false,"id":5707,"mutability":"mutable","name":"_width","nameLocation":"16241:6:12","nodeType":"VariableDeclaration","scope":5769,"src":"16235:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":5706,"name":"int24","nodeType":"ElementaryTypeName","src":"16235:5:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"}],"src":"16017:236:12"},"returnParameters":{"id":5711,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5710,"mutability":"mutable","name":"tokenId","nameLocation":"16285:7:12","nodeType":"VariableDeclaration","scope":5769,"src":"16277:15:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5709,"name":"uint256","nodeType":"ElementaryTypeName","src":"16277:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"16276:17:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5850,"nodeType":"FunctionDefinition","src":"17301:1649:12","nodes":[],"body":{"id":5849,"nodeType":"Block","src":"17372:1578:12","nodes":[],"statements":[{"id":5848,"nodeType":"UncheckedBlock","src":"17382:1562:12","statements":[{"assignments":[5778],"declarations":[{"constant":false,"id":5778,"mutability":"mutable","name":"optionRatios","nameLocation":"17677:12:12","nodeType":"VariableDeclaration","scope":5848,"src":"17669:20:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5777,"name":"uint256","nodeType":"ElementaryTypeName","src":"17669:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":5782,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5781,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5779,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5772,"src":"17692:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"&","rightExpression":{"id":5780,"name":"OPTION_RATIO_MASK","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5211,"src":"17699:17:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"17692:24:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"17669:47:12"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5787,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5783,"name":"optionRatios","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5778,"src":"18014:12:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"commonType":{"typeIdentifier":"t_rational_18446744073709551616_by_1","typeString":"int_const 18446744073709551616"},"id":5786,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"leftExpression":{"hexValue":"32","id":5784,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"18029:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"hexValue":"3634","id":5785,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"18034:2:12","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"src":"18029:7:12","typeDescriptions":{"typeIdentifier":"t_rational_18446744073709551616_by_1","typeString":"int_const 18446744073709551616"}},"src":"18014:22:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5797,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5793,"name":"optionRatios","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5778,"src":"18097:12:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"commonType":{"typeIdentifier":"t_rational_5192296858534827628530496329220096_by_1","typeString":"int_const 5192...(26 digits omitted)...0096"},"id":5796,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"leftExpression":{"hexValue":"32","id":5794,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"18112:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"hexValue":"313132","id":5795,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"18117:3:12","typeDescriptions":{"typeIdentifier":"t_rational_112_by_1","typeString":"int_const 112"},"value":"112"},"src":"18112:8:12","typeDescriptions":{"typeIdentifier":"t_rational_5192296858534827628530496329220096_by_1","typeString":"int_const 5192...(26 digits omitted)...0096"}},"src":"18097:23:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5807,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5803,"name":"optionRatios","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5778,"src":"18181:12:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"commonType":{"typeIdentifier":"t_rational_1461501637330902918203684832716283019655932542976_by_1","typeString":"int_const 1461...(41 digits omitted)...2976"},"id":5806,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"leftExpression":{"hexValue":"32","id":5804,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"18196:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"hexValue":"313630","id":5805,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"18201:3:12","typeDescriptions":{"typeIdentifier":"t_rational_160_by_1","typeString":"int_const 160"},"value":"160"},"src":"18196:8:12","typeDescriptions":{"typeIdentifier":"t_rational_1461501637330902918203684832716283019655932542976_by_1","typeString":"int_const 1461...(41 digits omitted)...2976"}},"src":"18181:23:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5817,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5813,"name":"optionRatios","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5778,"src":"18265:12:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"commonType":{"typeIdentifier":"t_rational_411376139330301510538742295639337626245683966408394965837152256_by_1","typeString":"int_const 4113...(55 digits omitted)...2256"},"id":5816,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"leftExpression":{"hexValue":"32","id":5814,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"18280:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"hexValue":"323038","id":5815,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"18285:3:12","typeDescriptions":{"typeIdentifier":"t_rational_208_by_1","typeString":"int_const 208"},"value":"208"},"src":"18280:8:12","typeDescriptions":{"typeIdentifier":"t_rational_411376139330301510538742295639337626245683966408394965837152256_by_1","typeString":"int_const 4113...(55 digits omitted)...2256"}},"src":"18265:23:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"id":5827,"nodeType":"Block","src":"18345:49:12","statements":[{"expression":{"id":5825,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":5823,"name":"optionRatios","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5778,"src":"18363:12:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"34","id":5824,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"18378:1:12","typeDescriptions":{"typeIdentifier":"t_rational_4_by_1","typeString":"int_const 4"},"value":"4"},"src":"18363:16:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5826,"nodeType":"ExpressionStatement","src":"18363:16:12"}]},"id":5828,"nodeType":"IfStatement","src":"18261:133:12","trueBody":{"id":5822,"nodeType":"Block","src":"18290:49:12","statements":[{"expression":{"id":5820,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":5818,"name":"optionRatios","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5778,"src":"18308:12:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"33","id":5819,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"18323:1:12","typeDescriptions":{"typeIdentifier":"t_rational_3_by_1","typeString":"int_const 3"},"value":"3"},"src":"18308:16:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5821,"nodeType":"ExpressionStatement","src":"18308:16:12"}]}},"id":5829,"nodeType":"IfStatement","src":"18177:217:12","trueBody":{"id":5812,"nodeType":"Block","src":"18206:49:12","statements":[{"expression":{"id":5810,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":5808,"name":"optionRatios","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5778,"src":"18224:12:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"32","id":5809,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"18239:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"src":"18224:16:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5811,"nodeType":"ExpressionStatement","src":"18224:16:12"}]}},"id":5830,"nodeType":"IfStatement","src":"18093:301:12","trueBody":{"id":5802,"nodeType":"Block","src":"18122:49:12","statements":[{"expression":{"id":5800,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":5798,"name":"optionRatios","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5778,"src":"18140:12:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"31","id":5799,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"18155:1:12","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"18140:16:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5801,"nodeType":"ExpressionStatement","src":"18140:16:12"}]}},"id":5831,"nodeType":"IfStatement","src":"18010:384:12","trueBody":{"id":5792,"nodeType":"Block","src":"18038:49:12","statements":[{"expression":{"id":5790,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":5788,"name":"optionRatios","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5778,"src":"18056:12:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"30","id":5789,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"18071:1:12","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"18056:16:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5791,"nodeType":"ExpressionStatement","src":"18056:16:12"}]}},{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5846,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5832,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5772,"src":"18864:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"^","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5844,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5841,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5833,"name":"LONG_MASK","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5205,"src":"18873:9:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">>","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5839,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3438","id":5834,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"18887:2:12","typeDescriptions":{"typeIdentifier":"t_rational_48_by_1","typeString":"int_const 48"},"value":"48"},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5837,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"34","id":5835,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"18893:1:12","typeDescriptions":{"typeIdentifier":"t_rational_4_by_1","typeString":"int_const 4"},"value":"4"},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":5836,"name":"optionRatios","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5778,"src":"18897:12:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"18893:16:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5838,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"18892:18:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"18887:23:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5840,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"18886:25:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"18873:38:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5842,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"18872:40:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"&","rightExpression":{"id":5843,"name":"CLEAR_POOLID_MASK","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5208,"src":"18915:17:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"18872:60:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":5845,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"18871:62:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"18864:69:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":5776,"id":5847,"nodeType":"Return","src":"18857:76:12"}]}]},"documentation":{"id":5770,"nodeType":"StructuredDocumentation","src":"16904:392:12","text":"@notice Flip all the `isLong` positions in the legs in the `tokenId` option position.\n @dev uses XOR on existing isLong bits.\n @dev useful during burning an option position. So we need to take an existing tokenId but now burn it.\n The way to do this is to simply flip it to a short instead.\n @param self the tokenId in the SFPM representing an option position."},"implemented":true,"kind":"function","modifiers":[],"name":"flipToBurnToken","nameLocation":"17310:15:12","parameters":{"id":5773,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5772,"mutability":"mutable","name":"self","nameLocation":"17334:4:12","nodeType":"VariableDeclaration","scope":5850,"src":"17326:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5771,"name":"uint256","nodeType":"ElementaryTypeName","src":"17326:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"17325:14:12"},"returnParameters":{"id":5776,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5775,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":5850,"src":"17363:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5774,"name":"uint256","nodeType":"ElementaryTypeName","src":"17363:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"17362:9:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5880,"nodeType":"FunctionDefinition","src":"19259:189:12","nodes":[],"body":{"id":5879,"nodeType":"Block","src":"19325:123:12","nodes":[],"statements":[{"id":5878,"nodeType":"UncheckedBlock","src":"19335:107:12","statements":[{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5876,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5871,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5866,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"hexValue":"30","id":5860,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"19378:1:12","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"expression":{"id":5858,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5853,"src":"19366:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5859,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"19371:6:12","memberName":"isLong","nodeType":"MemberAccess","referencedDeclaration":5317,"src":"19366:11:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":5861,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"19366:14:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"arguments":[{"hexValue":"31","id":5864,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"19395:1:12","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"}],"expression":{"id":5862,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5853,"src":"19383:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5863,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"19388:6:12","memberName":"isLong","nodeType":"MemberAccess","referencedDeclaration":5317,"src":"19383:11:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":5865,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"19383:14:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"19366:31:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"arguments":[{"hexValue":"32","id":5869,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"19412:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"}],"expression":{"id":5867,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5853,"src":"19400:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5868,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"19405:6:12","memberName":"isLong","nodeType":"MemberAccess","referencedDeclaration":5317,"src":"19400:11:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":5870,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"19400:14:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"19366:48:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"arguments":[{"hexValue":"33","id":5874,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"19429:1:12","typeDescriptions":{"typeIdentifier":"t_rational_3_by_1","typeString":"int_const 3"},"value":"3"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_3_by_1","typeString":"int_const 3"}],"expression":{"id":5872,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5853,"src":"19417:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5873,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"19422:6:12","memberName":"isLong","nodeType":"MemberAccess","referencedDeclaration":5317,"src":"19417:11:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":5875,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"19417:14:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"19366:65:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":5857,"id":5877,"nodeType":"Return","src":"19359:72:12"}]}]},"documentation":{"id":5851,"nodeType":"StructuredDocumentation","src":"18956:298:12","text":"@notice Get the number of longs in this option position.\n @notice count the number of legs (out of a maximum of 4) that are long positions.\n @param self the tokenId in the SFPM representing an option position.\n @return the number of long positions (in the range {0,...,4})."},"implemented":true,"kind":"function","modifiers":[],"name":"countLongs","nameLocation":"19268:10:12","parameters":{"id":5854,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5853,"mutability":"mutable","name":"self","nameLocation":"19287:4:12","nodeType":"VariableDeclaration","scope":5880,"src":"19279:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5852,"name":"uint256","nodeType":"ElementaryTypeName","src":"19279:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"19278:14:12"},"returnParameters":{"id":5857,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5856,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":5880,"src":"19316:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5855,"name":"uint256","nodeType":"ElementaryTypeName","src":"19316:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"19315:9:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":5976,"nodeType":"FunctionDefinition","src":"19991:1526:12","nodes":[],"body":{"id":5975,"nodeType":"Block","src":"20152:1365:12","nodes":[],"statements":[{"id":5974,"nodeType":"UncheckedBlock","src":"20162:1349:12","statements":[{"assignments":[5895],"declarations":[{"constant":false,"id":5895,"mutability":"mutable","name":"selfWidth","nameLocation":"20192:9:12","nodeType":"VariableDeclaration","scope":5974,"src":"20186:15:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":5894,"name":"int24","nodeType":"ElementaryTypeName","src":"20186:5:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"}],"id":5900,"initialValue":{"arguments":[{"id":5898,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5885,"src":"20215:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":5896,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5883,"src":"20204:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5897,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"20209:5:12","memberName":"width","nodeType":"MemberAccess","referencedDeclaration":5436,"src":"20204:10:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_int24_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (int24)"}},"id":5899,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"20204:20:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"VariableDeclarationStatement","src":"20186:38:12"},{"assignments":[5902],"declarations":[{"constant":false,"id":5902,"mutability":"mutable","name":"selfStrike","nameLocation":"20244:10:12","nodeType":"VariableDeclaration","scope":5974,"src":"20238:16:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":5901,"name":"int24","nodeType":"ElementaryTypeName","src":"20238:5:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"}],"id":5907,"initialValue":{"arguments":[{"id":5905,"name":"legIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5885,"src":"20269:8:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":5903,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5883,"src":"20257:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":5904,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"20262:6:12","memberName":"strike","nodeType":"MemberAccess","referencedDeclaration":5404,"src":"20257:11:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_int24_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (int24)"}},"id":5906,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"20257:21:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"VariableDeclarationStatement","src":"20238:40:12"},{"assignments":[5909],"declarations":[{"constant":false,"id":5909,"mutability":"mutable","name":"minTick","nameLocation":"20555:7:12","nodeType":"VariableDeclaration","scope":5974,"src":"20549:13:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":5908,"name":"int24","nodeType":"ElementaryTypeName","src":"20549:5:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"}],"id":5917,"initialValue":{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":5916,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":5913,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":5910,"name":"Constants","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2465,"src":"20566:9:12","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Constants_$2465_$","typeString":"type(library Constants)"}},"id":5911,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"20576:15:12","memberName":"MIN_V3POOL_TICK","nodeType":"MemberAccess","referencedDeclaration":2450,"src":"20566:25:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":5912,"name":"tickSpacing","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5887,"src":"20594:11:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"src":"20566:39:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}}],"id":5914,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"20565:41:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":5915,"name":"tickSpacing","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5887,"src":"20609:11:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"src":"20565:55:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"VariableDeclarationStatement","src":"20549:71:12"},{"assignments":[5919],"declarations":[{"constant":false,"id":5919,"mutability":"mutable","name":"maxTick","nameLocation":"20640:7:12","nodeType":"VariableDeclaration","scope":5974,"src":"20634:13:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":5918,"name":"int24","nodeType":"ElementaryTypeName","src":"20634:5:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"}],"id":5927,"initialValue":{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":5926,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":5923,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"expression":{"id":5920,"name":"Constants","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2465,"src":"20651:9:12","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Constants_$2465_$","typeString":"type(library Constants)"}},"id":5921,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"20661:15:12","memberName":"MAX_V3POOL_TICK","nodeType":"MemberAccess","referencedDeclaration":2453,"src":"20651:25:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"id":5922,"name":"tickSpacing","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5887,"src":"20679:11:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"src":"20651:39:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}}],"id":5924,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"20650:41:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":5925,"name":"tickSpacing","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5887,"src":"20694:11:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"src":"20650:55:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"VariableDeclarationStatement","src":"20634:71:12"},{"assignments":[5929],"declarations":[{"constant":false,"id":5929,"mutability":"mutable","name":"oneSidedRange","nameLocation":"20830:13:12","nodeType":"VariableDeclaration","scope":5974,"src":"20824:19:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":5928,"name":"int24","nodeType":"ElementaryTypeName","src":"20824:5:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"}],"id":5936,"initialValue":{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":5935,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":5932,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5930,"name":"selfWidth","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5895,"src":"20847:9:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":5931,"name":"tickSpacing","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5887,"src":"20859:11:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"src":"20847:23:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}}],"id":5933,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"20846:25:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"/","rightExpression":{"hexValue":"32","id":5934,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"20874:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"src":"20846:29:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"VariableDeclarationStatement","src":"20824:51:12"},{"expression":{"id":5947,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"components":[{"id":5937,"name":"legLowerTick","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5890,"src":"20891:12:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},{"id":5938,"name":"legUpperTick","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5892,"src":"20905:12:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}}],"id":5939,"isConstant":false,"isInlineArray":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"TupleExpression","src":"20890:28:12","typeDescriptions":{"typeIdentifier":"t_tuple$_t_int24_$_t_int24_$","typeString":"tuple(int24,int24)"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"components":[{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":5942,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5940,"name":"selfStrike","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5902,"src":"20922:10:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"-","rightExpression":{"id":5941,"name":"oneSidedRange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5929,"src":"20935:13:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"src":"20922:26:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":5945,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5943,"name":"selfStrike","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5902,"src":"20950:10:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"id":5944,"name":"oneSidedRange","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5929,"src":"20963:13:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"src":"20950:26:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}}],"id":5946,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"20921:56:12","typeDescriptions":{"typeIdentifier":"t_tuple$_t_int24_$_t_int24_$","typeString":"tuple(int24,int24)"}},"src":"20890:87:12","typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":5948,"nodeType":"ExpressionStatement","src":"20890:87:12"},{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":5967,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":5963,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":5959,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":5953,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":5951,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5949,"name":"legLowerTick","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5890,"src":"21282:12:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"%","rightExpression":{"id":5950,"name":"tickSpacing","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5887,"src":"21297:11:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"src":"21282:26:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":5952,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"21312:1:12","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"21282:31:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":5958,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":5956,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5954,"name":"legUpperTick","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5892,"src":"21333:12:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"%","rightExpression":{"id":5955,"name":"tickSpacing","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5887,"src":"21348:11:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"src":"21333:26:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":5957,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"21363:1:12","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"21333:31:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"21282:82:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":5962,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5960,"name":"legLowerTick","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5890,"src":"21384:12:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"id":5961,"name":"minTick","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5909,"src":"21399:7:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"src":"21384:22:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"21282:124:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":5966,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5964,"name":"legUpperTick","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5892,"src":"21426:12:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":">","rightExpression":{"id":5965,"name":"maxTick","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5919,"src":"21441:7:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"src":"21426:22:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"21282:166:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":5973,"nodeType":"IfStatement","src":"21261:239:12","trueBody":{"errorCall":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":5968,"name":"Errors","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2516,"src":"21470:6:12","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Errors_$2516_$","typeString":"type(library Errors)"}},"id":5970,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"21477:21:12","memberName":"TicksNotInitializable","nodeType":"MemberAccess","referencedDeclaration":2509,"src":"21470:28:12","typeDescriptions":{"typeIdentifier":"t_function_error_pure$__$returns$__$","typeString":"function () pure"}},"id":5971,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"21470:30:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":5972,"nodeType":"RevertStatement","src":"21463:37:12"}}]}]},"documentation":{"id":5881,"nodeType":"StructuredDocumentation","src":"19454:532:12","text":"@notice Get the option position's nth leg's (index `legIndex`) tick ranges (lower, upper).\n @dev NOTE does not extract liquidity which is the third piece of information in a LiquidityChunk.\n @param self the option position id.\n @param legIndex the leg index of the position (in {0,1,2,3}).\n @param tickSpacing the tick spacing of the underlying Univ3 pool.\n @return legLowerTick the lower tick of the leg/liquidity chunk.\n @return legUpperTick the upper tick of the leg/liquidity chunk."},"implemented":true,"kind":"function","modifiers":[],"name":"asTicks","nameLocation":"20000:7:12","parameters":{"id":5888,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5883,"mutability":"mutable","name":"self","nameLocation":"20025:4:12","nodeType":"VariableDeclaration","scope":5976,"src":"20017:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5882,"name":"uint256","nodeType":"ElementaryTypeName","src":"20017:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5885,"mutability":"mutable","name":"legIndex","nameLocation":"20047:8:12","nodeType":"VariableDeclaration","scope":5976,"src":"20039:16:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5884,"name":"uint256","nodeType":"ElementaryTypeName","src":"20039:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":5887,"mutability":"mutable","name":"tickSpacing","nameLocation":"20071:11:12","nodeType":"VariableDeclaration","scope":5976,"src":"20065:17:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":5886,"name":"int24","nodeType":"ElementaryTypeName","src":"20065:5:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"}],"src":"20007:81:12"},"returnParameters":{"id":5893,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5890,"mutability":"mutable","name":"legLowerTick","nameLocation":"20118:12:12","nodeType":"VariableDeclaration","scope":5976,"src":"20112:18:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":5889,"name":"int24","nodeType":"ElementaryTypeName","src":"20112:5:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"},{"constant":false,"id":5892,"mutability":"mutable","name":"legUpperTick","nameLocation":"20138:12:12","nodeType":"VariableDeclaration","scope":5976,"src":"20132:18:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"},"typeName":{"id":5891,"name":"int24","nodeType":"ElementaryTypeName","src":"20132:5:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"visibility":"internal"}],"src":"20111:40:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":6029,"nodeType":"FunctionDefinition","src":"21915:752:12","nodes":[],"body":{"id":6028,"nodeType":"Block","src":"21980:687:12","nodes":[],"statements":[{"assignments":[5985],"declarations":[{"constant":false,"id":5985,"mutability":"mutable","name":"optionRatios","nameLocation":"22053:12:12","nodeType":"VariableDeclaration","scope":6028,"src":"22045:20:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5984,"name":"uint256","nodeType":"ElementaryTypeName","src":"22045:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":5989,"initialValue":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5988,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5986,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5979,"src":"22068:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"&","rightExpression":{"id":5987,"name":"OPTION_RATIO_MASK","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5211,"src":"22075:17:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"22068:24:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"22045:47:12"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":5994,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5990,"name":"optionRatios","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5985,"src":"22382:12:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"commonType":{"typeIdentifier":"t_rational_18446744073709551616_by_1","typeString":"int_const 18446744073709551616"},"id":5993,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"leftExpression":{"hexValue":"32","id":5991,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"22397:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"hexValue":"3634","id":5992,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"22402:2:12","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"src":"22397:7:12","typeDescriptions":{"typeIdentifier":"t_rational_18446744073709551616_by_1","typeString":"int_const 18446744073709551616"}},"src":"22382:22:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6002,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":5998,"name":"optionRatios","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5985,"src":"22449:12:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"commonType":{"typeIdentifier":"t_rational_5192296858534827628530496329220096_by_1","typeString":"int_const 5192...(26 digits omitted)...0096"},"id":6001,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"leftExpression":{"hexValue":"32","id":5999,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"22464:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"hexValue":"313132","id":6000,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"22469:3:12","typeDescriptions":{"typeIdentifier":"t_rational_112_by_1","typeString":"int_const 112"},"value":"112"},"src":"22464:8:12","typeDescriptions":{"typeIdentifier":"t_rational_5192296858534827628530496329220096_by_1","typeString":"int_const 5192...(26 digits omitted)...0096"}},"src":"22449:23:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6010,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":6006,"name":"optionRatios","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5985,"src":"22517:12:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"commonType":{"typeIdentifier":"t_rational_1461501637330902918203684832716283019655932542976_by_1","typeString":"int_const 1461...(41 digits omitted)...2976"},"id":6009,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"leftExpression":{"hexValue":"32","id":6007,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"22532:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"hexValue":"313630","id":6008,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"22537:3:12","typeDescriptions":{"typeIdentifier":"t_rational_160_by_1","typeString":"int_const 160"},"value":"160"},"src":"22532:8:12","typeDescriptions":{"typeIdentifier":"t_rational_1461501637330902918203684832716283019655932542976_by_1","typeString":"int_const 1461...(41 digits omitted)...2976"}},"src":"22517:23:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"falseBody":{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6018,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":6014,"name":"optionRatios","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":5985,"src":"22585:12:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"commonType":{"typeIdentifier":"t_rational_411376139330301510538742295639337626245683966408394965837152256_by_1","typeString":"int_const 4113...(55 digits omitted)...2256"},"id":6017,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"leftExpression":{"hexValue":"32","id":6015,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"22600:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"nodeType":"BinaryOperation","operator":"**","rightExpression":{"hexValue":"323038","id":6016,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"22605:3:12","typeDescriptions":{"typeIdentifier":"t_rational_208_by_1","typeString":"int_const 208"},"value":"208"},"src":"22600:8:12","typeDescriptions":{"typeIdentifier":"t_rational_411376139330301510538742295639337626245683966408394965837152256_by_1","typeString":"int_const 4113...(55 digits omitted)...2256"}},"src":"22585:23:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":6022,"nodeType":"IfStatement","src":"22581:62:12","trueBody":{"id":6021,"nodeType":"Block","src":"22610:33:12","statements":[{"expression":{"hexValue":"33","id":6019,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"22631:1:12","typeDescriptions":{"typeIdentifier":"t_rational_3_by_1","typeString":"int_const 3"},"value":"3"},"functionReturnParameters":5983,"id":6020,"nodeType":"Return","src":"22624:8:12"}]}},"id":6023,"nodeType":"IfStatement","src":"22513:130:12","trueBody":{"id":6013,"nodeType":"Block","src":"22542:33:12","statements":[{"expression":{"hexValue":"32","id":6011,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"22563:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"functionReturnParameters":5983,"id":6012,"nodeType":"Return","src":"22556:8:12"}]}},"id":6024,"nodeType":"IfStatement","src":"22445:198:12","trueBody":{"id":6005,"nodeType":"Block","src":"22474:33:12","statements":[{"expression":{"hexValue":"31","id":6003,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"22495:1:12","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"functionReturnParameters":5983,"id":6004,"nodeType":"Return","src":"22488:8:12"}]}},"id":6025,"nodeType":"IfStatement","src":"22378:265:12","trueBody":{"id":5997,"nodeType":"Block","src":"22406:33:12","statements":[{"expression":{"hexValue":"30","id":5995,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"22427:1:12","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"functionReturnParameters":5983,"id":5996,"nodeType":"Return","src":"22420:8:12"}]}},{"expression":{"hexValue":"34","id":6026,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"22659:1:12","typeDescriptions":{"typeIdentifier":"t_rational_4_by_1","typeString":"int_const 4"},"value":"4"},"functionReturnParameters":5983,"id":6027,"nodeType":"Return","src":"22652:8:12"}]},"documentation":{"id":5977,"nodeType":"StructuredDocumentation","src":"21523:387:12","text":"@notice Return the number of active legs in the option position.\n @param self the option position Id (tokenId).\n @dev ASSUMPTION: There is at least 1 leg in this option position.\n @dev ASSUMPTION: For any leg, the option ratio is always > 0 (the leg always has a number of contracts associated with it).\n @return the number of legs in the option position."},"implemented":true,"kind":"function","modifiers":[],"name":"countLegs","nameLocation":"21924:9:12","parameters":{"id":5980,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5979,"mutability":"mutable","name":"self","nameLocation":"21942:4:12","nodeType":"VariableDeclaration","scope":6029,"src":"21934:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5978,"name":"uint256","nodeType":"ElementaryTypeName","src":"21934:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"21933:14:12"},"returnParameters":{"id":5983,"nodeType":"ParameterList","parameters":[{"constant":false,"id":5982,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":6029,"src":"21971:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":5981,"name":"uint256","nodeType":"ElementaryTypeName","src":"21971:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"21970:9:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":6074,"nodeType":"FunctionDefinition","src":"23349:576:12","nodes":[],"body":{"id":6073,"nodeType":"Block","src":"23424:501:12","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6041,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":6039,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6034,"src":"23438:1:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":6040,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"23443:1:12","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"23438:6:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":6046,"nodeType":"IfStatement","src":"23434:108:12","trueBody":{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6044,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":6042,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6032,"src":"23465:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"&","rightExpression":{"hexValue":"30784646464646464646464646465f4646464646464646464646465f4646464646464646464646465f3030303030303030303030305f46464646464646464646464646464646","id":6043,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"23472:70:12","typeDescriptions":{"typeIdentifier":"t_rational_115792089237316195423570985008687907853269979473343705504648402221490509971455_by_1","typeString":"int_const 1157...(70 digits omitted)...1455"},"value":"0xFFFFFFFFFFFF_FFFFFFFFFFFF_FFFFFFFFFFFF_000000000000_FFFFFFFFFFFFFFFF"},"src":"23465:77:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":6038,"id":6045,"nodeType":"Return","src":"23458:84:12"}},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6049,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":6047,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6034,"src":"23556:1:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"31","id":6048,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"23561:1:12","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"23556:6:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":6054,"nodeType":"IfStatement","src":"23552:108:12","trueBody":{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6052,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":6050,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6032,"src":"23583:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"&","rightExpression":{"hexValue":"30784646464646464646464646465f4646464646464646464646465f3030303030303030303030305f4646464646464646464646465f46464646464646464646464646464646","id":6051,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"23590:70:12","typeDescriptions":{"typeIdentifier":"t_rational_115792089237316195423570985007226406215939086939733737741568929518753526317055_by_1","typeString":"int_const 1157...(70 digits omitted)...7055"},"value":"0xFFFFFFFFFFFF_FFFFFFFFFFFF_000000000000_FFFFFFFFFFFF_FFFFFFFFFFFFFFFF"},"src":"23583:77:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":6038,"id":6053,"nodeType":"Return","src":"23576:84:12"}},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6057,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":6055,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6034,"src":"23674:1:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"32","id":6056,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"23679:1:12","typeDescriptions":{"typeIdentifier":"t_rational_2_by_1","typeString":"int_const 2"},"value":"2"},"src":"23674:6:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":6062,"nodeType":"IfStatement","src":"23670:108:12","trueBody":{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6060,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":6058,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6032,"src":"23701:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"&","rightExpression":{"hexValue":"30784646464646464646464646465f3030303030303030303030305f4646464646464646464646465f4646464646464646464646465f46464646464646464646464646464646","id":6059,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"23708:70:12","typeDescriptions":{"typeIdentifier":"t_rational_115792089237315784047431654708638870748305248246218003188207458632603225030655_by_1","typeString":"int_const 1157...(70 digits omitted)...0655"},"value":"0xFFFFFFFFFFFF_000000000000_FFFFFFFFFFFF_FFFFFFFFFFFF_FFFFFFFFFFFFFFFF"},"src":"23701:77:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":6038,"id":6061,"nodeType":"Return","src":"23694:84:12"}},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6065,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":6063,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6034,"src":"23792:1:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"33","id":6064,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"23797:1:12","typeDescriptions":{"typeIdentifier":"t_rational_3_by_1","typeString":"int_const 3"},"value":"3"},"src":"23792:6:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":6070,"nodeType":"IfStatement","src":"23788:108:12","trueBody":{"expression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6068,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":6066,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6032,"src":"23819:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"&","rightExpression":{"hexValue":"30783030303030303030303030305f4646464646464646464646465f4646464646464646464646465f4646464646464646464646465f46464646464646464646464646464646","id":6067,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"23826:70:12","typeDescriptions":{"typeIdentifier":"t_rational_411376139330301510538742295639337626245683966408394965837152255_by_1","typeString":"int_const 4113...(55 digits omitted)...2255"},"value":"0x000000000000_FFFFFFFFFFFF_FFFFFFFFFFFF_FFFFFFFFFFFF_FFFFFFFFFFFFFFFF"},"src":"23819:77:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":6038,"id":6069,"nodeType":"Return","src":"23812:84:12"}},{"expression":{"id":6071,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6032,"src":"23914:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"functionReturnParameters":6038,"id":6072,"nodeType":"Return","src":"23907:11:12"}]},"documentation":{"id":6030,"nodeType":"StructuredDocumentation","src":"22673:671:12","text":"@notice Clear a leg in an option position with index `i`.\n @dev set bits of the leg to zero. Also sets the optionRatio and asset to zero of that leg.\n @dev NOTE it's important that the caller fills in the leg details after.\n @dev  - optionRatio is zeroed\n @dev  - asset is zeroed\n @dev  - width is zeroed\n @dev  - strike is zeroed\n @dev  - tokenType is zeroed\n @dev  - isLong is zeroed\n @dev  - riskPartner is zeroed\n @param self the tokenId to reset the leg of\n @param i the leg index to reset, in {0,1,2,3}\n @return `self` with the `i`th leg zeroed including optionRatio and asset."},"implemented":true,"kind":"function","modifiers":[],"name":"clearLeg","nameLocation":"23358:8:12","parameters":{"id":6035,"nodeType":"ParameterList","parameters":[{"constant":false,"id":6032,"mutability":"mutable","name":"self","nameLocation":"23375:4:12","nodeType":"VariableDeclaration","scope":6074,"src":"23367:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":6031,"name":"uint256","nodeType":"ElementaryTypeName","src":"23367:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"},{"constant":false,"id":6034,"mutability":"mutable","name":"i","nameLocation":"23389:1:12","nodeType":"VariableDeclaration","scope":6074,"src":"23381:9:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":6033,"name":"uint256","nodeType":"ElementaryTypeName","src":"23381:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"23366:25:12"},"returnParameters":{"id":6038,"nodeType":"ParameterList","parameters":[{"constant":false,"id":6037,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":6074,"src":"23415:7:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":6036,"name":"uint256","nodeType":"ElementaryTypeName","src":"23415:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"23414:9:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"},{"id":6291,"nodeType":"FunctionDefinition","src":"24395:3405:12","nodes":[],"body":{"id":6290,"nodeType":"Block","src":"24458:3342:12","nodes":[],"statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6087,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"hexValue":"30","id":6084,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"24489:1:12","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"expression":{"id":6082,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6077,"src":"24472:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":6083,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"24477:11:12","memberName":"optionRatio","nodeType":"MemberAccess","referencedDeclaration":5288,"src":"24472:16:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":6085,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"24472:19:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":6086,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"24495:1:12","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"24472:24:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":6094,"nodeType":"IfStatement","src":"24468:70:12","trueBody":{"errorCall":{"arguments":[{"hexValue":"31","id":6091,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"24536:1:12","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"}],"expression":{"id":6088,"name":"Errors","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2516,"src":"24505:6:12","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Errors_$2516_$","typeString":"type(library Errors)"}},"id":6090,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"24512:23:12","memberName":"InvalidTokenIdParameter","nodeType":"MemberAccess","referencedDeclaration":2482,"src":"24505:30:12","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_uint256_$returns$__$","typeString":"function (uint256) pure"}},"id":6092,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"24505:33:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":6093,"nodeType":"RevertStatement","src":"24498:40:12"}},{"id":6285,"nodeType":"UncheckedBlock","src":"24617:3143:12","statements":[{"body":{"id":6283,"nodeType":"Block","src":"24673:3051:12","statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6110,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":6107,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6096,"src":"24712:1:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":6105,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6077,"src":"24695:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":6106,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"24700:11:12","memberName":"optionRatio","nodeType":"MemberAccess","referencedDeclaration":5288,"src":"24695:16:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":6108,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"24695:19:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":6109,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"24718:1:12","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"24695:24:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":6131,"nodeType":"IfStatement","src":"24691:455:12","trueBody":{"id":6130,"nodeType":"Block","src":"24721:425:12","statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6121,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6118,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":6111,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6077,"src":"24985:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":">>","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6116,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3634","id":6112,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"24994:2:12","typeDescriptions":{"typeIdentifier":"t_rational_64_by_1","typeString":"int_const 64"},"value":"64"},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6115,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"hexValue":"3438","id":6113,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"24999:2:12","typeDescriptions":{"typeIdentifier":"t_rational_48_by_1","typeString":"int_const 48"},"value":"48"},"nodeType":"BinaryOperation","operator":"*","rightExpression":{"id":6114,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6096,"src":"25004:1:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"24999:6:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"24994:11:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":6117,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"24993:13:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"24985:21:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"id":6119,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"24984:23:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"hexValue":"30","id":6120,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"25011:1:12","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"24984:28:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":6128,"nodeType":"IfStatement","src":"24980:74:12","trueBody":{"errorCall":{"arguments":[{"hexValue":"31","id":6125,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"25052:1:12","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"}],"expression":{"id":6122,"name":"Errors","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2516,"src":"25021:6:12","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Errors_$2516_$","typeString":"type(library Errors)"}},"id":6124,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"25028:23:12","memberName":"InvalidTokenIdParameter","nodeType":"MemberAccess","referencedDeclaration":2482,"src":"25021:30:12","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_uint256_$returns$__$","typeString":"function (uint256) pure"}},"id":6126,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"25021:33:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":6127,"nodeType":"RevertStatement","src":"25014:40:12"}},{"id":6129,"nodeType":"Break","src":"25077:5:12"}]}},{"condition":{"components":[{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":6137,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":6134,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6096,"src":"25301:1:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":6132,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6077,"src":"25290:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":6133,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"25295:5:12","memberName":"width","nodeType":"MemberAccess","referencedDeclaration":5436,"src":"25290:10:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_int24_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (int24)"}},"id":6135,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"25290:13:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"30","id":6136,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"25307:1:12","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"src":"25290:18:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"id":6138,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"25289:20:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":6145,"nodeType":"IfStatement","src":"25285:66:12","trueBody":{"errorCall":{"arguments":[{"hexValue":"35","id":6142,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"25349:1:12","typeDescriptions":{"typeIdentifier":"t_rational_5_by_1","typeString":"int_const 5"},"value":"5"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_5_by_1","typeString":"int_const 5"}],"expression":{"id":6139,"name":"Errors","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2516,"src":"25318:6:12","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Errors_$2516_$","typeString":"type(library Errors)"}},"id":6141,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"25325:23:12","memberName":"InvalidTokenIdParameter","nodeType":"MemberAccess","referencedDeclaration":2482,"src":"25318:30:12","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_uint256_$returns$__$","typeString":"function (uint256) pure"}},"id":6143,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"25318:33:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":6144,"nodeType":"RevertStatement","src":"25311:40:12"}},{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":6162,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":6152,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":6148,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6096,"src":"25464:1:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":6146,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6077,"src":"25452:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":6147,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"25457:6:12","memberName":"strike","nodeType":"MemberAccess","referencedDeclaration":5404,"src":"25452:11:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_int24_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (int24)"}},"id":6149,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"25452:14:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"expression":{"id":6150,"name":"Constants","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2465,"src":"25470:9:12","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Constants_$2465_$","typeString":"type(library Constants)"}},"id":6151,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"25480:15:12","memberName":"MIN_V3POOL_TICK","nodeType":"MemberAccess","referencedDeclaration":2450,"src":"25470:25:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"src":"25452:43:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"id":6153,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"25451:45:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_int24","typeString":"int24"},"id":6160,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":6156,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6096,"src":"25533:1:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":6154,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6077,"src":"25521:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":6155,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"25526:6:12","memberName":"strike","nodeType":"MemberAccess","referencedDeclaration":5404,"src":"25521:11:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_int24_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (int24)"}},"id":6157,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"25521:14:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"expression":{"id":6158,"name":"Constants","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2465,"src":"25539:9:12","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Constants_$2465_$","typeString":"type(library Constants)"}},"id":6159,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"memberLocation":"25549:15:12","memberName":"MAX_V3POOL_TICK","nodeType":"MemberAccess","referencedDeclaration":2453,"src":"25539:25:12","typeDescriptions":{"typeIdentifier":"t_int24","typeString":"int24"}},"src":"25521:43:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"id":6161,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"25520:45:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"25451:114:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":6169,"nodeType":"IfStatement","src":"25426:198:12","trueBody":{"errorCall":{"arguments":[{"hexValue":"34","id":6166,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"25622:1:12","typeDescriptions":{"typeIdentifier":"t_rational_4_by_1","typeString":"int_const 4"},"value":"4"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_4_by_1","typeString":"int_const 4"}],"expression":{"id":6163,"name":"Errors","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2516,"src":"25591:6:12","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Errors_$2516_$","typeString":"type(library Errors)"}},"id":6165,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"25598:23:12","memberName":"InvalidTokenIdParameter","nodeType":"MemberAccess","referencedDeclaration":2482,"src":"25591:30:12","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_uint256_$returns$__$","typeString":"function (uint256) pure"}},"id":6167,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"25591:33:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":6168,"nodeType":"RevertStatement","src":"25584:40:12"}},{"assignments":[6171],"declarations":[{"constant":false,"id":6171,"mutability":"mutable","name":"riskPartnerIndex","nameLocation":"25903:16:12","nodeType":"VariableDeclaration","scope":6283,"src":"25895:24:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":6170,"name":"uint256","nodeType":"ElementaryTypeName","src":"25895:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":6176,"initialValue":{"arguments":[{"id":6174,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6096,"src":"25939:1:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":6172,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6077,"src":"25922:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":6173,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"25927:11:12","memberName":"riskPartner","nodeType":"MemberAccess","referencedDeclaration":5375,"src":"25922:16:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":6175,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"25922:19:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"25895:46:12"},{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6179,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":6177,"name":"riskPartnerIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6171,"src":"25963:16:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":6178,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6096,"src":"25983:1:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"25963:21:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":6282,"nodeType":"IfStatement","src":"25959:1751:12","trueBody":{"id":6281,"nodeType":"Block","src":"25986:1724:12","statements":[{"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6185,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":6182,"name":"riskPartnerIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6171,"src":"26090:16:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":6180,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6077,"src":"26073:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":6181,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"26078:11:12","memberName":"riskPartner","nodeType":"MemberAccess","referencedDeclaration":5375,"src":"26073:16:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":6183,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"26073:34:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":6184,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6096,"src":"26111:1:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"26073:39:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":6192,"nodeType":"IfStatement","src":"26069:109:12","trueBody":{"errorCall":{"arguments":[{"hexValue":"33","id":6189,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"26176:1:12","typeDescriptions":{"typeIdentifier":"t_rational_3_by_1","typeString":"int_const 3"},"value":"3"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_3_by_1","typeString":"int_const 3"}],"expression":{"id":6186,"name":"Errors","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2516,"src":"26145:6:12","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Errors_$2516_$","typeString":"type(library Errors)"}},"id":6188,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"26152:23:12","memberName":"InvalidTokenIdParameter","nodeType":"MemberAccess","referencedDeclaration":2482,"src":"26145:30:12","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_uint256_$returns$__$","typeString":"function (uint256) pure"}},"id":6190,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"26145:33:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":6191,"nodeType":"RevertStatement","src":"26138:40:12"}},{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":6213,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6201,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":6195,"name":"riskPartnerIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6171,"src":"26338:16:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":6193,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6077,"src":"26327:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":6194,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"26332:5:12","memberName":"asset","nodeType":"MemberAccess","referencedDeclaration":5259,"src":"26327:10:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":6196,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"26327:28:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"id":6199,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6096,"src":"26370:1:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":6197,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6077,"src":"26359:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":6198,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"26364:5:12","memberName":"asset","nodeType":"MemberAccess","referencedDeclaration":5259,"src":"26359:10:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":6200,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"26359:13:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"26327:45:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"id":6202,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"26326:47:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"||","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6211,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"arguments":[{"id":6205,"name":"riskPartnerIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6171,"src":"26419:16:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":6203,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6077,"src":"26402:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":6204,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"26407:11:12","memberName":"optionRatio","nodeType":"MemberAccess","referencedDeclaration":5288,"src":"26402:16:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":6206,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"26402:34:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"id":6209,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6096,"src":"26457:1:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":6207,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6077,"src":"26440:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":6208,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"26445:11:12","memberName":"optionRatio","nodeType":"MemberAccess","referencedDeclaration":5288,"src":"26440:16:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":6210,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"26440:19:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"26402:57:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"id":6212,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"26401:59:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"26326:134:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":6220,"nodeType":"IfStatement","src":"26297:226:12","trueBody":{"errorCall":{"arguments":[{"hexValue":"33","id":6217,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"26521:1:12","typeDescriptions":{"typeIdentifier":"t_rational_3_by_1","typeString":"int_const 3"},"value":"3"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_3_by_1","typeString":"int_const 3"}],"expression":{"id":6214,"name":"Errors","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2516,"src":"26490:6:12","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Errors_$2516_$","typeString":"type(library Errors)"}},"id":6216,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"26497:23:12","memberName":"InvalidTokenIdParameter","nodeType":"MemberAccess","referencedDeclaration":2482,"src":"26490:30:12","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_uint256_$returns$__$","typeString":"function (uint256) pure"}},"id":6218,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"26490:33:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":6219,"nodeType":"RevertStatement","src":"26483:40:12"}},{"assignments":[6222],"declarations":[{"constant":false,"id":6222,"mutability":"mutable","name":"isLong","nameLocation":"26614:6:12","nodeType":"VariableDeclaration","scope":6281,"src":"26606:14:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":6221,"name":"uint256","nodeType":"ElementaryTypeName","src":"26606:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":6227,"initialValue":{"arguments":[{"id":6225,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6096,"src":"26635:1:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":6223,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6077,"src":"26623:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":6224,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"26628:6:12","memberName":"isLong","nodeType":"MemberAccess","referencedDeclaration":5317,"src":"26623:11:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":6226,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"26623:14:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"26606:31:12"},{"assignments":[6229],"declarations":[{"constant":false,"id":6229,"mutability":"mutable","name":"isLongP","nameLocation":"26667:7:12","nodeType":"VariableDeclaration","scope":6281,"src":"26659:15:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":6228,"name":"uint256","nodeType":"ElementaryTypeName","src":"26659:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":6234,"initialValue":{"arguments":[{"id":6232,"name":"riskPartnerIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6171,"src":"26689:16:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":6230,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6077,"src":"26677:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":6231,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"26682:6:12","memberName":"isLong","nodeType":"MemberAccess","referencedDeclaration":5317,"src":"26677:11:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":6233,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"26677:29:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"26659:47:12"},{"assignments":[6236],"declarations":[{"constant":false,"id":6236,"mutability":"mutable","name":"tokenType","nameLocation":"26808:9:12","nodeType":"VariableDeclaration","scope":6281,"src":"26800:17:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":6235,"name":"uint256","nodeType":"ElementaryTypeName","src":"26800:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":6241,"initialValue":{"arguments":[{"id":6239,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6096,"src":"26835:1:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":6237,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6077,"src":"26820:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":6238,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"26825:9:12","memberName":"tokenType","nodeType":"MemberAccess","referencedDeclaration":5346,"src":"26820:14:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":6240,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"26820:17:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"26800:37:12"},{"assignments":[6243],"declarations":[{"constant":false,"id":6243,"mutability":"mutable","name":"tokenTypeP","nameLocation":"26867:10:12","nodeType":"VariableDeclaration","scope":6281,"src":"26859:18:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":6242,"name":"uint256","nodeType":"ElementaryTypeName","src":"26859:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":6248,"initialValue":{"arguments":[{"id":6246,"name":"riskPartnerIndex","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6171,"src":"26895:16:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint256","typeString":"uint256"}],"expression":{"id":6244,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6077,"src":"26880:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":6245,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"26885:9:12","memberName":"tokenType","nodeType":"MemberAccess","referencedDeclaration":5346,"src":"26880:14:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$_t_uint256_$returns$_t_uint256_$attached_to$_t_uint256_$","typeString":"function (uint256,uint256) pure returns (uint256)"}},"id":6247,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"26880:32:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"VariableDeclarationStatement","src":"26859:53:12"},{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":6257,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6251,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":6249,"name":"isLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6222,"src":"27113:6:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"id":6250,"name":"isLongP","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6229,"src":"27123:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"27113:17:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"id":6252,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"27112:19:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"&&","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6255,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":6253,"name":"tokenType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6236,"src":"27136:9:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"id":6254,"name":"tokenTypeP","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6243,"src":"27149:10:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"27136:23:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"id":6256,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"27135:25:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"27112:48:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":6264,"nodeType":"IfStatement","src":"27108:118:12","trueBody":{"errorCall":{"arguments":[{"hexValue":"34","id":6261,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"27224:1:12","typeDescriptions":{"typeIdentifier":"t_rational_4_by_1","typeString":"int_const 4"},"value":"4"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_4_by_1","typeString":"int_const 4"}],"expression":{"id":6258,"name":"Errors","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2516,"src":"27193:6:12","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Errors_$2516_$","typeString":"type(library Errors)"}},"id":6260,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"27200:23:12","memberName":"InvalidTokenIdParameter","nodeType":"MemberAccess","referencedDeclaration":2482,"src":"27193:30:12","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_uint256_$returns$__$","typeString":"function (uint256) pure"}},"id":6262,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"27193:33:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":6263,"nodeType":"RevertStatement","src":"27186:40:12"}},{"condition":{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":6273,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6267,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":6265,"name":"isLong","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6222,"src":"27578:6:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":6266,"name":"isLongP","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6229,"src":"27588:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"27578:17:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"id":6268,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"27577:19:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"&&","rightExpression":{"components":[{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6271,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":6269,"name":"tokenType","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6236,"src":"27601:9:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":6270,"name":"tokenTypeP","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6243,"src":"27614:10:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"src":"27601:23:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}],"id":6272,"isConstant":false,"isInlineArray":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"TupleExpression","src":"27600:25:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"src":"27577:48:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":6280,"nodeType":"IfStatement","src":"27573:118:12","trueBody":{"errorCall":{"arguments":[{"hexValue":"35","id":6277,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"27689:1:12","typeDescriptions":{"typeIdentifier":"t_rational_5_by_1","typeString":"int_const 5"},"value":"5"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_5_by_1","typeString":"int_const 5"}],"expression":{"id":6274,"name":"Errors","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2516,"src":"27658:6:12","typeDescriptions":{"typeIdentifier":"t_type$_t_contract$_Errors_$2516_$","typeString":"type(library Errors)"}},"id":6276,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"27665:23:12","memberName":"InvalidTokenIdParameter","nodeType":"MemberAccess","referencedDeclaration":2482,"src":"27658:30:12","typeDescriptions":{"typeIdentifier":"t_function_error_pure$_t_uint256_$returns$__$","typeString":"function (uint256) pure"}},"id":6278,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"27658:33:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":6279,"nodeType":"RevertStatement","src":"27651:40:12"}}]}}]},"condition":{"commonType":{"typeIdentifier":"t_uint256","typeString":"uint256"},"id":6101,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":6099,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6096,"src":"24661:1:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"nodeType":"BinaryOperation","operator":"<","rightExpression":{"hexValue":"34","id":6100,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"24665:1:12","typeDescriptions":{"typeIdentifier":"t_rational_4_by_1","typeString":"int_const 4"},"value":"4"},"src":"24661:5:12","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":6284,"initializationExpression":{"assignments":[6096],"declarations":[{"constant":false,"id":6096,"mutability":"mutable","name":"i","nameLocation":"24654:1:12","nodeType":"VariableDeclaration","scope":6284,"src":"24646:9:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":6095,"name":"uint256","nodeType":"ElementaryTypeName","src":"24646:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"id":6098,"initialValue":{"hexValue":"30","id":6097,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"24658:1:12","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"},"nodeType":"VariableDeclarationStatement","src":"24646:13:12"},"loopExpression":{"expression":{"id":6103,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"nodeType":"UnaryOperation","operator":"++","prefix":true,"src":"24668:3:12","subExpression":{"id":6102,"name":"i","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6096,"src":"24670:1:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":6104,"nodeType":"ExpressionStatement","src":"24668:3:12"},"nodeType":"ForStatement","src":"24641:3083:12"}]},{"expression":{"arguments":[],"expression":{"argumentTypes":[],"expression":{"id":6286,"name":"self","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":6077,"src":"27777:4:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"id":6287,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"27782:9:12","memberName":"univ3pool","nodeType":"MemberAccess","referencedDeclaration":5232,"src":"27777:14:12","typeDescriptions":{"typeIdentifier":"t_function_internal_pure$_t_uint256_$returns$_t_uint64_$attached_to$_t_uint256_$","typeString":"function (uint256) pure returns (uint64)"}},"id":6288,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"27777:16:12","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"functionReturnParameters":6081,"id":6289,"nodeType":"Return","src":"27770:23:12"}]},"documentation":{"id":6075,"nodeType":"StructuredDocumentation","src":"24112:278:12","text":"@notice Validate an option position and all its active legs; return the underlying AMM address.\n @dev used to validate a position tokenId and its legs.\n @param self the option position id.\n @return the first 64 bits of the underlying Uniswap V3 address."},"implemented":true,"kind":"function","modifiers":[],"name":"validate","nameLocation":"24404:8:12","parameters":{"id":6078,"nodeType":"ParameterList","parameters":[{"constant":false,"id":6077,"mutability":"mutable","name":"self","nameLocation":"24421:4:12","nodeType":"VariableDeclaration","scope":6291,"src":"24413:12:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"},"typeName":{"id":6076,"name":"uint256","nodeType":"ElementaryTypeName","src":"24413:7:12","typeDescriptions":{"typeIdentifier":"t_uint256","typeString":"uint256"}},"visibility":"internal"}],"src":"24412:14:12"},"returnParameters":{"id":6081,"nodeType":"ParameterList","parameters":[{"constant":false,"id":6080,"mutability":"mutable","name":"","nameLocation":"-1:-1:-1","nodeType":"VariableDeclaration","scope":6291,"src":"24450:6:12","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"},"typeName":{"id":6079,"name":"uint64","nodeType":"ElementaryTypeName","src":"24450:6:12","typeDescriptions":{"typeIdentifier":"t_uint64","typeString":"uint64"}},"visibility":"internal"}],"src":"24449:8:12"},"scope":6292,"stateMutability":"pure","virtual":false,"visibility":"internal"}],"abstract":false,"baseContracts":[],"canonicalName":"TokenId","contractDependencies":[],"contractKind":"library","documentation":{"id":5199,"nodeType":"StructuredDocumentation","src":"182:4086:12","text":"@title Panoptic's tokenId: the fundamental options position.\n @author Axicon Labs Limited\n @notice This is the token ID used in the ERC1155 representation of the option position in the SFPM.\n @notice The SFPM \"Overloads\" the ERC1155 `id` by storing all option information in said `id`.\n @notice Contains methods for packing and unpacking a Panoptic options position into a uint256 bit pattern.\n @notice our terminology: \"leg n\" or \"nth leg\" (in {1,2,3,4}) corresponds to \"leg index n-1\" or `legIndex` (in {0,1,2,3})\n @dev PACKING RULES FOR A TOKENID:\n @dev this is how the token Id is packed into its bit-constituents containing position information.\n @dev the following is a diagram to be read top-down in a little endian format\n @dev (so (1) below occupies the first 64 least significant bits, e.g.):\n @dev From the LSB to the MSB:\n ===== 1 time (same for all legs) ==============================================================\n      Property         Size      Offset      Comment\n (1) univ3pool        64bits     0bits      : first 8 bytes of the Uniswap v3 pool address (first 64 bits; little-endian), plus a pseudorandom number in the event of a collision\n ===== 4 times (one for each leg) ==============================================================\n (2) asset             1bit      0bits      : Specifies the asset (0: token0, 1: token1)\n (3) optionRatio       7bits     1bits      : number of contracts per leg\n (4) isLong            1bit      8bits      : long==1 means liquidity is removed, long==0 -> liquidity is added\n (5) tokenType         1bit      9bits      : put/call: which token is moved when deployed (0 -> token0, 1 -> token1)\n (6) riskPartner       2bits     10bits     : normally its own index. Partner in defined risk position otherwise\n (7) strike           24bits     12bits     : strike price; defined as (tickUpper + tickLower) / 2\n (8) width            12bits     36bits     : width; defined as (tickUpper - tickLower) / tickSpacing\n Total                48bits                : Each leg takes up this many bits\n ===============================================================================================\n The bit pattern is therefore, in general:\n                        (strike price tick of the 3rd leg)\n                            |             (width of the 2nd leg)\n                            |                   |\n (8)(7)(6)(5)(4)(3)(2)  (8)(7)(6)(5)(4)(3)(2)  (8)(7)(6)(5)(4)(3)(2)   (8)(7)(6)(5)(4)(3)(2)        (1)\n  <---- 48 bits ---->    <---- 48 bits ---->    <---- 48 bits ---->     <---- 48 bits ---->    <- 64 bits ->\n         Leg 4                  Leg 3                  Leg 2                   Leg 1         Univ3 Pool Address\n  <--- most significant bit                                                       least significant bit --->\n @notice Some rules of how legs behave (we enforce these in a `validate()` function):\n   - a leg is inactive if it's not part of the position. Technically it means that all bits are zero.\n   - a leg is active if it has an optionRatio > 0 since this must always be set for an active leg.\n   - if a leg is active (e.g. leg 1) there can be no gaps in other legs meaning: if leg 1 is active then leg 3 cannot be active if leg 2 is inactive.\n Examples:\n  We can think of the bit pattern as an array starting at bit index 0 going to bit index 255 (so 256 total bits)\n  We also refer to the legs via their index, so leg number 2 has leg index 1 (legIndex) (counting from zero), and in general leg number N has leg index N-1.\n  - the underlying strike price of the 2nd leg (leg index = 1) in this option position starts at bit index  (64 + 12 + 48 * (leg index=1))=123\n  - the tokenType of the 4th leg in this option position starts at bit index 64+9+48*3=217\n  - the Uniswap v3 pool id starts at bit index 0 and ends at bit index 63 (and thus takes up 64 bits).\n  - the width of the 3rd leg in this option position starts at bit index 64+36+48*2=196"},"fullyImplemented":true,"linearizedBaseContracts":[6292],"name":"TokenId","nameLocation":"4276:7:12","scope":6293,"usedErrors":[]}],"license":"GPL-2.0-or-later"},"id":12}